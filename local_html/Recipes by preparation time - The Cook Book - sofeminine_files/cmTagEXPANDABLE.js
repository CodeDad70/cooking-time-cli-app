!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(1),s=n(r),o=i(7),a=n(o);i(21);var l=window.define;window.define=null;var d=i(2),u=(i(23),i(27),i(28)),h=(i(29),i(6));window.define=l;var c=(i(24),i(30)),p=i(31),f=i(32),m=i(33),g=i(36),v=i(37),y=i(38);window.startCMTagMain=function(t,e){function n(){if(t.unitName=t.unitType,t.urlPrefix){var e=t.urlPrefix.split("/");t.unitVersion=e[e.length-2],t.unitVersion=t.unitVersion.replace(/_/g,"")}switch(t.unitType){case"INLINE":;break;case"INLINE_INSTREAM":;break;case"INLINE_OUT_OF_VIEW":;break;case"INLINE_FEED":;break;case"INTERSTITIAL":;break;case"SLIDER_OUTSTREAM":;break;case"SLIDER_INSTREAM":;break;case"300X600":;break;case"EXPANDABLE":var n=i(42),s=i(45),o=i(46);x=r(n,s,t);new o({model:x});break;case"COFFEEBREAK":;break;case"SLIDESHOW":;break;case"WIDGET_ITEM":;break;case"CUSTOM":}x.get("multiUnitManager.isActive")&&p.addUnit(x.get("redId"),x)}function r(t,i,n){var r=new u.DeepModel;e&&e._settings&&r.set(e._settings);var s=a.default[n.unitName],o=n.isMobile?"mobile":"desktop";if(s=!!s&&s[o])for(var l in n.preset){var d=n.preset[l];s[l]&&s[l][d]&&r.set(s[l][d])}r.set(n);var h=n.isMobile?i:t;return new h(r.attributes)}function o(){cmTag.units=cmTag.units||{},cmTag.units[d.now()]=t}function l(t){"open"===t?(x.set("supportTool",{isOpen:!0}),w()):(x.set("supportTool",{isOpen:!1}),b())}function w(){if(!E&&"OMNI_TAG"!==t.unitType){var e=v.player&&v.player.getVpaidLogs?v.player.getVpaidLogs():void 0,i=v.supportTool.dp;x.set("supportTool",{isOpen:!0});var n={creativeData:t,unitModel:x.attributes,vpaidLogs:e};i&&(n.dp=i),A=new g(n),E=new m({model:A})}}function b(){E.remove(),E=null,A=null}function _(){e&&(e._events&&(e._events.forEach(function(t){u.on(t.name,t.cb)}),e.on=function(t,e){u.on(t,e)}),e.trigger=function(t,e){u.trigger(t,e)})}function T(){u.$=h,d.templateSettings={interpolate:/\{\{(.+?)\}\}/g},cmTag.logger=new s.default(t),cmTag.logger.info("init",t),cmTag.logger.ga(t.unitType,"start"),cmTag.utils=d,cmTag.$=h,_();var e=window;d.isInFriendlyIframe(cmTag.config.iframeData)&&(e=d.getTopWindow()),t.isHideIframe&&d.hideDFPIframe(t.iframeData),u.on("supportTool:event",l),cmTag.config.scrollSelector?new c(e,cmTag.config.scrollSelector):new c(e);new f(t);n(),o()}var E,A,x;y.beforeCMTag(t),h("document").ready(T)},t.exports=window.cmTag},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(2),d=n(l),u=i(3),h=n(u),c=i(4),p=n(c),f=i(5),m=n(f),g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.addTrace,n=void 0!==i&&i,o=t.isDebug,a=void 0!==o&&o,l=t.isConsole,u=void 0===l?a:l,c=t.isSaveLog,p=void 0===c?a:c,f=t.extraLogGA,g=void 0!==f&&f,v=t.version,y=t.isGA;r(this,e);var w=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return w.addTrace=n,w.isDebug=d.default.parseBool(a),w.isConsole=d.default.parseBool(u),w.isSaveLog=d.default.parseBool(p),w.isGA=d.default.parseBool(y),w.extraLogGA=g,w._ga=h.default.getInstance(v,w.isGA),w._ul=m.default.getInstance(),w}return o(e,t),a(e,[{key:"info",value:function(t,e){this.isDebug&&(console.info("cmTag: "+t,e),this.addTrace&&console.trace())}},{key:"debug",value:function(t,e){this.isDebug&&console.debug("cmTag: "+t,e)}},{key:"error",value:function(t,e){console.error("cmTag: "+t,e)}},{key:"ga",value:function(t,e,i){return this.extraLogGA&&this.info("GA extra log",{unitType:t,action:e,version:i}),this._ga.send(t,e,i)}},{key:"ul",value:function(t,e,i){return this._ul.send(t,e,i)}},{key:"success",value:function(t,e){this.isDebug&&console.log("%ccmTag: "+t,"color: green",e)}},{key:"important",value:function(t,e){this.isDebug&&console.log("%ccmTag: "+t,"color: purple",e)}},{key:"warning",value:function(t,e){this.isDebug&&console.log("%ccmTag: "+t,"color: orange",e)}},{key:"pixel",value:function(t,e){this.isDebug&&console.log("%ccmTag: "+t,"color: #00A0B2",e)}}],[{key:"create",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(i)))}}]),e}(p.default);e.default=g},function(t,e,i){var n,r;(function(){function i(t){function e(e,i,n,r,s,o){for(;s>=0&&s<o;s+=t){var a=r?r[s]:s;n=i(n,e[a],a,e)}return n}return function(i,n,r,s){n=E(n,s,4);var o=!S(i)&&T.keys(i),a=(o||i).length,l=t>0?0:a-1;return arguments.length<3&&(r=i[o?o[l]:l],l+=t),e(i,n,r,o,l,a)}}function s(t){return function(e,i,n){i=A(i,n);for(var r=k(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(i(e[s],s,e))return s;return-1}}function o(t,e,i){return function(n,r,s){var o=0,a=k(n);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(n,r),n[s]===r?s:-1;if(r!==r)return s=e(f.call(n,o,a),T.isNaN),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(n[s]===r)return s;return-1}}function a(t,e){var i=O.length,n=t.constructor,r=T.isFunction(n)&&n.prototype||h,s="constructor";for(T.has(t,s)&&!T.contains(e,s)&&e.push(s);i--;)s=O[i],s in t&&t[s]!==r[s]&&!T.contains(e,s)&&e.push(s)}var l=this,d=l._,u=Array.prototype,h=Object.prototype,c=Function.prototype,p=u.push,f=u.slice,m=h.toString,g=h.hasOwnProperty,v=Array.isArray,y=Object.keys,w=c.bind,b=Object.create,_=function(){},T=function(t){return t instanceof T?t:this instanceof T?void(this._wrapped=t):new T(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=T),e._=T,T.VERSION="1.8.3";var E=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}},A=function(t,e,i){return null==t?T.identity:T.isFunction(t)?E(t,e,i):T.isObject(t)?T.matcher(t):T.property(t)};T.iteratee=function(t,e){return A(t,e,1/0)};var x=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var r=1;r<n;r++)for(var s=arguments[r],o=t(s),a=o.length,l=0;l<a;l++){var d=o[l];e&&void 0!==i[d]||(i[d]=s[d])}return i}},C=function(t){if(!T.isObject(t))return{};if(b)return b(t);_.prototype=t;var e=new _;return _.prototype=null,e},P=function(t){return function(e){return null==e?void 0:e[t]}},I=Math.pow(2,53)-1,k=P("length"),S=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=I};T.each=T.forEach=function(t,e,i){e=E(e,i);var n,r;if(S(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var s=T.keys(t);for(n=0,r=s.length;n<r;n++)e(t[s[n]],s[n],t)}return t},T.map=T.collect=function(t,e,i){e=A(e,i);for(var n=!S(t)&&T.keys(t),r=(n||t).length,s=Array(r),o=0;o<r;o++){var a=n?n[o]:o;s[o]=e(t[a],a,t)}return s},T.reduce=T.foldl=T.inject=i(1),T.reduceRight=T.foldr=i(-1),T.find=T.detect=function(t,e,i){var n;if(n=S(t)?T.findIndex(t,e,i):T.findKey(t,e,i),void 0!==n&&n!==-1)return t[n]},T.filter=T.select=function(t,e,i){var n=[];return e=A(e,i),T.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},T.reject=function(t,e,i){return T.filter(t,T.negate(A(e)),i)},T.every=T.all=function(t,e,i){e=A(e,i);for(var n=!S(t)&&T.keys(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0},T.some=T.any=function(t,e,i){e=A(e,i);for(var n=!S(t)&&T.keys(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1},T.contains=T.includes=T.include=function(t,e,i,n){return S(t)||(t=T.values(t)),("number"!=typeof i||n)&&(i=0),T.indexOf(t,e,i)>=0},T.invoke=function(t,e){var i=f.call(arguments,2),n=T.isFunction(e);return T.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},T.pluck=function(t,e){return T.map(t,T.property(e))},T.where=function(t,e){return T.filter(t,T.matcher(e))},T.findWhere=function(t,e){return T.find(t,T.matcher(e))},T.max=function(t,e,i){var n,r,s=-(1/0),o=-(1/0);if(null==e&&null!=t){t=S(t)?t:T.values(t);for(var a=0,l=t.length;a<l;a++)n=t[a],n>s&&(s=n)}else e=A(e,i),T.each(t,function(t,i,n){r=e(t,i,n),(r>o||r===-(1/0)&&s===-(1/0))&&(s=t,o=r)});return s},T.min=function(t,e,i){var n,r,s=1/0,o=1/0;if(null==e&&null!=t){t=S(t)?t:T.values(t);for(var a=0,l=t.length;a<l;a++)n=t[a],n<s&&(s=n)}else e=A(e,i),T.each(t,function(t,i,n){r=e(t,i,n),(r<o||r===1/0&&s===1/0)&&(s=t,o=r)});return s},T.shuffle=function(t){for(var e,i=S(t)?t:T.values(t),n=i.length,r=Array(n),s=0;s<n;s++)e=T.random(0,s),e!==s&&(r[s]=r[e]),r[e]=i[s];return r},T.sample=function(t,e,i){return null==e||i?(S(t)||(t=T.values(t)),t[T.random(t.length-1)]):T.shuffle(t).slice(0,Math.max(0,e))},T.sortBy=function(t,e,i){return e=A(e,i),T.pluck(T.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,i,n){var r={};return i=A(i,n),T.each(e,function(n,s){var o=i(n,s,e);t(r,n,o)}),r}};T.groupBy=D(function(t,e,i){T.has(t,i)?t[i].push(e):t[i]=[e]}),T.indexBy=D(function(t,e,i){t[i]=e}),T.countBy=D(function(t,e,i){T.has(t,i)?t[i]++:t[i]=1}),T.toArray=function(t){return t?T.isArray(t)?f.call(t):S(t)?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:S(t)?t.length:T.keys(t).length},T.partition=function(t,e,i){e=A(e,i);var n=[],r=[];return T.each(t,function(t,i,s){(e(t,i,s)?n:r).push(t)}),[n,r]},T.first=T.head=T.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:T.initial(t,t.length-e)},T.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},T.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:T.rest(t,Math.max(0,t.length-e))},T.rest=T.tail=T.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var B=function(t,e,i,n){for(var r=[],s=0,o=n||0,a=k(t);o<a;o++){var l=t[o];if(S(l)&&(T.isArray(l)||T.isArguments(l))){e||(l=B(l,e,i));var d=0,u=l.length;for(r.length+=u;d<u;)r[s++]=l[d++]}else i||(r[s++]=l)}return r};T.flatten=function(t,e){return B(t,e,!1)},T.without=function(t){return T.difference(t,f.call(arguments,1))},T.uniq=T.unique=function(t,e,i,n){T.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=A(i,n));for(var r=[],s=[],o=0,a=k(t);o<a;o++){var l=t[o],d=i?i(l,o,t):l;e?(o&&s===d||r.push(l),s=d):i?T.contains(s,d)||(s.push(d),r.push(l)):T.contains(r,l)||r.push(l)}return r},T.union=function(){return T.uniq(B(arguments,!0,!0))},T.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=k(t);n<r;n++){var s=t[n];if(!T.contains(e,s)){for(var o=1;o<i&&T.contains(arguments[o],s);o++);o===i&&e.push(s)}}return e},T.difference=function(t){var e=B(arguments,!0,!0,1);return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){return T.unzip(arguments)},T.unzip=function(t){for(var e=t&&T.max(t,k).length||0,i=Array(e),n=0;n<e;n++)i[n]=T.pluck(t,n);return i},T.object=function(t,e){for(var i={},n=0,r=k(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},T.findIndex=s(1),T.findLastIndex=s(-1),T.sortedIndex=function(t,e,i,n){i=A(i,n,1);for(var r=i(e),s=0,o=k(t);s<o;){var a=Math.floor((s+o)/2);i(t[a])<r?s=a+1:o=a}return s},T.indexOf=o(1,T.findIndex,T.sortedIndex),T.lastIndexOf=o(-1,T.findLastIndex),T.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;s<n;s++,t+=i)r[s]=t;return r};var V=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=C(t.prototype),o=t.apply(s,r);return T.isObject(o)?o:s};T.bind=function(t,e){if(w&&t.bind===w)return w.apply(t,f.call(arguments,1));if(!T.isFunction(t))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return V(t,n,e,this,i.concat(f.call(arguments)))};return n},T.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,r=e.length,s=Array(r),o=0;o<r;o++)s[o]=e[o]===T?arguments[n++]:e[o];for(;n<arguments.length;)s.push(arguments[n++]);return V(t,i,this,this,s)};return i},T.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=T.bind(t[i],t);return t},T.memoize=function(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return T.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},T.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},T.defer=T.partial(T.delay,T,1),T.throttle=function(t,e,i){var n,r,s,o=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:T.now(),o=null,s=t.apply(n,r),o||(n=r=null)};return function(){var d=T.now();a||i.leading!==!1||(a=d);var u=e-(d-a);return n=this,r=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=d,s=t.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(l,u)),s}},T.debounce=function(t,e,i){var n,r,s,o,a,l=function(){var d=T.now()-o;d<e&&d>=0?n=setTimeout(l,e-d):(n=null,i||(a=t.apply(s,r),n||(s=r=null)))};return function(){s=this,r=arguments,o=T.now();var d=i&&!n;return n||(n=setTimeout(l,e)),d&&(a=t.apply(s,r),s=r=null),a}},T.wrap=function(t,e){return T.partial(e,t)},T.negate=function(t){return function(){return!t.apply(this,arguments)}},T.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},T.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},T.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},T.once=T.partial(T.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];T.keys=function(t){if(!T.isObject(t))return[];if(y)return y(t);var e=[];for(var i in t)T.has(t,i)&&e.push(i);return F&&a(t,e),e},T.allKeys=function(t){if(!T.isObject(t))return[];var e=[];for(var i in t)e.push(i);return F&&a(t,e),e},T.values=function(t){for(var e=T.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n},T.mapObject=function(t,e,i){e=A(e,i);for(var n,r=T.keys(t),s=r.length,o={},a=0;a<s;a++)n=r[a],o[n]=e(t[n],n,t);return o},T.pairs=function(t){for(var e=T.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},T.invert=function(t){for(var e={},i=T.keys(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e},T.functions=T.methods=function(t){var e=[];for(var i in t)T.isFunction(t[i])&&e.push(i);return e.sort()},T.extend=x(T.allKeys),T.extendOwn=T.assign=x(T.keys),T.findKey=function(t,e,i){e=A(e,i);for(var n,r=T.keys(t),s=0,o=r.length;s<o;s++)if(n=r[s],e(t[n],n,t))return n},T.pick=function(t,e,i){var n,r,s={},o=t;if(null==o)return s;T.isFunction(e)?(r=T.allKeys(o),n=E(e,i)):(r=B(arguments,!1,!1,1),n=function(t,e,i){return e in i},o=Object(o));for(var a=0,l=r.length;a<l;a++){var d=r[a],u=o[d];n(u,d,o)&&(s[d]=u)}return s},T.omit=function(t,e,i){if(T.isFunction(e))e=T.negate(e);else{var n=T.map(B(arguments,!1,!1,1),String);e=function(t,e){return!T.contains(n,e)}}return T.pick(t,e,i)},T.defaults=x(T.allKeys,!0),T.create=function(t,e){var i=C(t);return e&&T.extendOwn(i,e),i},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t},T.isMatch=function(t,e){var i=T.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;s<n;s++){var o=i[s];if(e[o]!==r[o]||!(o in r))return!1}return!0};var R=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var r=m.call(t);if(r!==m.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(T.isFunction(o)&&o instanceof o&&T.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!R(t[l],e[l],i,n))return!1}else{var d,u=T.keys(t);if(l=u.length,T.keys(e).length!==l)return!1;for(;l--;)if(d=u[l],!T.has(e,d)||!R(t[d],e[d],i,n))return!1}return i.pop(),n.pop(),!0};T.isEqual=function(t,e){return R(t,e)},T.isEmpty=function(t){return null==t||(S(t)&&(T.isArray(t)||T.isString(t)||T.isArguments(t))?0===t.length:0===T.keys(t).length)},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=v||function(t){return"[object Array]"===m.call(t)},T.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},T.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){T["is"+t]=function(e){return m.call(e)==="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return T.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(T.isFunction=function(t){return"function"==typeof t||!1}),T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!==+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===m.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return null!=t&&g.call(t,e)},T.noConflict=function(){return l._=d,this},T.identity=function(t){return t},T.constant=function(t){return function(){return t}},T.noop=function(){},T.property=P,T.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},T.matcher=T.matches=function(t){return t=T.extendOwn({},t),function(e){return T.isMatch(e,t)}},T.times=function(t,e,i){var n=Array(Math.max(0,t));e=E(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},T.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=T.invert(N),L=function(t){var e=function(e){return t[e]},i="(?:"+T.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};T.escape=L(N),T.unescape=L(M),T.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),T.isFunction(n)?n.call(t):n};var U=0;T.uniqueId=function(t){var e=++U+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+W[t]};T.template=function(t,e,i){!e&&i&&(e=i),e=T.defaults({},e,T.templateSettings);var n=RegExp([(e.escape||j).source,(e.interpolate||j).source,(e.evaluate||j).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,function(e,i,n,o,a){return s+=t.slice(r,a).replace(H,z),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return o.call(this,t,T)},l=e.variable||"obj";return a.source="function("+l+"){\n"+s+"}",a},T.chain=function(t){var e=T(t);return e._chain=!0,e};var q=function(t,e){return t._chain?T(e).chain():e};T.mixin=function(t){T.each(T.functions(t),function(e){var i=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),q(this,i.apply(T,t))}})},T.mixin(T),T.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];T.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],q(this,i)}}),T.each(["concat","join","slice"],function(t){var e=u[t];T.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),T.prototype.value=function(){return this._wrapped},T.prototype.valueOf=T.prototype.toJSON=T.prototype.value,T.prototype.toString=function(){return""+this._wrapped},n=[],r=function(){return T}.apply(e,n),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){return window.ga&&"function"==typeof window.ga}function l(){!function(t,e,i,n,r,s,o){t.GoogleAnalyticsObject=r,t[r]=t[r]||function(){(t[r].q=t[r].q||[]).push(arguments)},t[r].l=1*new Date,s=e.createElement(i),o=e.getElementsByTagName(i)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-66399520-1","auto"),window.ga("send","pageview")}Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(4),h=n(u),c=function(t){function e(t,i){r(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.version=t,n.isGa=i,n.isGa&&(a()||l(),n._setup()),n}return o(e,t),d(e,[{key:"_setup",value:function(){window.ga("create","UA-66399520-1","auto",{name:"cmGa"}),window.ga("cmGa.send","pageview")}},{key:"send",value:function(t,e){this.isGa&&window.ga("cmGa.send","event",t+" "+this.version,e,location.host)}}],[{key:"create",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(i)))}}]),e}(h.default);e.default=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){if(i(this,t),"instance"in this.constructor)throw new Error("Cannot instantiate more than one '"+this.constructor.name+"'");if("Singleton"==this.constructor.name)throw new Error("Cannot instantiate abstract class 'Singleton'");this.constructor.instance=this}return n(t,null,[{key:"getInstance",value:function(){return"instance"in this||this.create.apply(this,arguments),this.instance}},{key:"create",value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(t,[null].concat(i)))}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(4),d=n(l),u=i(6),h=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),a(e,[{key:"send",value:function(t,e,i){i||(i="ul");var n=JSON.stringify({timestamp:(new Date).toISOString(),type:t,data:e});u.ajax({type:"POST",url:"//bi.mikysrv.com/putes/"+i,data:n,contentType:"text/plain"})}}],[{key:"create",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(i)))}}]),e}(d.default);e.default=h},function(t,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)};var t=function(){function t(t){return null==t?String(t):G[Y.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function r(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function o(t){return s(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function l(t){return S.call(t,function(t){return null!=t})}function d(t){return t.length>0?A.fn.concat.apply([],t):t}function u(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in V?V[t]:V[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function c(t,e){return"number"!=typeof e||F[u(t)]?e:e+"px"}function p(t){var e,i;return B[t]||(e=D.createElement(t),D.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),B[t]=i),B[t]}function f(t){return"children"in t?k.call(t.children):A.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function m(t,e,i){for(E in e)i&&(o(e[E])||K(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),K(e[E])&&!K(t[E])&&(t[E]=[]),m(t[E],e[E],i)):e[E]!==T&&(t[E]=e[E])}function g(t,e){return null==e?A(t):A(t).filter(e)}function v(t,i,n,r){return e(i)?i.call(t,n,r):i}function y(t,e,i){try{null==i?t.removeAttribute(e):t.setAttribute(e,i)}catch(t){}}function w(t,e){var i=t.className||"",n=i&&i.baseVal!==T;return e===T?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?A.parseJSON(t):t):t}catch(e){return t}}function _(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)_(t.childNodes[i],e)}var T,E,A,x,C,P,I=[],k=I.slice,S=I.filter,D=window.document,B={},V={},F={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},O=/^\s*<(\w+|!)[^>]*>/,R=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,L=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],j=["after","prepend","before","append"],W=D.createElement("table"),H=D.createElement("tr"),z={tr:D.createElement("tbody"),tbody:W,thead:W,tfoot:W,td:H,th:H,"*":D.createElement("div")},q=/complete|loaded|interactive/,$=/^[\w-]*$/,G={},Y=G.toString,X={},Q=D.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(t){return t instanceof Array};return X.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,s=!r;return s&&(r=Q).appendChild(t),n=~X.qsa(r,e).indexOf(t),s&&Q.removeChild(t),n},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},P=function(t){return S.call(t,function(e,i){return t.indexOf(e)==i})},X.fragment=function(t,e,i){var n,r,s;return R.test(t)&&(n=A(D.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(N,"<$1></$2>")),e===T&&(e=O.test(t)&&RegExp.$1),e in z||(e="*"),s=z[e],s.innerHTML=""+t,n=A.each(k.call(s.childNodes),function(){s.removeChild(this)})),o(i)&&(r=A(n),A.each(i,function(t,e){U.indexOf(t)>-1?r[t](e):r.attr(t,e)})),n},X.Z=function(t,e){return t=t||[],t.__proto__=A.fn,t.selector=e||"",t},X.isZ=function(t){return t instanceof X.Z},X.init=function(t,i){var n;if(!t)return X.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&O.test(t))n=X.fragment(t,RegExp.$1,i),t=null;else{if(i!==T)return A(i).find(t);n=X.qsa(D,t)}else{if(e(t))return A(D).ready(t);if(X.isZ(t))return t;if(K(t))n=l(t);else if(s(t))n=[t],t=null;else if(O.test(t))n=X.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==T)return A(i).find(t);n=X.qsa(D,t)}}return X.Z(n,t)},A=function(t,e){return X.init(t,e)},A.extend=function(t){var e,i=k.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},X.qsa=function(t,e){var i,n="#"==e[0],s=!n&&"."==e[0],o=n||s?e.slice(1):e,a=$.test(o);return r(t)&&a&&n?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:k.call(a&&!n?s?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},A.contains=D.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},A.type=t,A.isFunction=e,A.isWindow=n,A.isArray=K,A.isPlainObject=o,A.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},A.inArray=function(t,e,i){return I.indexOf.call(e,t,i)},A.camelCase=C,A.trim=function(t){return null==t?"":String.prototype.trim.call(t)},A.uuid=0,A.support={},A.expr={},A.map=function(t,e){var i,n,r,s=[];if(a(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&s.push(i);else for(r in t)i=e(t[r],r),null!=i&&s.push(i);return d(s)},A.each=function(t,e){var i,n;if(a(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},A.grep=function(t,e){return S.call(t,e)},window.JSON&&(A.parseJSON=JSON.parse),A.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),A.fn={forEach:I.forEach,reduce:I.reduce,push:I.push,sort:I.sort,indexOf:I.indexOf,concat:I.concat,map:function(t){return A(A.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return A(k.apply(this,arguments))},ready:function(t){return q.test(D.readyState)&&D.body?t(A):D.addEventListener("DOMContentLoaded",function(){t(A)},!1),this},get:function(t){return t===T?k.call(this):this[t>=0?t:t+this.length];
},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return I.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):A(S.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return A(P(this.concat(A(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==T)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):a(t)&&e(t.item)?k.call(t):A(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return A(i)},has:function(t){return this.filter(function(){return s(t)?A.contains(this,t):A(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:A(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:A(t)},find:function(t){var e,n=this;return e=t?"object"==("undefined"==typeof t?"undefined":i(t))?A(t).filter(function(){var t=this;return I.some.call(n,function(e){return A.contains(e,t)})}):1==this.length?A(X.qsa(this[0],t)):this.map(function(){return X.qsa(this,t)}):A()},closest:function(t,e){var n=this[0],s=!1;for("object"==("undefined"==typeof t?"undefined":i(t))&&(s=A(t));n&&!(s?s.indexOf(n)>=0:X.matches(n,t));)n=n!==e&&!r(n)&&n.parentNode;return A(n)},parents:function(t){for(var e=[],i=this;i.length>0;)i=A.map(i,function(t){if((t=t.parentNode)&&!r(t)&&e.indexOf(t)<0)return e.push(t),t});return g(e,t)},parent:function(t){return g(P(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return k.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return S.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return A.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=A(t).get(0),r=n.parentNode||this.length>1;return this.each(function(e){A(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){A(this[0]).before(t=A(t));for(var e;(e=t.children()).length;)t=e.first();A(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=A(this),r=n.contents(),s=i?t.call(this,e):t;r.length?r.wrapAll(s):n.append(s)})},unwrap:function(){return this.parent().each(function(){A(this).replaceWith(A(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=A(this);(t===T?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return A(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return A(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;A(this).empty().append(v(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=v(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this[0].textContent:null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(s(t))for(E in t)y(this,E,t[E]);else y(this,t,v(this,e,i,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:T},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){y(this,t)},this)})},prop:function(t,e){return t=J[t]||t,1 in arguments?this.each(function(i){this[t]=v(this,e,i,this[t])}):this[0]&&this[0][t]},data:function t(e,i){var n="data-"+e.replace(L,"-$1").toLowerCase(),t=1 in arguments?this.attr(n,i):this.attr(n);return null!==t?b(t):T},val:function(t){return 0 in arguments?this.each(function(e){this.value=v(this,t,e,this.value)}):this[0]&&(this[0].multiple?A(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=A(this),n=v(this,t,e,i.offset()),r=i.offsetParent().offset(),s={top:n.top-r.top,left:n.left-r.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function e(i,n){if(arguments.length<2){var r,s=this[0];if(!s)return;if(r=getComputedStyle(s,""),"string"==typeof i)return s.style[C(i)]||r.getPropertyValue(i);if(K(i)){var o={};return A.each(i,function(t,e){o[e]=s.style[C(e)]||r.getPropertyValue(e)}),o}}var e="";if("string"==t(i))n||0===n?e=u(i)+":"+c(i,n):this.each(function(){this.style.removeProperty(u(i))});else for(E in i)i[E]||0===i[E]?e+=u(E)+":"+c(E,i[E])+";":this.each(function(){this.style.removeProperty(u(E))});return this.each(function(){this.style.cssText+=";"+e})},index:function(t){return t?this.indexOf(A(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&I.some.call(this,function(t){return this.test(w(t))},h(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){x=[];var i=w(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){A(this).hasClass(t)||x.push(t)},this),x.length&&w(this,i+(i?" ":"")+x.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===T)return w(this,"");x=w(this),v(this,t,e,x).split(/\s+/g).forEach(function(t){x=x.replace(h(t)," ")}),w(this,x.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=A(this),r=v(this,t,i,w(this));r.split(/\s+/g).forEach(function(t){(e===T?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===T?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===T?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=M.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(A(t).css("margin-top"))||0,i.left-=parseFloat(A(t).css("margin-left"))||0,n.top+=parseFloat(A(e[0]).css("border-top-width"))||0,n.left+=parseFloat(A(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||D.body;t&&!M.test(t.nodeName)&&"static"==A(t).css("position");)t=t.offsetParent;return t})}},A.fn.detach=A.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});A.fn[t]=function(i){var s,o=this[0];return i===T?n(o)?o["inner"+e]:r(o)?o.documentElement["scroll"+e]:(s=this.offset())&&s[t]:this.each(function(e){o=A(this),o.css(t,v(this,i,e,o[t]()))})}}),j.forEach(function(e,i){var n=i%2;A.fn[e]=function(){var e,r,s=A.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:X.fragment(i)}),o=this.length>1;return s.length<1?this:this.each(function(t,e){r=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var a=A.contains(D.documentElement,r);s.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!r)return A(t).remove();r.insertBefore(t,e),a&&_(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},A.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return A(t)[e](this),this}}),X.Z.prototype=A.fn,X.uniq=P,X.deserializeValue=b,A.zepto=X,A}(),e=t;return function(t){function e(t){return t._zid||(t._zid=c++)}function i(t,i,s,o){if(i=n(i),i.ns)var a=r(i.ns);return(g[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||a.test(t.ns))&&(!s||e(t.fn)===e(s))&&(!o||t.sel==o)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!y&&t.e in w||!!e}function o(t){return b[t]||y&&w[t]||t}function a(i,r,a,l,u,c,p){var f=e(i),m=g[f]||(g[f]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var r=n(e);r.fn=a,r.sel=u,r.e in b&&(a=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return r.fn.apply(this,arguments)}),r.del=c;var f=c||a;r.proxy=function(t){if(t=d(t),!t.isImmediatePropagationStopped()){t.data=l;var e=f.apply(i,t._args==h?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in i&&i.addEventListener(o(r.e),r.proxy,s(r,p))})}function l(t,n,r,a,l){var d=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,r,a).forEach(function(e){delete g[d][e.i],"removeEventListener"in t&&t.removeEventListener(o(e.e),e.proxy,s(e,l))})})}function d(e,i){return!i&&e.isDefaultPrevented||(i||(i=e),t.each(A,function(t,n){var r=i[t];e[t]=function(){return this[n]=_,r&&r.apply(i,arguments)},e[n]=T}),(i.defaultPrevented!==h?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=_)),e}function u(t){var e,i={originalEvent:t};for(e in t)E.test(e)||t[e]===h||(i[e]=t[e]);return d(i,t)}var h,c=1,p=Array.prototype.slice,f=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,w={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:l},t.proxy=function(i,n){var r=2 in arguments&&p.call(arguments,2);if(f(i)){var s=function(){return i.apply(n,r?r.concat(p.call(arguments)):arguments)};return s._zid=e(i),s}if(m(n))return r?(r.unshift(i[n],i),t.proxy.apply(null,r)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var _=function(){return!0},T=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,r,s){var o,d,c=this;return e&&!m(e)?(t.each(e,function(t,e){c.on(t,i,n,e,s)}),c):(m(i)||f(r)||r===!1||(r=n,n=i,i=h),(f(n)||n===!1)&&(r=n,n=h),r===!1&&(r=T),c.each(function(h,c){s&&(o=function(t){return l(c,t.type,r),r.apply(this,arguments)}),i&&(d=function(e){var n,s=t(e.target).closest(i,c).get(0);if(s&&s!==c)return n=t.extend(u(e),{currentTarget:s,liveFired:c}),(o||r).apply(s,[n].concat(p.call(arguments,1)))}),a(c,e,r,n,i,d||o)}))},t.fn.off=function(e,i,n){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,i,e)}),r):(m(i)||f(n)||n===!1||(n=i,i=h),n===!1&&(n=T),r.each(function(){l(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):d(e),e._args=i,this.each(function(){e.type in w&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var r,s;return this.each(function(o,a){r=u(m(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(t,e){if(s=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),d(i)}}(t),function(t){function e(e,i,n){var r=t.Event(i);return t(e).trigger(r,n),!r.isDefaultPrevented()}function i(t,i,n,r){if(t.global)return e(i||y,n,r)}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function s(t,e){var n=e.context;return e.beforeSend.call(n,t,e)!==!1&&i(e,n,"ajaxBeforeSend",[t,e])!==!1&&void i(e,n,"ajaxSend",[t,e])}function o(t,e,n,r){var s=n.context,o="success";n.success.call(s,t,o,e),r&&r.resolveWith(s,[t,o,e]),i(n,s,"ajaxSuccess",[e,n,t]),l(o,e,n)}function a(t,e,n,r,s){var o=r.context;r.error.call(o,n,e,t),s&&s.rejectWith(o,[n,e,t]),i(r,o,"ajaxError",[n,r,t||e]),l(e,n,r)}function l(t,e,n){var s=n.context;n.complete.call(s,e,t),i(n,s,"ajaxComplete",[e,n]),r(n)}function d(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==E?"html":t==T?"json":b.test(t)?"script":_.test(t)&&"xml")||"text"}function h(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function c(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data),e.data=void 0)}function p(e,i,n,r){return t.isFunction(i)&&(r=n,n=i,i=void 0),t.isFunction(n)||(r=n,n=void 0),{url:e,data:i,success:n,dataType:r}}function f(e,i,n,r){var s,o=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,l){s=t.type(l),r&&(i=n?r:r+"["+(a||"object"==s||"array"==s?i:"")+"]"),!r&&o?e.add(l.name,l.value):"array"==s||!n&&"object"==s?f(e,l,n,i):e.add(i,l)})}var m,g,v=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,_=/^(?:text|application)\/xml/i,T="application/json",E="text/html",A=/^\s*$/,x=y.createElement("a");x.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,r,l=e.jsonpCallback,d=(t.isFunction(l)?l():l)||"jsonp"+ ++v,u=y.createElement("script"),h=window[d],c=function(e){t(u).triggerHandler("error",e||"abort")},p={abort:c};return i&&i.promise(p),t(u).on("load error",function(s,l){clearTimeout(r),t(u).off().remove(),"error"!=s.type&&n?o(n[0],p,e,i):a(null,l||"error",p,e,i),window[d]=h,n&&t.isFunction(h)&&h(n[0]),h=n=void 0}),s(p,e)===!1?(c("abort"),p):(window[d]=function(){n=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+d),y.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){c("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i,r=t.extend({},e||{}),l=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===r[m]&&(r[m]=t.ajaxSettings[m]);n(r),r.crossDomain||(i=y.createElement("a"),i.href=r.url,i.href=i.href,r.crossDomain=x.protocol+"//"+x.host!=i.protocol+"//"+i.host),r.url||(r.url=window.location.toString()),c(r);var p=r.dataType,f=/\?.+=\?/.test(r.url);if(f&&(p="jsonp"),r.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(r.url=h(r.url,"_="+Date.now())),"jsonp"==p)return f||(r.url=h(r.url,r.jsonp?r.jsonp+"=?":r.jsonp===!1?"":"callback=?")),t.ajaxJSONP(r,l);var v,w=r.accepts[p],b={},_=function(t,e){b[t.toLowerCase()]=[t,e]},T=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,E=r.xhr(),C=E.setRequestHeader;if(l&&l.promise(E),r.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",w||"*/*"),(w=r.mimeType||w)&&(w.indexOf(",")>-1&&(w=w.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(w)),(r.contentType||r.contentType!==!1&&r.data&&"GET"!=r.type.toUpperCase())&&_("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(g in r.headers)_(g,r.headers[g]);if(E.setRequestHeader=_,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=d,clearTimeout(v);var e,i=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==T){p=p||u(r.mimeType||E.getResponseHeader("content-type")),e=E.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=E.responseXML:"json"==p&&(e=A.test(e)?null:t.parseJSON(e))}catch(t){i=t}i?a(i,"parsererror",E,r,l):o(e,E,r,l)}else a(E.statusText||null,E.status?"error":"abort",E,r,l)}},s(E,r)===!1)return E.abort(),a(null,"abort",E,r,l),E;if(r.xhrFields)for(g in r.xhrFields)E[g]=r.xhrFields[g];var P=!("async"in r)||r.async;E.open(r.type,r.url,P,r.username,r.password);for(g in b)C.apply(E,b[g]);return r.timeout>0&&(v=setTimeout(function(){E.onreadystatechange=d,E.abort(),a(null,"timeout",E,r,l)},r.timeout)),E.send(r.data?r.data:null),E},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var r,s=this,o=e.split(/\s/),a=p(e,i,n),l=a.success;return o.length>1&&(a.url=o[0],r=o[1]),a.success=function(e){s.html(r?t("<div>").html(e.replace(w,"")).find(r):e),l&&l.apply(s,arguments)},t.ajax(a),this};var C=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(C(e)+"="+C(i))},f(n,e,i),n.join("&").replace(/%20/g,"+")}}(t),function(t){t.fn.serializeArray=function(){var e,i,n=[],r=function t(i){return i.forEach?i.forEach(t):void n.push({name:e,value:i})};return this[0]&&t.each(this[0].elements,function(n,s){i=s.type,e=s.name,e&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||s.checked)&&r(t(s).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(t){return null}}}}(t),e}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(8),s=n(r),o=i(10),a=n(o),l=i(11),d=n(l),u=i(12),h=n(u),c=i(13),p=n(c),f=i(14),m=n(f),g=i(15),v=n(g),y=i(16),w=n(y),b=i(17),_=n(b),T=i(18),E=n(T),A=i(19),x=n(A),C=i(20),P=n(C),I=i(6),k=n(I);t.exports=k.default.extend(!0,{},s.default,a.default,d.default,h.default,p.default,m.default,v.default,w.default,_.default,E.default,x.default,P.default)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r);t.exports={"300X600":{desktop:s.default,mobile:s.default}}},function(t,e){"use strict";t.exports={level:{2:{noaop:2,"player.settings.max_ready_vpaid":3,"player.settings.queue_size":4,secondsBW:20},3:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20},4:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r);t.exports={CUSTOM:{desktop:s.default,mobile:s.default}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r);t.exports={EXPANDABLE:{desktop:s.default,mobile:s.default}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r);t.exports={INLINE_FEED:{desktop:{level:{2:{player:{settings:{mprdct:.0158}}},3:{player:{settings:{mprdct:.0158,mintimwf:7e3}},noaop:1},4:{noaop:1,player:{settings:{mprdct:.0227,mintimwf:1e4}}},5:{isMultiAd:!1},6:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0227,mintimwf:1e4}}}}},mobile:s.default}}},function(t,e){"use strict";t.exports={INLINE_INSTREAM_NEW_SINGLE:{desktop:{level:{2:{player:{settings:{mprdct:.0193}}},3:{player:{settings:{mprdct:.0193,mintimwf:7e3}},noaop:1},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0289,mintimwf:1e4}}},5:{isMultiAd:!1},6:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0289,mintimwf:1e4}}}}},mobile:{level:{2:{player:{settings:{mprdct:.0141}}},3:{player:{settings:{mprdct:.0141,mintimwf:7e3}},noaop:1},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0185,mintimwf:1e4}}},5:{isMultiAd:!1,noaop:1,player:{settings:{mintimwf:7e3}}},6:{pubId:208401,pubTagId:1047981,isMultiAd:!1,noaop:1,player:{settings:{mprdct:.0185,mintimwf:1e4}}}}}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r),o=i(6),a=n(o);t.exports={INLINE_INSTREAM_OLD_VFORCE:{desktop:a.default.extend(!0,{},s.default,{level:{2:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{onOutOfView:"pause",playerEndSeconds:120}}}),mobile:a.default.extend(!0,{},s.default,{level:{2:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{onOutOfView:"pause",playerEndSeconds:120}}})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r),o=i(6),a=n(o);t.exports={INLINE_INSTREAM_SINGLE_NEW:{desktop:a.default.extend(!0,{},s.default,{level:{2:{player:{settings:{mprdct:.0193}},onOutOfView:"pause","player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{player:{settings:{mprdct:.0193,mintimwf:7e3}},noaop:1,onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0289,mintimwf:1e4}},onOutOfView:"pause",playerEndSeconds:120}}}),mobile:a.default.extend(!0,{},s.default,{level:{2:{"player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17,player:{settings:{mprdct:.0141}}},3:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240,player:{settings:{mprdct:.0141,mintimwf:7e3}},noaop:1},4:{playerEndSeconds:120,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0185,mintimwf:1e4}}}}})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r),o=i(6),a=n(o);t.exports={INLINE_INSTREAM_SINGLE_OLD:{desktop:a.default.extend(!0,{},s.default,{level:{2:{player:{settings:{mprdct:.0193}},onOutOfView:"pause","player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{player:{settings:{mprdct:.0193,mintimwf:7e3}},noaop:1,onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0289,mintimwf:1e4}},onOutOfView:"pause",playerEndSeconds:120}}}),mobile:a.default.extend(!0,{},s.default,{level:{2:{"player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17,player:{settings:{mprdct:.0141}}},3:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240,player:{settings:{mprdct:.0141,mintimwf:7e3}},noaop:1},4:{playerEndSeconds:120,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0185,mintimwf:1e4}}}}})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r),o=i(6),a=n(o);t.exports={INLINE_INSTREAM_VIEWABILITY_EXPAND:{desktop:a.default.extend(!0,{},s.default,{level:{2:{"player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{playerEndSeconds:120}}}),mobile:a.default.extend(!0,{},s.default,{level:{2:{"player.settings.max_ready_vpaid":2,"player.settings.queue_size":6,secondsBW:17},3:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240},4:{playerEndSeconds:120}}})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r),o=i(6),a=n(o);t.exports={SLIDER_INSTREAM:{desktop:a.default.extend(!0,{},s.default,{level:{2:{player:{settings:{mprdct:.0199}}},3:{noaop:1,player:{settings:{mprdct:.0199,mintimwf:7e3}}},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0344,mintimwf:1e4}}}}}),mobile:a.default.extend(!0,{},s.default,{level:{2:{player:{settings:{mprdct:.021}}},3:{noaop:1,player:{settings:{mprdct:.021,mintimwf:7e3}}},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0299,mintimwf:1e4}}}}})}}},function(t,e){"use strict";t.exports={SLIDER_OUTSTREAM:{desktop:{level:{2:{player:{settings:{mprdct:.021}}},3:{noaop:1,player:{settings:{mprdct:.021,mintimwf:7e3}}},4:{pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0299,mintimwf:1e4}}}}},mobile:{level:{2:{player:{settings:{mprdct:.021}}},3:{noaop:1,player:{settings:{mprdct:.0199,mintimwf:7e3}}},4:{pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0344,mintimwf:1e4}}}}}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(9),s=n(r);t.exports={WIDGET_ITEM:{desktop:{level:{2:{player:{settings:{mprdct:.0182}}},3:{player:{settings:{mprdct:.0158,mintimwf:7e3}},noaop:1},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0258,mintimwf:1e4}}},5:{isMultiAd:!1},6:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0258,mintimwf:1e4}}}}},mobile:s.default}}},function(t,e){},,function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var s=i(2),o=r(s),a=i(24),l=r(a),d=i(6),u=r(d),h=i(25),c=n(h);o.default.mixin({parseBool:function(t){return"true"===t||t===!0},hasFlash:function(){function t(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return!1}}return"undefined"==typeof navigator.plugins||0==navigator.plugins.length?t():!!navigator.plugins["Shockwave Flash"]},el:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(t);for(var n in e)null!=e[n]&&(i[n]=e[n]);return i},loadJs:function(t,e){return document.head.appendChild(o.default.el("script",{src:t,onload:e}))},loadCss:function(t,e){return document.head.appendChild(o.default.el("link",{href:t,onload:e,rel:"stylesheet",type:"text/css"}))},loadJsArr:function(t,e){function i(){n--,0===n&&e()}var n;e&&(n=t.length);for(var r=0;r<t.length;r++)t[r].indexOf(".css")>-1?o.default.loadCss(t[r],i):o.default.loadJs(t[r],i)},getUrlVars:function(t){t=t||window;for(var e,i=[],n=t.location.href.slice(t.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)e=n[r].split("="),i.push(e[0]),i[e[0]]=e[1];return i},firePixelConditional:function(t,e,i,n){t&&o.default.firePixel(e,i,n)},firePixel:function(t,e,i){if(t){i&&(t=o.default.addParametersToUrl(t,i,t.indexOf("?")===-1)),cmTag.logger.pixel("firing pixel: "+e+" url: "+t);var n=document.createElement("IMG");n.src=t}},fireIframePixel:function(t,e){if(!t)return void cmTag.logger.pixel("fireIframePixel","Url empty.");cmTag.logger.pixel("firing pixel: "+e+" url: "+t);var i=document.createElement("iframe");i.src=t,i.style.display="none";var n=document.getElementsByTagName("body")[0];n||(n=document.getElementsByTagName("html")[0]),n||(n=document.getElementsByTagName("div")[0]),n?n.appendChild(i):cmTag.logger.debug("fireIframePixel","Failed to fire iframe pixel.")},getViewabilityPercent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.offsetWidth,n=t.getBoundingClientRect(),r={top:Math.max(0,n.top),bottom:Math.min(o.default.viewport().height,n.bottom),left:Math.max(0,n.left),right:Math.min(o.default.viewport().width,n.right)};return 100*(r.bottom-r.top)*(r.right-r.left)/(e*i)},isVisible:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.offsetWidth,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;return o.default.getViewabilityPercent(t,e,i)>=n},viewport:function(){return{get height(){return o.default.viewport().object.document.documentElement.clientHeight},get width(){return o.default.viewport().object.document.documentElement.clientWidth},get object(){return top}}},getVideoHeight:function(t){var e=parseInt(9/16*t);return isNaN(e)?0:e},getVideoWidth:function(t){var e=parseInt(16/9*t);return isNaN(e)?0:e},getVideoBestSize:function(t,e){var i=this.getVideoHeight(t);return e>=i?e=i:t=this.getVideoWidth(e),{width:t,height:e}},isElementInHead:function(t){if(!t)return!1;for(;t!==document.body&&t!==document.head;)t=t.parentNode;return t===document.head},getViewPercent:function(t,e,i,n){var r=o.default.isEmpty(n)?(0,u.default)(this.getTopWindow()):(0,u.default)(n),s={top:0,left:0,right:r.width(),bottom:r.height()},a=Number(i)||0,l=Number(e)||0,d=t.getBoundingClientRect(),h={top:d.top,left:d.left};if(h.right=h.left+l,h.bottom=h.top+a,s.right<h.left||s.left>h.right||s.bottom<h.top||s.top>h.bottom)return!1;var c={top:Math.min(1,(h.bottom-s.top)/a),bottom:Math.min(1,(s.bottom-h.top)/a),left:Math.min(1,(h.right-s.left)/l),right:Math.min(1,(s.right-h.left)/l)},p=c.left*c.right*c.top*c.bottom*100;return p},isViewable:function(t,e,i,n,r){var s=o.default.getViewPercent(t,e,i,r);return!!s&&(n=n||100,s>=n)},getViewPercentageDeltas:function(t,e,i){var n=(0,u.default)(window),r={top:n.scrollTop(),left:n.scrollLeft()};r.right=r.left+n.width(),r.bottom=r.top+n.height();var s=Number(i)||0,o=Number(e)||0,a=(0,u.default)(t).offset();a.right=a.left+o,a.bottom=a.top+s;var l={top:Math.min(1,(a.bottom-r.top)/s),bottom:Math.min(1,(r.bottom-a.top)/s),left:Math.min(1,(a.right-r.left)/o),right:Math.min(1,(r.right-a.left)/o)};return l},getValidSelectorElements:function(t,e,i){var n=[];return e=e||100,i=i||0,t&&o.default.isArray(t)&&(n=o.default.filter(t,function(t){var n=t.getBoundingClientRect();return n.width>=e&&n.height>=i&&!o.default.has(l.default.INVALID_SELECTOR_TAG_NAMES,t.tagName);
})),n},stripObject:function(t,e){if(t){for(var i={},n=0;n<e.length;n++){var r=t[e[n]];void 0!=r&&(i[e[n]]=r)}return i}},getTopOfEl:function(t){if(t){var e=t,i=0,n=0;if(document.getElementById||document.all){do for(n+=t.offsetLeft-t.scrollLeft,i+=t.offsetTop-t.scrollTop,t=t.offsetParent,e=e.parentNode;e!=t;)n-=e.scrollLeft,i-=e.scrollTop,e=e.parentNode;while(t&&t.offsetParent)}else document.layers&&(i+=t.y,n+=t.x);return i}},getLeftOfEl:function(t){return window.pageXOffset+t.getBoundingClientRect().left},PrefixedEvent:function(t,e,i,n){var r=["webkit","moz","MS","o",""];i=i.toLowerCase(),o.default.each(r,function(r){t[e](r+i,n)})},oneAnimationEnd:function(t,e){var i=o.default.debounce(e,200);this.PrefixedEvent(t,"one","transitionend",i),this.PrefixedEvent(t,"one","animationend",i)},addParametersToUrl:function(t,e,i){var n=t;return i&&(n+="?"),u.default.each(e,function(t,e){void 0!==e&&""!==e&&(n+=t+"="+e+"&")}),n},skipTransitionCss:function(t,e){t.addClass("none-transition"),t.css(e),this.flushCss(t[0]),t.removeClass("none-transition")},flushCss:function(t){t.offsetHeight},getTopWindow:function(){var t=window;try{for(;t.document!==t.top.document;)t=t.top;return t}catch(t){return window}},isInIframe:function(t){return t.inIframe||t.inDFP},isInFriendlyIframe:function(t){return!!t&&(this.isInIframe(t)&&t.isFriendlyIframe)},hideDFPIframe:function(t){if(this.isInFriendlyIframe(t)){t.iframe.style.display="none";for(var e=t.iframe.parentNode;o.default.some(l.default.DFP_KEYWORDS,function(t){return e.id.indexOf(t)!==-1});)e.style.display="none",e=e.parentNode}},onceDocReady:function(t){return/complete|loaded|interactive/.test(document.readyState)&&document.body?t():(0,u.default)("document").one("DOMContentLoaded",t),this},crc32:function(t){if(!t||"string"!=typeof t)return 0;var e;t=this.utf8Encode(t);var i="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";"undefined"==typeof e&&(e=0);var n=0,r=0;e^=-1;for(var s=0,o=t.length;s<o;s++)r=255&(e^t.charCodeAt(s)),n="0x"+i.substr(9*r,8),e=e>>>8^n;return e^-1},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},isMouseOver:function(t){return 0!==t.filter(":hover").length},rollNumbers:function(t){return!!t&&100*Math.random()<t},isFactor:function(t){return o.default.isNumber(t)&&t===o.default.random(1,t)},sendMail:function(t,e,i){function n(){emailjs.init("user_kHlYxxusLRTxC6yr3PjQl"),emailjs.send("gmail","units_support",t).then(e,i)}e=e||function(){},i=i||function(){},window.emailjs?n():o.default.loadJs("//cdn.emailjs.com/dist/email.min.js",n)},isValidEmail:function(t){return!0},hasAutoPlay:function(){var t=c.UAParser(window.navigator.userAgent);return!("iOS"===t.os.name&&parseInt(t.os.version)<10||"Android"===t.os.name&&"Chrome"===t.browser.name&&parseInt(t.browser.version)<53)},toCssObj:function(t){return"string"==typeof t?JSON.parse(t):t},isLayerVisible:function(t){function e(t,r,s,o,a,l,d){var u=t.parentNode,h=2;return!!n(t)&&(9===u.nodeType||"0"!==i(t,"opacity")&&"none"!==i(t,"display")&&"hidden"!==i(t,"visibility")&&("undefined"!=typeof r&&"undefined"!=typeof s&&"undefined"!=typeof o&&"undefined"!=typeof a&&"undefined"!=typeof l&&"undefined"!=typeof d||(r=t.offsetTop,a=t.offsetLeft,o=r+t.offsetHeight,s=a+t.offsetWidth,l=t.offsetWidth,d=t.offsetHeight),!u||("hidden"!==i(u,"overflow")&&"scroll"!==i(u,"overflow")||!(a+h>u.offsetWidth+u.scrollLeft||a+l-h<u.scrollLeft||r+h>u.offsetHeight+u.scrollTop||r+d-h<u.scrollTop))&&(t.offsetParent===u&&(a+=u.offsetLeft,r+=u.offsetTop),e(u,r,s,o,a,l,d))))}function i(t,e){return window.getComputedStyle?document.defaultView.getComputedStyle(t,null)[e]:t.currentStyle?t.currentStyle[e]:void 0}function n(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}return e(t)},getOffset:function(t,e){if(t&&Array.isArray(t)&&t[0]&&(t=t[0]),t){if(1===e)return(0,u.default)(t).offset();var i=t,n=t,r=0,s=0;if(document.getElementById||document.all){do for(s+=t.offsetLeft-t.scrollLeft,r+=t.offsetTop-t.scrollTop,t=t.offsetParent,n=n.parentNode;n!=t;)s-=n.scrollLeft,r-=n.scrollTop,n=n.parentNode;while(t.offsetParent)}else document.layers&&(r+=t.y,s+=t.x);return{top:r,left:(0,u.default)(i).offset().left||s}}},flatten:function(t){var e={};for(var i in t)e[i]=t[i];return e},cssObjToString:function(t){var e=!!document.documentMode,i=!e&&!!window.StyleMedia,n=window.navigator.userAgent.indexOf("Firefox")>-1;return(e||i||n)&&(t=this.flatten(t)),JSON.stringify(t)}})},function(t,e){"use strict";t.exports={UNIT_TYPES:{INLINE:0,INTERSTITIAL:1,SLIDER_OUTSTREAM:2,SLIDER_INSTREAM:3,EXPANDABLE:4,"300X600":5,INLINE_FEED:6,COFFEEBREAK:7,SLIDESHOW:8,INLINE_INSTREAM:9,COFFEEBREAK_MOBILE:10,"300X600_MOBILE":11,INLINE_MOBILE:12,INTERSTITIAL_MOBILE:14,SLIDER_OUTSTREAM_MOBILE:15,SLIDER_INSTREAM_MOBILE:16,EXPANDABLE_MOBILE:17,INLINE_INSTREAM_MOBILE:18,INLINE_OUT_OF_VIEW:19,INLINE_OUT_OF_VIEW_MOBILE:20,INLINE_VIEWABILITY_EXPAND:21,INLINE_VIEWABILITY_EXPAND_MOBILE:22,INLINE_INSTREAM_VIEWABILITY_EXPAND:23,INLINE_INSTREAM_VIEWABILITY_EXPAND_MOBILE:24},STREAM_TYPES:{IN_STREAM:1,OUT_STREAM:0},UNITS_STREAM_TYPE:{INLINE:0,INTERSTITIAL:0,SLIDER_OUTSTREAM:0,SLIDER_INSTREAM:1,EXPANDABLE:1,"300X600":1,OMNI_TAG:0},APPEND_TYPE:{BEFORE_BEGIN:0,AFTER_BEGIN:1,BEFORE_END:2,AFTER_END:3,beforebegin:0,afterbegin:1,beforeend:2,afterend:3},INVALID_SELECTOR_TAG_NAMES:{IMG:0,UL:1,BUTTON:3,INPUT:4,LABEL:5},OMNI_TAG_UNIT_NAMES:{rightrail1:1,rightrail2:2,rightrail3:3,inlineTop:4,inlineMiddle:5,inlineBottom:6,interstitial:7,sliderOutstream1:8,sliderOutstream2:9,sliderInstream1:10,sliderInstream2:11,coffeeBreak:12,expandable1:13,expandable2:14,expandable3:15,invalidUnitName:1e3},ROLL_TYPE:{preroll:0,"pre-roll":0,midroll:-1,"mid-roll":-1,postroll:-2,"post-roll":-2},TAB_STATE:{focus:0,blur:1,tabOut:2},DFP_KEYWORDS:["google","dfp","gpt"],MIME_TYPES:{1:"video/mp4",5:"video/webm",7:"video/ogg",10:"video/mp4",11:"video/ogg",12:"video/webm"}}},function(t,e,i){var n;!function(r,s){"use strict";var o="0.7.14",a="",l="?",d="function",u="undefined",h="object",c="string",p="major",f="model",m="name",g="type",v="vendor",y="version",w="architecture",b="console",_="mobile",T="tablet",E="smarttv",A="wearable",x="embedded",C={extend:function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2===0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},has:function(t,e){return"string"==typeof t&&e.toLowerCase().indexOf(t.toLowerCase())!==-1},lowerize:function(t){return t.toLowerCase()},major:function(t){return typeof t===c?t.replace(/[^\d\.]/g,"").split(".")[0]:s},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},P={rgx:function(t,e){for(var i,n,r,o,a,l,u=0;u<e.length&&!a;){var c=e[u],p=e[u+1];for(i=n=0;i<c.length&&!a;)if(a=c[i++].exec(t))for(r=0;r<p.length;r++)l=a[++n],o=p[r],typeof o===h&&o.length>0?2==o.length?typeof o[1]==d?this[o[0]]=o[1].call(this,l):this[o[0]]=o[1]:3==o.length?typeof o[1]!==d||o[1].exec&&o[1].test?this[o[0]]=l?l.replace(o[1],o[2]):s:this[o[0]]=l?o[1].call(this,l,o[2]):s:4==o.length&&(this[o[0]]=l?o[3].call(this,l.replace(o[1],o[2])):s):this[o]=l?l:s;u+=2}},str:function(t,e){for(var i in e)if(typeof e[i]===h&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(C.has(e[i][n],t))return i===l?s:i}else if(C.has(e[i],t))return i===l?s:i;return t}},I={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[m,y],[/(opios)[\/\s]+([\w\.]+)/i],[[m,"Opera Mini"],y],[/\s(opr)\/([\w\.]+)/i],[[m,"Opera"],y],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[m,y],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[m,"IE"],y],[/(edge)\/((\d+)?[\w\.]+)/i],[m,y],[/(yabrowser)\/([\w\.]+)/i],[[m,"Yandex"],y],[/(puffin)\/([\w\.]+)/i],[[m,"Puffin"],y],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[m,"UCBrowser"],y],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],y],[/(micromessenger)\/([\w\.]+)/i],[[m,"WeChat"],y],[/(QQ)\/([\d\.]+)/i],[m,y],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[m,y],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[y,[m,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[y,[m,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[y,[m,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[m,/(.+)/,"$1 WebView"],y],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[m,/(.+(?:g|us))(.+)/,"$1 $2"],y],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[y,[m,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[m,y],[/(dolfin)\/([\w\.]+)/i],[[m,"Dolphin"],y],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[m,"Chrome"],y],[/(coast)\/([\w\.]+)/i],[[m,"Opera Coast"],y],[/fxios\/([\w\.-]+)/i],[y,[m,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[y,[m,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[y,m],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[m,[y,P.str,I.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[m,y],[/(navigator|netscape)\/([\w\.-]+)/i],[[m,"Netscape"],y],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[m,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,C.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[w,/ower/,"",C.lowerize]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[w,C.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,v,[g,T]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[v,"Apple"],[g,T]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[v,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,f,[g,T]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[v,"Amazon"],[g,T]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,P.str,I.device.amazon.model],[v,"Amazon"],[g,_]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,v,[g,_]],[/\((ip[honed|\s\w*]+);/i],[f,[v,"Apple"],[g,_]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,f,[g,_]],[/\(bb10;\s(\w+)/i],[f,[v,"BlackBerry"],[g,_]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[f,[v,"Asus"],[g,T]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[f,"Xperia Tablet"],[g,T]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[f,[v,"Sony"],[g,_]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,f,[g,b]],[/android.+;\s(shield)\sbuild/i],[f,[v,"Nvidia"],[g,b]],[/(playstation\s[34portablevi]+)/i],[f,[v,"Sony"],[g,b]],[/(sprint\s(\w+))/i],[[v,P.str,I.device.sprint.vendor],[f,P.str,I.device.sprint.model],[g,_]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[v,f,[g,T]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[v,[f,/_/g," "],[g,_]],[/(nexus\s9)/i],[f,[v,"HTC"],[g,T]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[f,[v,"Huawei"],[g,_]],[/(microsoft);\s(lumia[\s\w]+)/i],[v,f,[g,_]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[v,"Microsoft"],[g,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,"Microsoft"],[g,_]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[f,[v,"Motorola"],[g,_]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[v,"Motorola"],[g,T]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[v,C.trim],[f,C.trim],[g,E]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,"Samsung"],[g,E]],[/\(dtv[\);].+(aquos)/i],[f,[v,"Sharp"],[g,E]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],f,[g,T]],[/smart-tv.+(samsung)/i],[v,[g,E],f],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[v,"Samsung"],f,[g,_]],[/sie-(\w+)*/i],[f,[v,"Siemens"],[g,_]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[v,"Nokia"],f,[g,_]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[v,"Acer"],[g,T]],[/android.+([vl]k\-?\d{3})\s+build/i],[f,[v,"LG"],[g,T]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],f,[g,T]],[/(lg) netcast\.tv/i],[v,f,[g,E]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[f,[v,"LG"],[g,_]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[v,"Lenovo"],[g,T]],[/linux;.+((jolla));/i],[v,f,[g,_]],[/((pebble))app\/[\d\.]+\s/i],[v,f,[g,A]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[v,f,[g,_]],[/crkey/i],[[f,"Chromecast"],[v,"Google"]],[/android.+;\s(glass)\s\d/i],[f,[v,"Google"],[g,A]],[/android.+;\s(pixel c)\s/i],[f,[v,"Google"],[g,T]],[/android.+;\s(pixel xl|pixel)\s/i],[f,[v,"Google"],[g,_]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[v,"Xiaomi"],[g,_]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[f,[v,"Meizu"],[g,T]],[/android.+a000(1)\s+build/i],[f,[v,"OnePlus"],[g,_]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[f,[v,"RCA"],[g,T]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[f,[v,"Dell"],[g,T]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[f,[v,"Verizon"],[g,T]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[v,"Barnes & Noble"],f,[g,T]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[f,[v,"NuVision"],[g,T]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[v,"ZTE"],f,[g,T]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[f,[v,"Swiss"],[g,_]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[f,[v,"Swiss"],[g,T]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[f,[v,"Zeki"],[g,T]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[v,"Dragon Touch"],f,[g,T]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[f,[v,"Insignia"],[g,T]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[f,[v,"NextBook"],[g,T]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[v,"Voice"],f,[g,_]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[v,"LvTel"],f,[g,_]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[f,[v,"Envizen"],[g,T]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[v,f,[g,T]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[f,[v,"MachSpeed"],[g,T]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[v,f,[g,T]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[f,[v,"Rotor"],[g,T]],[/android.+(KS(.+))\s+build/i],[f,[v,"Amazon"],[g,T]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[v,f,[g,T]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[g,C.lowerize],v,f],[/(android.+)[;\/].+build/i],[f,[v,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[y,[m,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[m,y],[/rv\:([\w\.]+).*(gecko)/i],[y,m]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[m,y],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[m,[y,P.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[m,"Windows"],[y,P.str,I.os.windows.version]],[/\((bb)(10);/i],[[m,"BlackBerry"],y],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[m,y],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[m,"Symbian"],y],[/\((series40);/i],[m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[m,"Firefox OS"],y],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[m,y],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[m,"Chromium OS"],y],[/(sunos)\s?([\w\.]+\d)*/i],[[m,"Solaris"],y],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[m,y],[/(haiku)\s(\w+)/i],[m,y],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[y,/_/g,"."],[m,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[m,"Mac OS"],[y,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[m,y]]},S=function(t,e){this[m]=t,this[y]=e},D=function(t){this[w]=t},B=function(t,e,i){this[v]=t,this[f]=e,this[g]=i},V=S,F=S,O=function(t,e){if("object"==typeof t&&(e=t,t=s),!(this instanceof O))return new O(t,e).getResult();var i=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:a),n=e?C.extend(k,e):k,o=new S,l=new D,d=new B,u=new V,h=new F;return this.getBrowser=function(){return P.rgx.call(o,i,n.browser),o.major=C.major(o.version),o},this.getCPU=function(){return P.rgx.call(l,i,n.cpu),l},this.getDevice=function(){return P.rgx.call(d,i,n.device),d},this.getEngine=function(){return P.rgx.call(u,i,n.engine),u},this.getOS=function(){return P.rgx.call(h,i,n.os),h},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=t,o=new S,l=new D,d=new B,u=new V,h=new F,this},this};O.VERSION=o,O.BROWSER={NAME:m,MAJOR:p,VERSION:y},O.CPU={ARCHITECTURE:w},O.DEVICE={MODEL:f,VENDOR:v,TYPE:g,CONSOLE:b,MOBILE:_,SMARTTV:E,TABLET:T,WEARABLE:A,EMBEDDED:x},O.ENGINE={NAME:m,VERSION:y},O.OS={NAME:m,VERSION:y},typeof e!==u?(typeof t!==u&&t.exports&&(e=t.exports=O),e.UAParser=O):"function"===d&&i(26)?(n=function(){return O}.call(e,i,e,t),!(n!==s&&(t.exports=n))):r&&(r.UAParser=O);var R=r&&(r.jQuery||r.Zepto);if(typeof R!==u){var N=new O;R.ua=N.getResult(),R.ua.get=function(){return N.getUA()},R.ua.set=function(t){N.setUA(t);var e=N.getResult();for(var i in e)R.ua[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){"use strict";var n=i(2);n.mixin({createVpaidLog:function(t,e){var i=null,r=t,s=t.model,o=Date.now(),a=!1,l=["conversion","soundViolation","timeout","bfRon","adPlayTimeout","vastFilterdByRegex","queExpierd","queTrimmed","tagError","tagFlashError","vpaidFlashClientError","queueTrimmed","tillAdstartTimeout","timeoutAutoKill","error_vpaidGeneralError","error_vpaidLoadError","error_vpaidLoadTimeout","error_vpaidInitAdError","error_vpaidInitAdTimeout","error_vpaidStartAdError","error_vpaidStartAdTimeout","error_vpaidPlayError","adStopped"],d={BfRon:!0};delete e.conversionPixels,e.dp=(e.lp&&e.lp.length>0?e.lp[0]:"").replace(/http:\/\/|.com|https:\/\/|.com/g,"")||"na";var u={tag:e,created:(new Date).toISOString(),dp:e.dp,status:"new",unitType:s.get("unitType")};u.connectionType=-1;var h=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(h){var c=h.type||-1;u.connectionType=c}u.hasFetch=Boolean(window.fetch),u.url=window.location.href,screen&&(u.screen={},u.screen.Size=screen.width+"X"+screen.height||-1,u.screen.PixelDepth=screen.pixelDepth||-1,u.screen.orientation=screen.orientation?screen.orientation.type:"not-found");var p=s.get("session_started")||Date.now(),f=function(t,e){var i=Math.floor(Math.random()*(e-t+1))+t;return i},m=function(){if(null!==i)return i;var t=parseInt(s.get("gaFactor"))||1e3;if(1===t)return i=!0;t>100&&(t=100);var e=s.get("abTest")||"";e&&(t=50);var n=f(0,t);return i=n===t},g=function(t,e){var i="error_";return i+=e.errType?e.errType:t},v=function(t,e){var i=r.version,n=s.get("abTest")||"",o=new XMLHttpRequest;o.open("POST","//bi.mikysrv.com/putes/mobileanalytics",!0);var a={event:t,timestamp:(new Date).toISOString(),version:i,abTest:n};a=Object.assign(a,e),o.send(JSON.stringify(a))},y=function(t,e){m()&&v(t,e)},w=function(){if(!a){var t=u.tag;a=!0,b(".tries"),"conversion"===u.status?(b(".conversions"),s.set(u.dp+".failsRow",0),s.set(t.lineItemId+".failsRow",0)):(b(".fails"),b(".failsRow"));var e=s.get(u.dp)||{fails:0,failsRow:0,conversions:0},i=Object.assign(s.get(t.lineItemId.toString()),{fails:0,failsRow:0,conversions:0});e.lineItems=e.lineItems||[],i.conversions=e.conversions=e.conversions||0,i.fails=e.fails=e.fails||0,i.failsRow=e.failsRow=e.failsRow||0,e.lineItems.indexOf(t.lineItemId)===-1&&e.lineItems.push(t.lineItemId),u.dpLog=e;var n=s.get("lineItems")||[];n.indexOf(t.lineItemId)===-1&&(n.push(t.lineItemId),s.set("lineItems",n)),s.set(t.lineItemId,i)}},b=function(t){var e=s.get(u.dp+t)||0,i=s.get(u.tag.lineItemId+t)||0;s.set(u.dp+t,e+1),s.set(u.tag.lineItemId+t,i+1)};return{push:function(t,e){if(u){if(e=e||{},t.indexOf("Error")>-1||"event_SoundViolation"===t)u.status=g(t,e);else if(this.eventToStatus.hasOwnProperty(t)&&"conversion"!==u.status)u.status=this.eventToStatus[t];else if(d.hasOwnProperty(t)){var i="is"+t;u[i]=!0}var n=Date.now()-p,r=Date.now()-o;if(e.time=r,e.globalTime=n,u.hasOwnProperty(t))return Array.isArray(!u[t])||(u[t]=[u[t]]),void u[t].push(e);u[t]=e,l.indexOf(u.status)!==-1&&w()}},saveToDb:function(){if(u){var t;try{t=n.getLoopTime()}catch(t){}t&&(u.loopTime=t),y("VpaidLog",u),e=null,u=null}},eventToStatus:{event_AdImpression:"conversion",event_SoundViolation:"soundViolation",vpaidGeneralError:"vpaidGeneralError",vpaidLoadError:"vpaidLoadError",vpaidLoadTimeout:"vpaidLoadTimeoutError",vpaidInitAdError:"vpaidInitAdError",vpaidInitAdTimeout:"vpaidInitAdTimeoutError",vpaidStartAdError:"vpaidStartAdError",vpaidStartAdTimeout:"vpaidStartAdTimeoutError",vpaidPlayError:"vpaidPlayError",event_AdLoaded:"adLoaded",fetchVast:"fetchVast",adStopped:"adStopped"}}}})},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=!1;!function(t,n){if(t||(t={}),t.Backbone||(t.Backbone={}),"function"==typeof r&&r.amd)r(["underscore","jquery","exports"],function(e,i,r){t.Backbone=n(t,r,e,i)});else{var s=i(2);n(t,e,s)}}(void 0,function(t,e,i,r){var s=t.Backbone,o=[],a=(o.push,o.slice);o.splice;e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function t(e,n,r){if(!u(this,"once",e,[n,r])||!n)return this;var s=this,t=i.once(function(){s.off(e,t),n.apply(this,arguments)});return t._callback=n,this.on(e,t,r)},off:function(t,e,n){var r,s,o,a,l,d,h,c;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,d=a.length;l<d;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=r=[],e||n)for(h=0,c=o.length;h<c;h++)s=o[h],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var o=!e&&!r;r||"object"!==("undefined"==typeof e?"undefined":n(e))||(r=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,r,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},d=/\s+/,u=function(t,e,i,r){if(!i)return!0;if("object"===("undefined"==typeof i?"undefined":n(i))){for(var s in i)t[e].apply(t,[s,i[s]].concat(r));return!1}if(d.test(i)){for(var o=i.split(d),a=0,l=o.length;a<l;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},h=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},c={listenTo:"on",listenToOnce:"once"};i.each(c,function(t,e){l[e]=function(e,r,s){var o=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return o[a]=e,s||"object"!==("undefined"==typeof r?"undefined":n(r))||(s=this),e[t](r,s,this),this}}),l.bind=l.on,l.unbind=l.off,i.extend(e,l);var p=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var s,o,a,l,d,u,h,c;if(null==t)return this;if("object"===("undefined"==typeof t?"undefined":n(t))?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;a=r.unset,d=r.silent,l=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),c=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)e=o[s],i.isEqual(c[s],e)||l.push(s),i.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete c[s]:c[s]=e;if(!d){l.length&&(this._pending=r);for(var p=0,f=l.length;p<f;p++)this.trigger("change:"+l[p],this,c[l[p]],r)}if(u)return this;if(!d)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(r[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return!!e.set(e.parse(i,t),t)&&(n&&n(e,i,t),void e.trigger("sync",e,i,t))},M(this,t),this.sync("read",this,t)},save:function(t,e,r){var s,o,a,l=this.attributes;if(null==t||"object"===("undefined"==typeof t?"undefined":n(t))?(s=t,r=e):(s={})[t]=e,r=i.extend({validate:!0},r),s&&!r.wait){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;s&&r.wait&&(this.attributes=i.extend({},l,s)),void 0===r.parse&&(r.parse=!0);var d=this,u=r.success;return r.success=function(t){d.attributes=l;var e=d.parse(t,r);return r.wait&&(e=i.extend(s||{},e)),!(i.isObject(e)&&!d.set(e,r))&&(u&&u(d,t,r),void d.trigger("sync",d,t,r))},M(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=s),a=this.sync(o,this,r),s&&r.wait&&(this.attributes=l),a},destroy:function t(e){e=e?i.clone(e):{};var n=this,r=e.success,t=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(i){(e.wait||n.isNew())&&t(),r&&r(n,i,e),n.isNew()||n.trigger("sync",n,i,e)},this.isNew())return e.success(),!1;M(this,e);var s=this.sync("delete",this,e);return e.wait||t(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){
if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var m=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(m.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,s,o,a;for(r=0,s=t.length;r<s;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,s,o,a,l,d,u,h=e.at,c=this.model,f=this.comparator&&null==h&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],y=[],w={},b=e.add,_=e.merge,T=e.remove,E=!(f||!b||!T)&&[];for(r=0,s=t.length;r<s;r++){if(l=t[r]||{},o=l instanceof p?a=l:l[c.prototype.idAttribute||"id"],d=this.get(o))T&&(w[d.cid]=!0),_&&(l=l===a?a.attributes:l,e.parse&&(l=d.parse(l,e)),d.set(l,e),f&&!u&&d.hasChanged(m)&&(u=!0)),t[r]=d;else if(b){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=d||a,!E||!a.isNew()&&w[a.id]||E.push(a),w[a.id]=!0}if(T){for(r=0,s=this.length;r<s;++r)w[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||E&&E.length)if(f&&(u=!0),this.length+=v.length,null!=h)for(r=0,s=v.length;r<s;r++)this.models.splice(h+r,0,v[r]);else{E&&(this.models.length=0);var A=E||v;for(r=0,s=A.length;r<s;r++)this.models.push(A[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,s=v.length;r<s;r++)(a=v[r]).trigger("add",a,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(y,function(t){m.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var w=["groupBy","countBy","sortBy","indexBy"];i.each(w,function(t){m.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(_),s=r[1],o=r[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,n):this.$el.on(s,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var s=A[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=i.result(n,"url")||N()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&E&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(i.extend(o,r));return n.trigger("request",n,l,r),l};var E=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var x=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,I=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(x.prototype,l,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return e.history.route(t,function(i){var o=s._extractParameters(t,i);s.execute(r,o),s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(k,"\\$&").replace(C,"(?:$1)?").replace(P,function(t,e){return e?t:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var S=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,V=/msie [\w.]+/,F=/\/$/,O=/#.*$/;S.started=!1,i.extend(S.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(F,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(D,"")},start:function(t){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,s=V.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(B,"/"),s&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),S.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!S.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(O,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new S;var R=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};p.extend=m.extend=x.extend=b.extend=S.extend=R;var N=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e})},function(t,e,i){var n,r,s,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2),l=i(28);(function(){var t,e,i,n,r,s,o,d=[].slice;i=function(t){var e,n;return!a.isObject(t)||a.isFunction(t)?t:t instanceof l.Collection||t instanceof l.Model?t:a.isDate(t)?new Date(t.getTime()):a.isRegExp(t)?new RegExp(t.source,t.toString().replace(/.*\//,"")):t instanceof HTMLElement?t:t instanceof CSSStyleDeclaration?JSON.stringify(o(t)):(n=a.isArray(t||a.isArguments(t)),e=function(t,e,r){return n?t.push(i(e)):t[r]=i(e),t},a.reduce(t,e,n?[]:{}))},o=function(t){var e=!!document.documentMode,i=!e&&!!window.StyleMedia;if(!e&&!i)return t;var n={};for(var r in t)n[r]=t[r];return n},s=function(t){return null!=t&&((t.prototype==={}.prototype||t.prototype===Object.prototype)&&a.isObject(t)&&!a.isArray(t)&&!a.isFunction(t)&&!a.isDate(t)&&!a.isRegExp(t)&&!a.isArguments(t))},e=function(t){return a.filter(a.keys(t),function(e){return s(t[e])})},t=function(t){return a.filter(a.keys(t),function(e){return a.isArray(t[e])})},r=function(i,n,s){var o,l,d,u,h,c,p,f,m,g;if(null==s&&(s=20),s<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),a.extend(i,n);for(c=a.intersection(e(i),e(n)),l=function(t){return n[t]=r(i[t],n[t],s-1)},p=0,m=c.length;p<m;p++)h=c[p],l(h);for(u=a.intersection(t(i),t(n)),o=function(t){return n[t]=a.union(i[t],n[t])},f=0,g=u.length;f<g;f++)d=u[f],o(d);return a.extend(i,n)},n=function(){var t,e,n,s;if(n=2<=arguments.length?d.call(arguments,0,s=arguments.length-1):(s=0,[]),e=arguments[s++],a.isNumber(e)||(n.push(e),e=20),n.length<=1)return n[0];if(e<=0)return a.extend.apply(this,n);for(t=n.shift();n.length>0;)t=r(t,i(n.shift()),e);return t},a.mixin({deepClone:i,isBasicObject:s,basicObjects:e,arrays:t,deepExtend:n})}).call(void 0),function(o){r=[i(2),i(28)],n=o,s="function"==typeof n?n.apply(e,r):n,!(void 0!==s&&(t.exports=s))}(function(e,i){function n(t){var i={},r=u.keyPathSeparator;for(var s in t){var o=t[s];if(o&&o.constructor===Object&&!e.isEmpty(o)){var a=n(o);for(var l in a){var d=a[l];i[s+r+l]=d}}else i[s]=o}return i}function r(t,i,n){for(var r=u.keyPathSeparator,s=i.split(r),o=t,a=0,l=s.length;a<l;a++){if(n&&!e.has(o,s[a]))return!1;if(o=o[s[a]],null==o&&a<l-1&&(o={}),"undefined"==typeof o)return!!n||o}return!!n||o}function s(t,i,n,r){r=r||{};for(var s=u.keyPathSeparator,o=i.split(s),a=t,l=0,d=o.length;l<d&&void 0!==a;l++){var h=o[l];l===d-1?r.unset?delete a[h]:a[h]=n:("undefined"!=typeof a[h]&&e.isObject(a[h])||(a[h]={}),a=a[h])}}function a(t){var i={};return"object"!==("undefined"==typeof t?"undefined":o(t))?t:(e.each(t,function(t,e,n){i[e]=l(t)}),i)}function l(t){if(e.isArray(t)){var i=[];return e.each(t,function(t){i.push(l(t))}),i}return"object"!==("undefined"==typeof t?"undefined":o(t))||e.isElement(t)?"true"===t||t===!0||"false"!==t&&t!==!1&&(""===t?t:isNaN(t)?t:Number(t)):a(t)}function d(t,e){s(t,e,null,{unset:!0})}var u=i.Model.extend({constructor:function(t,i){var n,r=t||{};this.cid=e.uniqueId("c"),this.attributes={},i&&i.collection&&(this.collection=i.collection),i&&i.parse&&(r=this.parse(r,i)||{}),(n=e.result(this,"defaults"))&&(r=e.deepExtend({},n,r)),this.set(r,i),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(t){return e.deepClone(this.attributes)},get:function(t){return r(this.attributes,t)},set:function(t,i,l){var h,c,p,f,m,g,v,y;if(null==t)return this;if("object"===("undefined"==typeof t?"undefined":o(t))?(c=t,l=i||{}):(c={})[t]=i,c=a(c),l||(l={}),!this._validate(c,l))return!1;p=l.unset,m=l.silent,f=[],g=this._changing,this._changing=!0,g||(this._previousAttributes=e.deepClone(this.attributes),this.changed={}),y=this.attributes,v=this._previousAttributes,this.idAttribute in c&&(this.id=c[this.idAttribute]),c=n(c);for(h in c)i=c[h],e.isEqual(r(y,h),i)||f.push(h),e.isEqual(r(v,h),i)?d(this.changed,h):s(this.changed,h,i),p?d(y,h):s(y,h,i);if(!m){f.length&&(this._pending=!0);for(var w=u.keyPathSeparator,b=0,_=f.length;b<_;b++){var t=f[b];this.trigger("change:"+t,this,r(y,t),l);for(var T=t.split(w),E=T.length-1;E>0;E--){var A=e.first(T,E).join(w),x=A+w+"*";this.trigger("change:"+x,this,r(y,A),l)}}}if(g)return this;if(!m)for(;this._pending;)this._pending=!1,this.trigger("change",this,l);return this._pending=!1,this._changing=!1,this},clear:function(t){var i={},r=n(this.attributes);for(var s in r)i[s]=void 0;return this.set(i,e.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):void 0!==r(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n(this.changed);var i=this._changing?this._previousAttributes:this.attributes;t=n(t),i=n(i);var r,s=!1;for(var o in t)e.isEqual(i[o],r=t[o])||((s||(s={}))[o]=r);return s},previous:function(t){return null!=t&&this._previousAttributes?r(this._previousAttributes,t):null},previousAttributes:function(){return e.deepClone(this._previousAttributes)}});return u.keyPathSeparator=".",i.DeepModel=u,t.exports=u,i})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),a=n(o),l=i(6),d=n(l),u=i(28),h=n(u),c=i(24),p=n(c),f=function(){function t(e,i){r(this,t),this.window=e||window,this.$window=(0,d.default)(window),this.windowHeight=this.$window.height(),this.windowWidth=this.$window.width(),this.scrollSelector=a.default.isEmpty(i)?this.window:(0,d.default)(i)[0],this._timeBetweenEvents=100,this.keyPressMap={18:!1,16:!1,67:!1,77:!1},this._setScrollListener(),this._setMouseMoveListener(),this._setKeyPressListener(),this._setTabViewListener(),this._setOrientationChangeListener(),this._setResizeListener(),this._setTaboolaReadMoreListener()}return s(t,[{key:"_setScrollListener",value:function(){var t=a.default.throttle(this._trigger.bind(this,"window:scroll:change"),this._timeBetweenEvents);this.scrollSelector.addEventListener("scroll",t)}},{key:"_setMouseMoveListener",value:function(){var t=a.default.throttle(this._trigger.bind(this,"window:mouse:move"),this._timeBetweenEvents);this.window.addEventListener("mousemove",t)}},{key:"_setKeyPressListener",value:function(){var t=this;window.addEventListener("keyup",function(e){t._trigger.bind(t,"window:key:press"),e.keyCode in t.keyPressMap&&(t.keyPressMap[e.keyCode]=!1)}),this.window.addEventListener("keydown",function(e){e.keyCode in t.keyPressMap&&(t.keyPressMap[e.keyCode]=!0,t.keyPressMap[18]&&t.keyPressMap[16]&&t.keyPressMap[67]&&t.keyPressMap[77]&&(h.default.trigger("supportTool:event","open"),t.keyPressMap[18]=t.keyPressMap[16]=t.keyPressMap[67]=t.keyPressMap[77]=!1))})}},{key:"_setOrientationChangeListener",value:function(){var t=this,e=a.default.throttle(t._trigger.bind(t,"window:orientation:change"),this._timeBetweenEvents);window.addEventListener("orientationchange",e)}},{key:"_setResizeListener",value:function(){var t=this,e=a.default.throttle(t._handleResizeEvent.bind(t),this._timeBetweenEvents);window.addEventListener("resize",e)}},{key:"_setTabViewListener",value:function(){this.isTabOut=!1,this.window.document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),this.window.addEventListener("focus",this._handleTabEvents.bind(this),!0),this.window.addEventListener("blur",this._handleTabEvents.bind(this),!0)}},{key:"_handleResizeEvent",value:function(t){var e=this.$window.height(),i=e-this.windowHeight;this.windowHeight=e;var n=this.$window.width(),r=n-this.windowWidth;this.windowWidth=n,this._trigger("window:resize:change",{heightChange:i,widthChange:r})}},{key:"_handleVisibilityChange",value:function(t){this.isTabOut=!this.isTabOut,this._handleTabEvents(t)}},{key:"_handleTabEvents",value:function(t){this.isTabOut?this._trigger("window:tab:change",p.default.TAB_STATE.tabOut):"focus"===t.type?this._trigger("window:tab:change",p.default.TAB_STATE.focus):this._trigger("window:tab:change",p.default.TAB_STATE.blur)}},{key:"_trigger",value:function(t,e){h.default.trigger(t,e)}},{key:"_setTaboolaReadMoreListener",value:function(){window._taboola=window._taboola||[],_taboola.push({listenTo:"readmore.click",handler:function(){h.default&&h.default.trigger("taboola:readmore:click")}})}}]),t}(),m=function(){var t;return function(e,i){return t||(t=new f(e,i)),t}}();t.exports=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),a=n(o),l={ALL:"ALL",P_VIDEO:"P_VIDEO",B_VIDEO:"B_VIDEO"},d=function(){function t(){r(this,t)}return s(t,[{key:"addUnit",value:function(t,e){a.default.isEmpty(window.cmTag.unitList)&&(window.cmTag.unitList={}),this.unitsList=window.cmTag.unitList||{},this.unitsList[t]=e,window.cmTag.unitList=this.unitsList,this._listenUnitsEvents(t)}},{key:"_listenUnitsEvents",value:function(t){var e=this.unitsList[t];e.on("change:generalPlayingUnitState",this._onPlayingChange.bind(this,t))}},{key:"_onPlayingChange",value:function(t,e,i){a.default.size(this.unitsList)>1&&(i===!0||i===!1)&&this._decidePlayOrPause()}},{key:"_findVideo",value:function(t,e){for(var i=a.default.sortBy(this.unitsList,function(t,e){return"CUSTOM"==t.get("unitType")}),n=0;n<i.length;n++){var r=i[n],s=r.get("redId"),o=null;switch(t){case l.ALL:o=!0;break;case l.P_VIDEO:o="CUSTOM"==this._getUnitType(s);break;case l.B_VIDEO:o="CUSTOM"!=this._getUnitType(s)}o&&e.bind(this,s)()}}},{key:"_decidePlayOrPause",value:function(){var t=this._countPlayingUnitsOnView();t.playingUnits>1&&t.eligibleUnits>1?this._decidePause():0==t.playingUnits&&t.eligibleUnits>0&&this._decidePlay()}},{key:"_decidePause",value:function(){this._findVideo(l.P_VIDEO,function(t){this._isUnitEligibleToPlay(t)&&this._isUnitPlaying(t)&&this._pauseUnit(t)})}},{key:"_decidePlay",value:function(){this._findVideo(l.P_VIDEO,function(t){this._isUnitEligibleToPlay(t)&&!this._isUnitPlaying(t)&&this._playUnit(t)}),this._playOutOfView()}},{key:"_playOutOfView",value:function(){var t=null;this._findVideo(l.B_VIDEO,function(e){null===t&&(t=!this._isUnitPlaying(e)&&this._isUnitEligibleToPlay(e))}),t&&this._findVideo(l.P_VIDEO,function(t){this._playUnit(t)})}},{key:"_pauseUnit",value:function(t){this.unitsList[t].set("multiUnitManager.state","pause")}},{key:"_playUnit",value:function(t){this.unitsList[t].set("multiUnitManager.state","play")}},{key:"_countPlayingUnitsOnView",value:function(){var t=this,e=0,i=0;return a.default.each(this.unitsList,function(n){var r=n.get("redId");t._isUnitAllowToPlay(r)&&t._isUnitPlaying(r)&&e++,t._isUnitEligibleToPlay(r)&&i++}),{playingUnits:e,eligibleUnits:i}}},{key:"_isUnitEligibleToPlay",value:function(t){return this.unitsList[t].get("isEligibleToPlay")||this.unitsList[t].get("isUnitEligible")||this.unitsList[t].get("isUnitViewable")}},{key:"_isUnitAllowToPlay",value:function(t){return"pause"!=this.unitsList[t].get("multiUnitManager.state")&&this._isUnitEligibleToPlay(t)}},{key:"_isUnitPlaying",value:function(t){return this.unitsList[t].get("generalPlayingUnitState")}},{key:"_getUnitType",value:function(t){return this.unitsList[t].get("unitType")}}]),t}();cmTag.multiUnitManager=cmTag.multiUnitManager||new d,t.exports=cmTag.multiUnitManager},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(28),o=i(2),a=function(){function t(e){n(this,t),this.callBacks={},o.isFunction(e.onConversion)&&(this.callBacks.onConversion=e.onConversion,this._setEvenListeners(e))}return r(t,[{key:"_setEvenListeners",value:function(t){s.on("global:creativeEvent",this._onGlobalCreativeEvent.bind(this,t))}},{key:"_onGlobalCreativeEvent",value:function(t,e){e=e||{},"conversion"===e.type&&this.callBacks.onConversion&&this.callBacks.onConversion()}}]),t}();t.exports=a},function(t,e,i){"use strict";var n=i(28),r=i(2),s=i(6),o=(i(34),i(35));t.exports=n.View.extend({className:"_cm-panel",events:{"click ._cm-close-button":"_onCloseButtonClick","click ._cm-panel-submit":"_onSubmitButtonClick"},container:s("body"),ui:{},initialize:function(t){this.render(),this.ui.name=this.$("._cm-panel-name"),this.ui.email=this.$("._cm-panel-email"),this.ui.details=this.$("._cm-panel-details"),this.ui.success=this.$("._cm-panel-notifications-success"),this.ui.error=this.$("._cm-panel-notifications-error"),this._bindEvents()},render:function(){this.$el.append(o),this.container.append(this.el)},_bindEvents:function(){this.listenTo(this.model,"save:success",this._onSaveSuccess)},_onCloseButtonClick:function(){n.trigger("supportTool:event","close")},_onSubmitButtonClick:function(){var t=this._validateForm();t&&(this.model.set({name:this.ui.name.val(),email:this.ui.email.val(),details:this.ui.details.val()}),this.model.save())},_validateForm:function(){return this.ui.email.val()&&r.isValidEmail(this.ui.email.val())?(this.ui.email.removeClass("_cm-panel-error"),!0):(this.ui.email.addClass("_cm-panel-error"),!1)},_onSaveSuccess:function(){this.ui.success.show()}})},function(t,e){"use strict";function i(t){window.cmTag=window.cmTag||{},t=t||{},this.unitType=t.unitType,this.className=this.className||t.className}i.prototype.info=function(t,e){window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+t,e)},i.prototype.debug=function(t,e){window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+t,e)},i.prototype.error=function(t,e){window.cmTag.logger.error("unit type: "+this.unitType+" class name: "+this.className+" - "+t,e)},t.exports=i},function(t,e){t.exports="<div class=_cm-panel-heading> <strong> <span>ConvertMedia Support</span> </strong> <strong class=_cm-close-button>x</strong> </div> <div class=_cm-panel-body> <div class=_cm-panel-row> <label>Name:</label> <input type=text class=_cm-panel-name> </div> <div class=_cm-panel-row> <label>Email:</label> <input type=email class=_cm-panel-email> </div> <div class=_cm-panel-row> <label>Details:</label> <textarea class=_cm-panel-details></textarea> </div> <div class=_cm-panel-row> <input type=button class=_cm-panel-submit value=Send> </div> <div class=_cm-panel-notifications> <div class=_cm-panel-notifications-success>Thank you! Your message has been successfully sent. </div> <div class=_cm-panel-notifications-error>Error - Something went wrong... Your message was not sent. </div> </div> </div>"},function(t,e,i){"use strict";var n=i(28),r=i(6),s=i(2);t.exports=n.DeepModel.extend({initialize:function(t){var e=r.extend(!0,{},t.creativeData),i=r.extend(!0,{},t.unitModel);delete e.iframeData,delete e.placementElement,delete i.iframeData,delete i.placementElement,this.set("creativeData",JSON.stringify(e)),this.set("unitModel",JSON.stringify(i)),this.set({userAgent:window.navigator.userAgent,date:new Date,url:window.location.href}),this.set("vpaidLogs",JSON.stringify(t.vpaidLogs)),t.dp&&this.set("demandPartner",t.dp)},save:function(){s.sendMail(this.attributes,this._onSaveSuccess.bind(this),this._onSaveError.bind(this))},_onSaveSuccess:function(){this.trigger("save:success")},_onSaveError:function(){this.trigger("save:error")}})},function(t,e){"use strict";t.exports={player:void 0}},function(t,e,i){"use strict";t.exports={beforeCMTag:i(39)}},function(t,e,i){"use strict";var n=i(2),r=i(40),s=i(41),o={init:function(t){r.set("Function","bind"),r.set("Event","constructor",!0),r.set("Array","forEach",!1),r.set("Array","every",!1),new s,window.cmTag.customDataForTest={startWithABT:!1};var e=!!t.gaFactor&&n.isFactor(parseInt(t.gaFactor));e&&window.addEventListener("error",function(e){try{if(e.filename.indexOf("infra/cmTag")==-1)return;var i={timestamp:(new Date).toISOString(),message:e.message,lineNum:e.lineno,fullUrl:window.location.href,userAgent:window.navigator.userAgent,firedStartWithABT:window.cmTag.customDataForTest.startWithABT,unitType:t.unitType};e.error&&(i.callStack=e.error.stack);var n=new XMLHttpRequest;n.open("POST","//bi.mikysrv.com/putes/cm_units_error_logs",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=JSON.stringify(i);n.send(r)}catch(t){return}})}};t.exports=o.init},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=null,s=function(t){return/\{\s*\[native code\]\s*\}/.test(""+t)},o=function(){function t(){return i(this,t),r||(r=this),r}return n(t,[{key:"set",value:function(t,e,i){s(window[t].prototype[e])||(this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.visibility="hidden",this.iframe.style.display="none",document.body.appendChild(this.iframe)),this.iframe.contentWindow[t].prototype[e]&&(window[t].prototype[e]=this.iframe.contentWindow[t].prototype[e],i&&(window[t]=this.iframe.contentWindow[t])))}}]),t}();t.exports=new o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t),this.arrayFrom()}return n(t,[{key:"arrayFrom",value:function(){Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},i=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},n=Math.pow(2,53)-1,r=function(t){var e=i(t);return Math.min(Math.max(e,0),n)};return function(t){var i=this,n=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");
arguments.length>2&&(s=arguments[2])}for(var a,l=r(n.length),d=e(i)?Object(new i(l)):new Array(l),u=0;u<l;)a=n[u],o?d[u]="undefined"==typeof s?o(a,u):o.call(s,a,u):d[u]=a,u+=1;return d.length=l,d}}())}}]),t}();t.exports=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(28),s=(n(r),i(6)),o=n(s),a=i(2),l=(n(a),i(43)),d=n(l);t.exports=d.default.extend({defaults:o.default.extend(!0,{},d.default.prototype.defaults,{adsPerClip:5,appendType:"beforeend",aucDast:"0",contentLoaded:!1,contentPlaylist:null,isSkipExpand:!1,isViewable:!1,parentSelector:"",secondsToAd:"3",tags:"",viewPercent:20,withAdvertisementText:!1,adTitle:"",defaultTagTimeout:60,mfp:2,timeBetweenAds:10,volume:"off",detach:{onBackToView:"return"},dimensions:{width:301,minHeight:251,maxHeight:251},components:{D2DFallbackView:{pubId:127968,pubTagId:756668,height:"{{dimensions.minHeight}}",width:"{{dimensions.width}}"},CloseButtonView:{hasCloseButton:!1,delay:1500},OptOut:{hasOptOut:!0,pubId:89238,pubTagId:830927},BrandLogo:{hasBrandLogo:!1,logoLander:"//infinitevid.com",fallBackClickUrl:"//clickus.{{baseReportD}}/st",imageSrc:"{{urls.base}}/infinitevid_80x25_2.png",style:{width:80,height:25,"border-color":"red"}}},player:{hasAdControls:!1}})})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(44),s=n(r),o=i(2),a=n(o),l=i(6),d=n(l),u=i(24);n(u);t.exports=s.default.extend({defaults:d.default.extend(!0,{},s.default.prototype.defaults,{contentLoadType:"content",category:"travel",isPlaylist:!1,secondsBW:17,isMultiAd:!0,contentCallback:function(){},pixels:{D2DFallback:{id:31468623,type:5}},player:{urls:{contentLocation:"{{urls.base}}/content{{player.versions.content}}.js",contentImagesLocation:"{{player.urls.contentVideosLocation}}/img"},settings:{queue_size:6,max_ready_vpaid:3},playlist:[]},components:{D2DFallbackView:{location:"//15.{{baseReportD}}/WhiteLabelBidRequestHandlerServlet",width:0,height:0},ClickTrough:{isActive:!1}}}),predefinedSettings:d.default.extend(!0,{},s.default.prototype.predefinedSettings,{level:{2:{noaop:2,"player.settings.max_ready_vpaid":3,"player.settings.queue_size":4,secondsBW:20},3:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20},4:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20}},demo:{1:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,player:{settings:{mprdct:0}}}}}),initialize:function(){s.default.prototype.initialize.call(this),"mrss"===this.get("contentLoadType")?d.default.ajax({url:this.get("player.urls.contentLocation"),dataType:"xml",success:this._onMrssLoad.bind(this)}):"direct"===this.get("contentLoadType")?this.set("player.playlist",[{id:0,title:"",link:"",url:this.get("player.urls.contentLocation")||this.get("pVideoUrl"),type:"video/mp4",image:""}]):(window.category=this.get("category"),a.default.loadJs(this.get("player.urls.contentLocation"),this._onContentLoad.bind(this))),this.set("pubId",this.get("preroll.pubId")),this.set("pubTagId",this.get("preroll.pubTagId"))},_onMrssLoad:function(t){var e=[];(0,d.default)(t).find("item").each(function(t,i){var i=(0,d.default)(i),n={};n.id=t,n.title=i.find("title").text(),n.link=i.find("link").text(),n.url=i.find("media\\:content,content").attr("url"),n.type=i.find("media\\:content,content").attr("type"),n.image=i.find("media\\:thumbnail,thumbnail").attr("url"),e.push(n)}),this.set("player.playlist",e)},_onContentLoad:function(){window.playlist.forEach(function(t,e,i){i[e].image=this.get("player.urls.contentImagesLocation")+"/"+t.image,i[e].title=t.title.replace(/([A-Z])/g,"$1").replace(/^./,function(t){return t.toUpperCase()}),i[e].url=this.get("player.urls.contentVideosLocation")+"/"+i[e].filename,i[e].name=i[e].filename,i[e].type="video/mp4"},this),this.set("player.playlist",window.playlist)},getScheduleArr:function(){var t=[];return t.push(this._getSchedule("pre-roll",this.get("preroll.pubId"),this.get("preroll.pubTagId"))),t.push(this._getSchedule("mid-roll",this.get("midroll.pubId"),this.get("midroll.pubTagId"))),t.push(this._getSchedule("post-roll",this.get("postroll.pubId"),this.get("postroll.pubTagId"))),t}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(2),s=n(r),o=i(28),a=n(o),l=i(29),d=(n(l),i(34)),u=n(d);t.exports=a.default.DeepModel.extend({STATE:{READY:0,GOT_AD:1,PLAYING:2,PAUSED:3,PAUSED_BY_USER:4,STOPPED_BY_USER:5,DETACHED:6,ATTACHED:7,DONE:8,PLAYER_READY:9,PLAYER_CLOSE:10,PLAYER_STOP:11,AD_STOPPED:12,OPT_OUT:13,OPEN_WITH_PAUSE:14,WAITING_FOR_EXPAND:15,REPEAT_STAND_BY:16,REPEAT_SPINNING:17},defaults:{abTest:"",adMaxPlaySeconds:181,adTitle:"Video",adVolume:"auto",aspectRatio:"16:9",autoPlay:!0,baseReportD:"basebanner.com",cfr:0,country:"",defaultAdParameters:"",defaultTagTimeout:20,gaFactor:1e4,gaFrameSrc:"{{urls.base}}/release-r1/assets/ga.html#page={{gaVertical}}&category={{gaVertical}}",gaVertical:"source",height:0,interruptLoading:!0,ip:"",isDebug:!1,isFirePixel:!0,isHideIframe:!1,isMobile:!1,isMobileMacros:!1,isPlayerViewable:!1,isProtectedInIframe:!0,isRepeat:!0,isResponsive:!0,isShowOnAd:!1,isShowOnAdLocation:"begin",isSoundOnHover:!1,isUnitEligible:!1,isUnitViewable:!1,lineItemId:"",loaderImage:"",logViewabilityCalc:!1,mfp:4,mobilePlayer:"SR",mobileSpriteTimeoutSeconds:20,mute:!0,noaop:2,noDebugReport:!1,openingEffect:0,originId:15,placement:"",playerContainer:"body",playerEndSeconds:0,playerVolume:0,printCurrentViewPercent:!1,predefinedSettings:{level:1},repeat:!0,retriesLWF:5,ronPercent:5,secondsBW:10,secondsInView:2,secondsLWF:.1,secondsToClose:0,secondsToCloseGlobal:0,sortOrderType:0,state:null,timeBetweenAds:1,totalTimeout:60,traceViewabilitySeconds:2,ulog:[""],vastRetry:2,version:"158_allow_sec",vertical:"source",viewabilityPercent:50,wfManual:!1,volume:"onHover",width:0,useSwfVideoJs:!0,mpgclrslv:["gcdn.2mdn.net"],cnvsldrt:5,gtvid:"//cnv.tcsrv.com/getvid?url",vForce:{isActive:!1,getAdTimeoutSeconds:10},detach:{width:320,position:{horizontal:"right",vertical:"bottom"}},customization:{unitContainer:{},adTitle:{},placeHolder:{},playerView:{}},midrollCollapse:{isActive:!1,time:5},pixels:{D2DFallback:{id:31468623,type:5},conversion:{id:31425418,type:2},close:{id:31579687,type:5},timeout:{id:31574457,type:5},optOut:{id:31530958,type:5},optOutNever:{id:31419288,type:5},addImpresion:{id:31579657,type:5},eligible:{id:31579697,type:16},networkError:{type:42},lostEligibility:{type:43},fraudDetection:{type:32},clickthrough:{type:44},error:{id:31608187,type:5},quarterly1:{id:31608197,type:5},quarterly2:{id:31608207,type:5},quarterly3:{id:31608217,type:5},complete:{id:31608237,type:5},render:{id:31608177,type:5},startWithABT:{id:31589837,type:45,isFire:!1},repeatClick:{type:46},renderOnDemand:{type:51},stopUnit:{type:52},pageDisplay:{type:53},unifiedPlacementDisplay:{type:54},url:"//conv{{dataCenter}}mp.{{baseReportD}}/st"},closeButton:{hasCloseButton:!0,secondsToCloseButton:5},urls:{base:"//www.cmbestsrv.com",staticImage:""},player:{versions:{vplayer:"v6.4.42",content:"12_18_16m"},urls:{vplayerLocation:"{{urls.base}}/vpaid/vPlayer",vpaidLocation:"{{player.urls.vplayerLocation}}/vpaidjs/{{player.versions.vplayer}}/main-vpaid.js",playerLocation:"{{player.urls.vplayerLocation}}/player/{{player.versions.vplayer}}",contentVideosLocation:"//cloudvid.cachefly.net/vid",oppsBasePath:"//opps.{{baseReportD}}",oppsRequest:"{{player.urls.oppsBasePath}}/OpportunityServlet",wfBasePath:"//wf.{{baseReportD}}",wfRequest:"{{player.urls.wfBasePath}}/VideoBidRequestHandlerServlet"},settings:{dlgverr:!0},b2b:1,bfFactor:15,hasAdControls:!0,hasBFeature:!0,hasControls:!0,isBypassFlash:!0,isFire99:!0,isFlashPlayer:!0,minVpaidRunTime:4},components:{D2DFallbackView:{pubId:127968,pubTagId:756668,height:"{{height}}",width:"{{width}}",location:"http://15.{{baseReportD}}/WhiteLabelBidRequestHandlerServlet"},OptOut:{hasOptOut:!0,pubId:0,pubTagId:0,imageLocation:"{{urls.base}}/fp/img/closeVideo.png"},CloseButtonView:{hasCloseButton:!1,delay:1500,imageLocation:"{{urls.base}}/assets/x-close-24.png"},TimerView:{hasTimer:!1,time:3,countdownAction:"closeButton"},DetachButtonView:{hasDetuchView:!1,time:1,imageLocation:"{{urls.base}}/assets/ContractButton32.png"},Repeat:{isActive:!1,imageLocation:"{{urls.base}}/assets/repeat1.png"},PosterView:{isActive:!1,imageLocation:"{{urls.base}}/img/play_image_4.jpg",defaultLocation:"{{urls.base}}/img/play_image_3.jpg"},Loading:{type:"img",imgUrl:"{{urls.base}}/assets/loading2.png",staticUrl:"{{urls.base}}/assets/repeat1.PNG"}},fd:{pm:{factor:0,timeoutPeriod:1200,url:"https://data.ad-score.com/score/cors?s=1&pid=1000026&tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}&",pluginUrl:"//js.ad-score.com/score.min.js?pid=1000026#tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}"}}},predefinedSettings:{demo:{1:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1}}},2:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1}}}}},initialize:function(){this.log=new u.default({unitType:this.get("unitType"),className:"BaseUnitModel"});var t=this.get("settingsByConditions");if(t&&t.length>0)for(var e=0;e<t.length;e++){for(var i=t[e].conditions,n=t[e].settings,r=!0,s=0;s<i.length;s++)if(i[s].val&&"function"==typeof i[s].val){var o=i[s].val(this);this.get(i[s].key)!=o&&(r=!1)}else this.get(i[s].key)!=i[s].val&&(r=!1);r&&this.set(n)}var a=this.get("demo");a&&this.set("predefinedSettings.demo",a);var l=this.get("predefinedSettings");if(l){var d;for(var h in l)d=l[h],this.predefinedSettings[h]&&this.predefinedSettings[h][d]&&this.set(this.predefinedSettings[h][d])}this._processPushArray(),this.get("baseReport")&&this.get("oppsBasePath)")&&this.set("oppsBasePath",this.get("baseReport")),this.log.info("unit model created:",this.attributes),this._handleABTest()},get:function(t){var e=a.default.DeepModel.prototype.get.call(this,t);if(!e||"string"!=typeof e)return e;for(var i=e.match(/\{\{(.*?)\}\}/g);i;){for(var n=0;n<i.length;n++){var r=i[n].substr(2,i[n].length-4),s=a.default.DeepModel.prototype.get.call(this,r);s||(s=""),e=e.replace(i[n],s)}i=e.match(/\{\{(.*?)\}\}/g)}return e},getPixel:function(t){!this.pixel&&this._createPixel();var e=this.get(t);return"pixels.conversion"===t&&a.default.trigger("global:creativeEvent",{type:"conversion"}),this.pixel({type:e.type||"",pixelId:e.id,timestamp:Date.now()})},_createPixel:function(){var t=this.get("pixels.url")+"?cijs=convusmp&ttype={{type}}&cisd=convusmp&cipid="+this.get("cipid")+"&crid="+this.get("creativeId")+"&dast="+this.get("dast")+"&cmcv=&pix={{pixelId}}&cb={{timestamp}}&uv="+this.get("unitVersion");this.get("abTest")&&(t+="&abt="+this.get("abTest")),this.get("referrerUrl")&&(t+="&ru="+this.get("referrerUrl")),t=this._addPixelParameter("tagCpmFloor","cft",t),t=this._addPixelParameter("unitId","blid",t),t=this._addPixelParameter("unitName","unm",t),t=this._addPixelParameter("debugKey1","dk1",t),t=this._addPixelParameter("debugKey2","dk2",t),t=this._addPixelParameter("order","order",t),this.pixel=s.default.template(t)},_addPixelParameter:function(t,e,i){return(this.get(t)||0===this.get(t)||this.get(t)===!1)&&(i+="&"+e+"="+this.get(t)),i},getImpressionPixel:function(){this.get("player.isFire99")},_getSchedule:function(t,e,i){return{roll_type:t,url:this.get("player.urls.vpaidLocation"),volume:"on"===this.get("volume")?100:0,mute:"on"!==this.get("volume"),oid:this.get("originId"),mfp:this.get("mfp"),sortOrderType:this.get("sortOrderType"),ad_parameters:JSON.stringify(this.get("demandConfig")),pubid:e,tagid:i,defaultTagTimeout:this.get("defaultTagTimeout"),totaltimeout:this.get("totalTimeout"),noaop:this.get("noaop"),skip_vast:!0}},_handleABTest:function(){this.get("abTest")&&this.get("pixels.startWithABT.isFire")&&(window.cmTag.customDataForTest.startWithABT=!0,s.default.firePixel(this.getPixel("pixels.startWithABT"),"AB Test started"))},_processPushArray:function(){var t=this.get("pushedArr"),e={};if(t){t.forEach(function(t){var i=Object.keys(t)[0];e[i]||(e[i]=[]),e[i].push(t[i])});for(var i in e){var n=e[i],r=this.get(i);r&&n.push(r);var s=n.sort().join("!");this.set(i,s)}}}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(28),s=(n(r),i(6)),o=n(s),a=i(2),l=(n(a),i(43)),d=n(l);t.exports=d.default.extend({defaults:o.default.extend(!0,{},d.default.prototype.defaults,{adsPerClip:5,appendType:"beforeend",aucDast:"0",contentLoaded:!1,contentPlaylist:null,isSkipExpand:!1,isViewable:!1,parentSelector:"",secondsToAd:"3",tags:"",viewPercent:20,withAdvertisementText:!1,adTitle:"",category:"mobilecontent1",defaultTagTimeout:40,mfp:2,timeBetweenAds:0,volume:"off",detach:{onBackToView:"return"},dimensions:{width:301,minHeight:251,maxHeight:251},components:{D2DFallbackView:{pubId:127968,pubTagId:756668,height:"{{dimensions.minHeight}}",width:"{{dimensions.width}}"},CloseButtonView:{hasCloseButton:!0,delay:1500},OptOut:{hasOptOut:!1,pubId:89238,pubTagId:830927},BrandLogo:{hasBrandLogo:!1,logoLander:"//infinitevid.com",fallBackClickUrl:"//clickus.{{baseReportD}}/st",imageSrc:"{{urls.base}}/infinitevid_80x25_2.png",style:{width:80,height:25,"border-color":"red"}},timer:{hasTimer:!0}},player:{hasAdControls:!1}})})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var s=i(6),o=r(s),a=i(47),l=n(a),d=i(2),u=r(d),h=i(28),c=r(h),p=i(24),f=r(p),m=i(75),g=r(m),v=i(76),y=r(v),w=i(49),b=r(w),_=i(30),T=r(_);t.exports=c.default.View.extend({className:"_cm-expandable",ui:{videoDiv:"._cm-expandable-video"},id:"_cm-css-reset",initialize:function(){this.log=new b.default({unitType:"Expandable",className:"Expandable",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.appendType=f.default.APPEND_TYPE[this.model.get("appendType")],this.isAfter=!1,this._isInFriendlyIframe()&&(this.model.get("stayInIframe")?!u.default.parseBool(this.model.get("isProtectedInIframe"))||cmTag.config.iframeData.iframe.width&&cmTag.config.iframeData.iframe.height||this.model.set("isShowOnAd",!1):this._hideIframe=!0),this._expandedElements=[],this._referrer=this.model.get("referrer"),this.model.set("dimensions.maxHeight",Math.max(this.model.get("dimensions.minHeight"),this.model.get("dimensions.maxHeight"))),this.model.set("height",this.model.get("dimensions.maxHeight")),this.model.set("width",this.model.get("dimensions.width")),this._renderNoSelector(),this._checkViewability(),this._bindEvents()},_renderNoSelector:function(){return this.container=this._findContainer(),this.container?void this.render():void this.log.error("Something went wrong, cannot open video")},_bindEvents:function(){this.wem=(0,T.default)(),this.listenTo(this.model,"change:state",this._onStateChange),this.listenTo(c.default,"change:player:content",this._onContentChanged),this.listenTo(c.default,"window:scroll:change",this._checkViewability)},render:function(){switch(this.log.info("start",this.container),"D2D"===this.model.get("isShowOnAd")?(this._loadD2D(),this._setComponents()):"static"===this.model.get("isShowOnAd")&&(this._loadStatic(),this._setComponents(),"end"!==this.model.get("isShowOnAdLocation")&&this._showBanner()),this._template=g.default,this.$el.append(this._template),this._setModelSize(),this.$el.css({height:this.model.get("dimensions.minHeight")+"px",width:this.model.get("width")+"px"}),this.model.get("withAdvertisementText")||this.$el.find("._cm-ad-title").hide(),this.appendType){case f.default.APPEND_TYPE.afterbegin:this.container.prepend(this.$el);break;case f.default.APPEND_TYPE.beforeend:this.container.append(this.$el);break;case f.default.APPEND_TYPE.afterend:this.$el.insertAfter(this.container)}this.player=new y.default({model:this.model,container:this.$el.find("._cm-expandable-video")[0]}),this._hideIframe&&(cmTag.config.iframeData.iframe.style.display="none")},_onStateChange:function(t,e){switch(this.log.info("ExpendableView State: "+e),e){case t.STATE.PLAYER_READY:"D2D"!==this.model.get("isShowOnAd")&&this.model.set("state",this.model.STATE.PLAYING);break;case t.STATE.GOT_AD:this._onGotAd();break;case t.STATE.PLAYING:this._onPlaying();break;case t.STATE.STOPPED_BY_USER:this.player.close(),this._collapse(!1);break;case t.STATE.DONE:this.player.close(),this._collapse(!1);break;case t.STATE.PLAYER_CLOSE:this.player.close(),this._collapse(!1);break;case t.STATE.OPT_OUT:this.player.close(),this._collapse(!0)}},_onGotAd:function(){this.model.get("isShowOnAd")&&this._expand(),"D2D"===this.model.get("isShowOnAd")?this.d2dBanner.hide(!0):"static"===this.model.get("isShowOnAd")&&this.staticBanner&&this._hideBanner(),this.model.set("state",this.model.STATE.PLAYING)},_onPlaying:function(){this._expand()},_expand:function(){this.isExpanded||(this.log.info("expanding view"),this._heightDelta=0,this.model.get("isSkipExpand")||this.model.get("dimensions.minHeight")===this.model.get("height")||(this._expandParents((0,o.default)(this.el)),this.model.get("stayInIframe")&&this._isInFriendlyIframe()&&(this._heightDelta=0,this._expandParents((0,o.default)(cmTag.config.iframeData.iframe)))),this.isExpanded=!0,cmTag.logger.ga("expandable","conversion",this._referrer))},_canExpand:function(t,e){return!!isNaN(e)||t<e},_expandParents:function(t){for(var e=Number(this.model.get("maxParentToExpand")),i=0;0!=t.length&&"BODY"!=t[0].tagName&&this._canExpand(i,e);)this._fitsInside(t)||this._expandElement(t),this._firstInsideWidth(t)||this._expandElementWidth(t),t=t.parent(),i++},_fitsInside:function(t){return t.height()>=this._computeHeight()},_computeHeight:function(){return this.model.get("withAdvertisementText")?this.model.get("height")+14:this.model.get("height")},_firstInsideWidth:function(t){return t.width()>=this.model.get("width")},_expandElement:function(t){this._expandedElements.push(t),!this._heightDelta&&t.height()<this.model.get("dimensions.minHeight")&&(this._heightDelta=this.model.get("dimensions.minHeight")-t.height());var e=t.height(),i=parseInt(this._computeHeight()),n=e+i-this.model.get("dimensions.minHeight")+this._heightDelta;t.css({height:n+"px",transition:"height .5s, width .5s"})},_expandElementWidth:function(t){var e=this.model.get("width");t.css({width:e+"px",transition:"height .5s, width .5s"})},_collapse:function(t){return this.log.info("collapsing view"),this._expandedElements.forEach(function(t){var e=t.height()-this.model.get("height")+this.model.get("dimensions.minHeight");t.height(parseInt(e))},this),this._expandedElements=[],this.isExpanded=!1,this.player.close(),t?void this._loadD2D(this.model.get("components.OptOut.pubId"),this.model.get("components.OptOut.pubTagId")):(this.d2dBanner||this._loadD2D(),void this.d2dBanner.hide(!1))},_setModelSize:function(){this.model.set({width:this.model.get("width"),height:this.model.get("height")})},_loadD2D:function(t,e){this.d2dBanner=new l.D2DFallbackView({model:this.model,container:this.el,pubId:t,pubTagId:e})},_loadStatic:function(){this.staticBanner=new Image;var t=this.model.get("urls.staticImage");t||(t=this.model.get("loaderImage")),this.staticBanner.src=t,this.staticBanner.style.display="none",this.staticBanner.height=this.model.get("height"),this.staticBanner.width=this.model.get("width"),this.staticBanner.onclick=this._bannerClick.bind(this),this.$el.append(this.staticBanner)},_showBanner:function(){this.staticBanner&&(this.staticBanner.style.display="block",this.player&&this.player.mute(!0))},_hideBanner:function(){this.staticBanner&&(this.staticBanner.style.display="none")},_bannerClick:function(){this._hideBanner(),this.model.set("state",this.model.STATE.PLAYING)},_onContentChanged:function(){"static"===this.model.get("isShowOnAd")&&"begin"!==this.model.get("isShowOnAdLocation")&&this._showBanner()},_checkViewability:function(){var t=this.el;u.default.isInFriendlyIframe(this.model.get("iframeData"))&&(t=cmTag.config.iframeData.iframe),this.model.set("isUnitViewable",u.default.isViewable(t,this.model.get("width"),this.model.get("height"),this.model.get("viewPercent")))},_findContainer:function(){var t,e="";return this._isInFriendlyIframe()?this.model.get("stayInIframe")?(0,o.default)("body"):(e=cmTag.config.iframeData.iframe.id,t=document.getElementById(e),this.appendType=f.default.APPEND_TYPE.afterend,t):this._isInIframe()?(0,o.default)("body"):(e="_cm_videoUnit_placeHolder"+this.model.get("redId"),t=document.getElementById(e),u.default.isElementInHead(t)?void this.log.error("The creative is in head element, cannot open video here."):(this.appendType=f.default.APPEND_TYPE.afterend,t))},_findByParentSelector:function(t){if(u.default.isString(t)||u.default.isArray(t)){var e=(0,o.default)(t.toString());if(u.default.isEmpty(e))return;return e.get().reverse()}},_waitViewability:function(){(0,T.default)(),window.setTimeout(this._onWindowPositionChange.bind(this),200)},_onWindowPositionChange:function(){if(!this.isExpanded){var t=this._getInViewDiv();return t?(this.container=t,this.model.set("width",this.container.width()),this.model.set("height",u.default.getVideoHeight(this.model.get("width"))),this.model.set("dimensions.minHeight",0),void this.render()):void this.listenToOnce(c.default,"window:scroll:change",this._onWindowPositionChange.bind(this))}},_getInViewDiv:function(){for(var t=this.model.get("viewPercent"),e=0;e<this.parentElements.length;e++){var i=(0,o.default)(this.parentElements[e]),n=i.width(),r=u.default.getVideoHeight(n);if(u.default.isViewable(this.parentElements[e],n,r,t))return i}},_generatePlaceholders:function(){for(var t=[],e=0;e<this.parentElements.length;e++){var i=document.createElement("div");switch(i.className="_cm-placeholder",this.appendType){case f.default.APPEND_TYPE.afterbegin:this.parentElements[e].insertBefore(i,this.parentElements[e].firstChild);break;case f.default.APPEND_TYPE.beforeend:this.parentElements[e].appendChild(i)}t.push(i)}return t},_setComponents:function(){this.model.get("components.BrandLogo.hasBrandLogo")&&(this.brandLogoView=new l.BrandLogoView({model:this.model,container:this.el}))},_isInIframe:function(){return cmTag.config.iframeData.inIframe||cmTag.config.iframeData.inDFP},_isInFriendlyIframe:function(){return this._isInIframe()&&cmTag.config.iframeData.isFriendlyIframe}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BrandingTitleView=e.TimerView=e.RepeatView=e.PlayListView=e.OptOutView=e.LoadingView=e.DetachButtonView=e.D2DFallbackView=e.CloseButtonView=e.ClickThroughView=e.BrandLogoView=e.PosterView=void 0;var r=i(48),s=n(r),o=i(50),a=n(o),l=i(52),d=n(l),u=i(53),h=n(u),c=i(56),p=n(c),f=i(58),m=n(f),g=i(59),v=n(g),y=i(62),w=n(y),b=i(64),_=n(b),T=i(70),E=n(T),A=i(71),x=n(A),C=i(73),P=n(C);e.PosterView=s.default,e.BrandLogoView=a.default,e.ClickThroughView=d.default,e.CloseButtonView=h.default,e.D2DFallbackView=p.default,e.DetachButtonView=m.default,e.LoadingView=v.default,e.OptOutView=w.default,e.PlayListView=_.default,e.RepeatView=E.default,e.TimerView=x.default,e.BrandingTitleView=P.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(28),s=n(r),o=i(49),a=n(o),l=i(6);n(l);t.exports=s.default.View.extend({className:"_cm-poster",id:"_cm-css-reset",initialize:function(t){this.log=new a.default({unitType:"Component",className:"PosterView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this.render()},render:function(){this.staticBanner=document.createElement("img"),this.staticBanner.addEventListener("error",this._onError.bind(this));var t=this.model.get("components.PosterView.imageLocation");this.staticBanner.src=t,this.staticBanner.height=this.model.get("height"),this.staticBanner.width=this.model.get("width"),this.staticBanner.onclick=this._onClick.bind(this),this.$el.hide(),this.$el.append(this.staticBanner),this.container.prepend(this.$el)},_onError:function(){s.default.trigger("error",this.staticBanner,"imageLoadError"),this.$el.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_onClick:function(t){this.trigger("cm:banner:click")}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),a=n(o),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.unitType,n=e.className,s=e.logger,o=void 0===s?a.default.getInstance():s,l=e.version,d=e.isDebug,u=void 0===d||d;r(this,t),this._logger=o,this.unitType=i,this.className=n,this.version=l,this.isDebug=u}return s(t,[{key:"info",value:function(t,e){this._logger.info("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"success",value:function(t,e){this._logger.success("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"important",value:function(t,e){this._logger.important("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"warning",value:function(t,e){this._logger.warning("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"pixel",value:function(t,e){this._logger.pixel("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"debug",value:function(t,e){this.isDebug&&this._logger.debug("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"error",value:function(t,e){this.isDebug&&this._logger.error("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+t),e)}},{key:"ga",value:function(t){this._logger.ga(this.unitType,t,this.version)}},{key:"ul",value:function(t,e,i){this._logger.ul(t,e,i)}}]),t}();e.default=l},function(t,e,i){"use strict";var n=i(28),r=i(2),s=i(34),o=i(51);t.exports=n.View.extend({className:"_cm-brand-logo",events:{"click ":"_onClick"},initialize:function(t){this.log=new s({unitType:t.unitType,className:"branLogoView"}),this.container=t.container,this.options=this.model.get("components.BrandLogo")||{},this.options.imageSrc=this.model.get("components.BrandLogo.imageSrc"),this.openUrl=this._getOpenUrl(),this.render()},render:function(){this.template=r.template(o),this.$el.append(this.template(this.options)),this.options.style&&this.$el.css(this.options.style),this.options.imageStyle&&this.$el.find("a>img").css(this.options.imageStyle),this.container.appendChild(this.el)},_onClick:function(){window.open(this.openUrl,"_blank")},_getOpenUrl:function(){var t=this.model.get("clickUrl"),e=this.options.logoLander,i=this.options.fallBackClickUrl,n="",r=this._getClickUrlQueryStrings(e);return n=t&&t.length>0&&t.indexOf("_#")===-1?decodeURIComponent(t)+encodeURIComponent(i)+r:i+r},_getClickUrlQueryStrings:function(t){var e="?ttype=1&cipid="+this.model.get("cipid")+"&ttype=1&crid="+this.model.get("creativeId")+"&dast="+this.model.get("dast")+"&tgtf="+encodeURIComponent(t);return e}})},function(t,e){t.exports="<a href=javascript:void(0);> <img src={{imageSrc}}> </a>"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(28),s=n(r),o=i(49),a=n(o);t.exports=s.default.View.extend({className:"_cm-click-through",initialize:function(t){this.log=new a.default({unitType:"Component",className:"ClickThrough",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this.link=t.link,this.render()},render:function(){this.$el.click(this.onClick.bind(this)),this.container.appendChild(this.el)},onClick:function(){this.link&&window.open(this.link,"_blank")},hide:function(){this.$el.hide()},show:function(){this.$el.show()},updateLink:function(t){this.link=t}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(54),s=n(r),o=i(28),a=i(2),l=i(34),d=i(55);t.exports=o.View.extend({className:"_cm-close-area",id:"_cm-close-area",events:{"click ":"_onClick"},initialize:function(t){this.log=new l({unitType:t.unitType,className:"closeButtonView"}),this.container=t.container,this._rendered=!1,this._bindEvents()},render:function(){this._rendered||(this._rendered=!0,this.$el.append(s.default),this.container.appendChild(this.el))},_bindEvents:function(){this.listenTo(this.model,"change:state",this._onStateChange)},_onPlaying:function(){var t=this.model.get("components.CloseButtonView.delay");setTimeout(this.render.bind(this),t)},_onClick:function(){this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||a.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("closeState",d.closeState.closeUnit),this.model.set("state",this.model.STATE.STOPPED_BY_USER),o.trigger("Ad:stoppedByUser")},_onStateChange:function(t,e){switch(e){case t.STATE.PLAYING:this._onPlaying()}},hide:function(){this.$el.hide()}})},function(t,e){t.exports="<div class=_cm-close></div>"},function(t,e){"use strict";t.exports={readyState:"ready",adState:{playing:"playing",paused:"paused",completed:"completed"},adQState:{impression:"impression",q1:"q1",q2:"q2",q3:"q3",completed:"completed"},getAdState:{gettingAd:"gettingAd",gotAd:"gotAd",waiting:"waiting",failed:"failed",stopped:"stopped",finished:"finished"},playerState:{error:"error",stopped:"stopped",closed:"closed",restarted:"restarted"},containerViewState:{rendered:"rendered"},videoViewState:{rendered:"rendered",attached:"attached"},repeatState:{hiding:"hiding",showing:"showing",spinning:"spinning"},loadingViewState:{hiding:"hiding",showing:"showing",clicked:"clicked"},clickThruState:{clicked:"clicked",waiting:"waiting"},timerState:{working:"started",paused:"paused",stopped:"stopped",done:"done"},closeState:{terminate:"terminate",closeUnit:"closeUnit",containerViewClosed:"containerViewClosed",videoViewClosed:"videoViewClosed",playerClosed:"playerClosed"}}},function(t,e,i){"use strict";var n=i(28),r=i(6),s=i(2),o=i(34),a=i(57);t.exports=n.View.extend({className:"_cm-d2d-fallback",initialize:function(t){this.log=new o({unitType:t.unitType,className:"D2dFallbackView"}),this.model=t.model,this.container=t.container,this.pubId=t.pubId?t.pubId:this.model.get("components.D2DFallbackView.pubId"),this.pubTagId=t.pubTagId?t.pubTagId:this.model.get("components.D2DFallbackView.pubTagId"),this.render()},render:function(){this.$el.append(a),r(this.container).append(this.$el),this.iframe=this.$el.find("iframe")[0],this.iframe.contentWindow?this._writeIframe():this.iframe.onload=this._writeIframe.bind(this),s.firePixel(this.model.getPixel("pixels.D2DFallback"),"D2DFallback")},_writeIframe:function(){this.iframe.onload=void 0;var t=this.iframe.contentWindow.document;t.open(),t.write('<script type="text/javascript" src="'+this.buildFallbackURL()+'"></script>'),t.close()},buildFallbackURL:function(){var t=this.model.get("components.D2DFallbackView.location")+"?oid=15&width="+this.model.get("components.D2DFallbackView.width")+("&height="+this.model.get("components.D2DFallbackView.height"))+("&pubid="+this.pubId)+("&tagid="+this.pubTagId)+("&pstn="+this.model.get("components.D2DFallbackView.pstn"))+("&cirf="+this.model.get("referrer"))+"&noaop=1&revmod=INSERT_CONTENT_TYPE&encoded=1&cb=INSERT_CACHEBUSTER&keywords=INSERT_COMMA_SEPARATED_KEYWORDS&urlonly=1&callback=document.write";
return t},hide:function(t){t?this.$el.css({display:"none"}):this.$el.css({display:"block"})}})},function(t,e){t.exports="<iframe style=width:100%;height:100% frameborder=0 border=0 padding=0 scrolling=no marginwidth=0 marginheight=0></iframe>"},function(t,e,i){"use strict";var n=i(28),r=(i(2),i(34));t.exports=n.View.extend({className:"_cm-detach",events:{"click ":"_onClick"},initialize:function(t){this.log=new r({unitType:t.unitType,className:"detachButtonView"}),this.container=t.container,this._rendered=!1},render:function(){if(!this._rendered){var t=this.model.get("components.DetachButtonView.imageLocation");this.$el.css("background-image",'url("'+t+'") !important'),this.container.appendChild(this.el)}},_onClick:function(){this.$el.trigger("cm:detach:click")},hide:function(){this.$el.hide()}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var s=i(28),o=r(s),a=i(49),l=r(a),d=i(6),u=r(d),h=i(60),c=r(h),p=i(61),f=r(p),m=i(55),g=n(m);t.exports=o.default.View.extend({className:"_cm-loading",id:"_cm-css-reset",initialize:function(t){this.log=new l.default({unitType:"Component",className:"LoadingView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this._createStatesAction(),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:adState",this._onAdStateChange.bind(this,this.adStateActions)),this.listenTo(this.model,"change:getAdState",this._onAdStateChange.bind(this,this.getAdStateActions))},_createStatesAction:function(){this.adStateActions={playing:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this)},this.getAdStateActions={stopped:this._stop.bind(this)}},_onAdStateChange:function(t,e,i){var n=t[i];n&&n()},render:function(){this.$el.append(c.default),this.loadingDiv=this.$el.find("._cm-loading-div"),"css"==this.model.get("components.Loading.type")?this.loadCss():"img"==this.model.get("components.Loading.type")&&this.loadImage(),this.$el.hide(),this.container.appendChild(this.el),this.repeatEl=(0,u.default)(f.default),this.repeatEl.hide();var t=new Image;t.className="_cm-repeat-image",t.src=this.model.get("components.Repeat.imageLocation"),this.repeatEl=(0,u.default)(t),this.repeatEl.hide(),this.loadingDiv.append(this.repeatEl)},loadCss:function(){var t=document.createElement("div");t.className="_cm-loading-icon",this.loadingDiv.append(t),this.innerDisplay=(0,u.default)(t)},loadImage:function(){var t=document.createElement("img");t.src=this.model.get("components.Loading.imgUrl"),t.className="_cm_loader_img",this.loadingDiv.append(t),this.innerDisplay=(0,u.default)(t)},hide:function(){this.$el.hide(),this.model.set("loadingViewState",g.loadingViewState.hiding)},show:function(){this.$el.show(),this.loadingDiv.css({width:this.innerDisplay.width(),height:this.innerDisplay.height()}),this.model.set("loadingViewState",g.loadingViewState.showing)},_onClick:function(t){this.log.info("User click"),this.model.set("loadingViewState",g.loadingViewState.clicked),this.innerDisplay.show(),this.repeatEl.hide()},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){this.show()},_stop:function(){this.loadingDiv.one("click",this._onClick.bind(this)),this.show(),this.innerDisplay.hide(),this.repeatEl.show()}})},function(t,e){t.exports="<div class=_cm-loading-div> </div>"},function(t,e){t.exports="<div id=_cm-css-reset class=_cm-repeat-div> <div class=_cm-repeat-icon></div> </div>"},function(t,e,i){"use strict";var n=i(28),r=i(2),s=i(6),o=i(34),a=i(55),l=i(63);t.exports=n.View.extend({events:{"click ._cm-opt-button":"toggleDialog","click ._cm-cancel":"hideDialog","click ._cm-submit":"submitDialog"},id:"_cm-opt-out-view",className:"_cm-opt-out-view",initialize:function(t){this.log=new o({unitType:t.unitType,className:"optOut"}),this.container=t.container,this.render()},render:function(){this.$el.append(l),s(this.container).prepend(this.$el),this.ui={},this.ui.Dialog=this.$el.find("._cm-opt-dialog"),this.hideDialog()},toggleDialog:function(){"none"===this.ui.Dialog.get(0).style.display?this.showDialog():this.hideDialog()},showDialog:function(){this.$el.trigger("cm:optout:dialog:show"),this.ui.Dialog.show()},hideDialog:function(){this.$el.trigger("cm:optout:dialog:hide"),this.ui.Dialog.hide()},submitDialog:function(){var t=this.el.querySelector("._cm-opt-text").value,e=this.model.getPixel("pixels.optOutNever")+"&userComplaint="+t;r.firePixel(e,"Never OptOut"),this.hideDialog(),this.model.set("state",this.model.STATE.OPT_OUT),this.model.set("closeState",a.closeState.closeUnit),this.$el.trigger("cm:optout:submit")},hide:function(){this.$el.hide()}})},function(t,e){t.exports='<div class=_cm-opt-out> <div class=_cm-opt-button></div> <div class=_cm-opt-dialog> <div id="" class=_cm-opt-message> Never show me Video ads </div> <textarea class=_cm-opt-text placeholder="What was the problem with this ad?"></textarea> <div> <button type=button class=_cm-cancel>Cancel</button> <button type=button class=_cm-submit>Send</button> </div> </div> </div>'},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(6),s=n(r),o=i(2),a=(n(o),i(28)),l=n(a),d=i(65),u=n(d),h=i(49),c=n(h),p=i(67),f=n(p),m=i(68),g=(n(m),i(69)),v=n(g);t.exports=l.default.View.extend({errorCount:0,className:"_cm-playlist",initialize:function(t){this.log=new c.default({unitType:"playlist",className:"PlayListView"}),this.playListCollection=new f.default,this.container=t.container,this._playlist=t.playlist,this._height=t.height||350,this._itemCount=parseInt(this._height/74),this._itemCount=Math.min(this._playlist.length,this._itemCount),this._playlist=this._playlist.slice(0,this._itemCount),this._height=Math.min(this._height,74*this._itemCount),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(l.default,"change:player:content",this._onContentChanged),this.listenTo(this.model,"change:state",this._onStateChange),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},render:function(){this.$el.append(v.default),(0,s.default)(this.container).append(this.$el),this._playlist_list=this.$el.find("._cm-playlist-list"),this.$el.css({height:parseInt(this._height)})},_setPlayList:function(){this.playListCollection.length>0||(this.playListCollection.add(this._playlist),this.playListCollection.forEach(function(t){new u.default({model:t,container:this._playlist_list})},this),this.playListCollection.first().set("active",!0))},_onStateChange:function(t,e){switch(e){case t.STATE.PLAYER_READY:this._setPlayList()}},_itemSelected:function(t){t.set("clicked",!1),this._playItem(t),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},_playItem:function(t){if(!this._playlist_list.hasClass("unclickable")){var e=this.playListCollection.findWhere({active:!0});e&&e.set("active",!1),t.set("active",!0),this.$el.trigger("_cm-unit-play",t.attributes)}},_onContentChanged:function(t){this.log.important("On content changed",t);var e=this.playListCollection.findWhere({active:!0});e&&e.set("active",!1),e=this.playListCollection.findWhere({id:t.id}),e&&e.set("active",!0)},playNext:function(){var t=this.playListCollection.findWhere({active:!0}),e=this.playListCollection.indexOf(t)+1;e>=this._itemCount&&(e=0),this._playItem(this.playListCollection.at(e))},setUnclickable:function(t){t?this._playlist_list.addClass("unclickable"):this._playlist_list.removeClass("unclickable")}})},function(t,e,i){"use strict";var n=i(28),r=i(2),s=i(6),o=i(34),a=i(66);t.exports=n.View.extend({errorCount:0,events:{"click ._cm-playlist-item":"_onItemClick"},initialize:function(t){this.log=new o({unitType:"playlist-item",className:"PlayListView"}),this.model=t.model,this.container=t.container,this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:active",this.setActive)},render:function(){var t={image:this.model.get("image"),title:this.model.get("title")},e=r.template(a)(t);this.$el.append(e),s(this.container).append(this.$el),this._item=this.$el.find("._cm-playlist-item")},_onItemClick:function(t){this.model.set("clicked",!0)},setActive:function(t,e){e?this._item.addClass("active"):this._item.removeClass("active")}})},function(t,e){t.exports="<li class=_cm-playlist-item> <img class=_cm-playlist-img src={{image}}> <span class=_cm-playlist-text>{{title}}</span> </li>"},function(t,e,i){"use strict";var n=i(28),r=i(68);t.exports=n.Collection.extend({model:r})},function(t,e,i){"use strict";var n=i(28);t.exports=n.DeepModel.extend({defaults:{id:0,filename:"",image:"",title:"",vidlength:"",active:!1,clicked:!1}})},function(t,e){t.exports="<ul class=_cm-playlist-list> </ul>"},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var s=i(28),o=r(s),a=i(49),l=r(a),d=i(6),u=r(d),h=i(2),c=r(h),p=i(55),f=n(p);i(61);t.exports=o.default.View.extend({className:"_cm-repeat",id:"_cm-css-reset",events:{"click ._cm-repeat-div":"_onClick","click ._cm-repeat-image":"_onClick"},initialize:function(t){this.log=new l.default({unitType:"Component",className:"RepeatView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this.active=!1,this._createStatesAction(),this._bindEvents(),this.render()},render:function(){var t=new Image;t.className="_cm-repeat-image",t.src=this.model.get("components.Repeat.imageLocation"),this.$el.append(t),this.repeatEl=(0,u.default)(t),this.$el.hide(),this.container.appendChild(this.el)},hide:function(){this.repeatEl.removeClass("_cm-spin"),this.$el.hide(),this.active=!1,this.isSpinning=!1,this.model.set("repeatState",f.repeatState.hiding)},show:function(){this.$el.show(),this.active=!0,this.model.set("repeatState",f.repeatState.showing)},showSpinner:function(){this.repeatEl.addClass("_cm-spin"),this.isSpinning=!0},_bindEvents:function(){this.listenTo(this.model,"change:adState",this._onAdStateChange)},_onClick:function(t){t.stopPropagation(),this.isSpinning||this.model.getPixel&&c.default.firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel"),this.showSpinner(),this.model.set("repeatState",f.repeatState.spinning),this.trigger("cm:repeat:click")},_createStatesAction:function(){this.adStateActions={playing:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this)}},_onAdStateChange:function(t,e){var i=this.adStateActions[e];i&&i()},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){this.show()}})},function(t,e,i){"use strict";var n=i(28),r=(i(2),i(6),i(34)),s=i(72);t.exports=n.View.extend({className:"_cm-timer",initialize:function(t){this.log=new r({unitType:t.unitType,className:"timerView"}),this.container=t.container,this._time=Number(t.time)||Number(this.model.get("components.TimerView.time")),this._isHide=t.isHide,this._stepTime=1,this.render()},render:function(){this.$el.append(s),this.hide(),this.container.appendChild(this.el),this.$el.find("._cm-timer-circle ._cm-timer-mask, ._cm-timer-circle ._cm-timer-fill").css("transition","transform "+this._stepTime+"s linear"),this._innerText=this.$el.find("._cm-timer-inset>span")},startTimer:function(){return this.log.info("Timer start"),0===this._time?void this._finish():(this._currentTimer=this._stepTime,this._innerText.text(parseInt(this._time)),this._setDegree(180/this._time*this._currentTimer),void window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime))},_timerUpdate:function(){if(this._innerText.text(parseInt(this._time-this._currentTimer)),this._currentTimer+=this._stepTime,this._currentTimer>this._time)return void this._finish();var t=180/this._time,e=t*this._currentTimer;this._setDegree(e),window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime)},_setDegree:function(t){this.$el.find("._cm-timer-circle ._cm-timer-fill, ._cm-timer-circle ._cm-timer-mask._cm-timer-full").css("transform","rotate("+t+"deg)"),this.$el.find("._cm-timer-circle ._cm-timer-fill._cm-timer-fix").css("transform","rotate("+2*t+"deg)")},_finish:function(){this._isHide&&this.hide(),this.$el.trigger("cm:timer:finish")},hide:function(){this.$el.hide()}})},function(t,e){t.exports='<div class=_cm-timer-circle> <div class="_cm-timer-mask _cm-timer-full"> <div class=_cm-timer-fill></div> </div> <div class="_cm-timer-mask _cm-timer-half"> <div class=_cm-timer-fill></div> <div class="_cm-timer-fill _cm-timer-fix"></div> </div> </div> <div class=_cm-timer-inset> <span></span> </div>'},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(28),s=n(r),o=i(49),a=n(o),l=i(6),d=n(l),u=i(2),h=n(u),c=i(74);t.exports=s.default.View.extend({className:"_cm-branding-title",id:"_cm-css-reset",events:{},initialize:function(t){this.log=new a.default({unitType:"Component",className:"BrandingTitleView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this.render(),this.bindEvents()},bindEvents:function(){this.model.listenTo(this.model,"change:customization.titleContainer.branding",this._customize.bind(this))},render:function(){this.template=h.default.template(c),this.$el.append(this.template(this.model.attributes)),this._customize(),this.container.appendChild(this.el),this.model.get("isFitToSize")&&this._fitToSize()},_customize:function(){var t=this.model.get("customization.titleContainer.title"),e=this.model.get("customization.titleContainer.branding");t&&(t=h.default.toCssObj(t),t.height="auto",this.$el.find("._cm-branding-view-title-text").css(t)),e&&(e=h.default.toCssObj(e),e.height="auto",this.$el.find("._cm-branding-view-branding-text").css(e))},_fitToSize:function(){var t=(0,d.default)(this.container),e=t.height(),i=this.model.get("videoPlaceholderSize");e&&i&&(Number(i.height)+this.$el.height()>=e?Number(i.height)+this.$el.find("._cm-branding-view-title-text").height()<e?this.$el.find("._cm-branding-view-branding-text").hide():this.$el.hide():this.$el.show())}})},function(t,e){t.exports="<span class=_cm-branding-view-title-text>{{titleContainer.titleText}}</span> <span class=_cm-branding-view-branding-text>{{titleContainer.BrandingText}}</span>"},function(t,e){t.exports="<div class=_cm-ad-title>Advertisement</div> <div class=_cm-expandable-video> </div>"},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var s=i(6),o=r(s),a=i(47),l=n(a),d=i(2),u=r(d),h=i(28),c=r(h),p=i(24),f=r(p),m=i(34),g=(r(m),i(49)),v=r(g),y=i(77),w=r(y),b=i(80),_=r(b),T=i(81),E=r(T),A=i(82),x=r(A),C=i(30),P=r(C),I=i(86),k=r(I);t.exports=k.default.extend({className:"_cm-video-ad",events:{},initialize:function(t){this.log=new v.default({unitType:"InStreamView",className:"InStreamView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=t.container,this._skipConvertionPixel=t.skipConvertion,this.model.set("isPlayerViewable",!1),this._isSkipViewabilityCheck=t.isSkipViewabilityCheck,this._errorCount=0,this._videoAdId=this.videoAdId,this._waterfallRetries=Number(this.model.get("waterfallRetries")),isNaN(this._waterfallRetries)&&(this._waterfallRetries=0),"onHover"===this.model.get("volume")&&(this.events.mouseenter="unmute",this.events.mouseleave="_onMouseOver"),this._bindEvents(),this.render(),this._setComponents()},render:function(){this.$el.css({height:this.model.get("height"),width:this.model.get("width")}),this.el.id=this._videoAdId,(0,o.default)(this.container).append(this.$el),this._isSkipViewabilityCheck?this.model.set("isPlayerViewable",!0):this._setViewabilityListeners(),this._initVjs()},_bindEvents:function(){this.windowEventManager=(0,P.default)(),this.listenTo(this.model,"change:state",this._onStateChange),this.listenTo(c.default,"window:tab:change",this._onTabEvent),this.listenTo(c.default,"player:end",this.pause),this.listenTo(c.default,"cm:fd:data",this._onFdData),this.model.get("contentClickUrl")&&(this.events.click="_onContentClick")},_onTabEvent:function(t){t===f.default.TAB_STATE.tabOut&&this.mute()},_onStateChange:function(t,e){switch(e){case t.STATE.PLAYING:this._onPlaying()}},_onPlaying:function(){this.isPlaying||(this.isPlaying=!0,this.log.info("playing"))},_closePlayer:function(){this.player&&this.player.close()},_initVjs:function(){if("direct"==this.model.get("playerType"))this._initDirect();else if(this.model.get("isMobile"))switch(this.model.get("mobilePlayer")){case"AV":this._initAV();break;case"DP":this._initDP();break;case"SR":default:this._initSR()}else this._initDP()},_initSR:function(){this.player=new w.default({model:this.model,isViewable:Number(this.isViewable),targetId:this.el.id,width:this.model.get("width"),height:this.model.get("height"),onAdImpression:this._onAdImpression.bind(this),onAdError:this._onAdError.bind(this),onAdEnded:this._onAdStopped.bind(this),onFirstPlay:this._onPlayerReady.bind(this)})},_initAV:function(){this.player=new E.default({model:this.model,isViewable:Number(this.isViewable),targetId:this.el.id,width:this.model.get("width"),height:this.model.get("height"),onAdImpression:this._onAdImpression.bind(this),onAdError:this._onAdError.bind(this),onAdEnded:this._onAdStopped.bind(this),onFirstPlay:this._onPlayerReady.bind(this)})},_initDP:function(){this.player=new _.default({model:this.model,targetId:this.el.id,onAdStopped:this._onAdStopped.bind(this),onAdImpression:this._onAdImpressionCM.bind(this),onAdError:this._onAdError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerStop:this._onPlayerStop.bind(this),onPlayerClose:this._onPlayerClose.bind(this),scheduleArr:this.model.getScheduleArr()})},_initDirect:function(){this.player=new x.default({model:this.model,targetId:this.el.id,onAdStopped:this._onAdStopped.bind(this),onAdImpression:this._onAdImpressionCM.bind(this),onAdError:this._onAdError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerStop:this._onPlayerStop.bind(this),onPlayerClose:this._onPlayerClose.bind(this),scheduleArr:this.model.getScheduleArr()})},_onAdStopped:function(){this.model.set("tagCpmFloor",void 0),this.clickThroughView&&this.clickThroughView.show(),this.model.set("state",this.model.STATE.AD_STOPPED)},_onAdImpressionCM:function(t){this.model.set("tagCpmFloor",t.cpmFloor),this._onAdImpression()},_onAdImpression:function(){this._hasImpression=!0,this.log.info("onAdImpression (got ad)"),this._skipConvertionPixel||u.default.firePixel(this.model.getPixel("pixels.conversion"),"Conversion"),this.is99Fired||(u.default.firePixel(this.model.getImpressionPixel(),"First Convertion 99"),this.is99Fired=!0),this.clickThroughView&&this.clickThroughView.hide(),this.model.set("state",this.model.STATE.GOT_AD)},_onAdError:function(){this.log.error("onAdError"),this._errorCount++,this._waterfallRetries&&!this._hasImpression&&this._errorCount>=this._waterfallRetries&&(this.log.info("number of errors reached the allowed waterfall retries - stopping the unit",this._waterfallRetries),this.model.set("state",this.model.STATE.DONE))},_onPlayerReady:function(){this.log.info("onVjsReady"),this.updateClickThrough(),this.contentCallback(),this.model.set("state",this.model.STATE.PLAYER_READY)},_onPlayerError:function(){this.log.error("onPlayerError"),c.default.trigger("player:error")},_onPlayerStop:function(){this.model.set("state",this.model.STATE.PLAYER_STOP)},_onPlayerClose:function(){this.model.set("state",this.model.STATE.PLAYER_CLOSE)},playVideo:function(t){this.player.playVideo(t)},resizePlayer:function(t,e){this.$el.css({height:this.model.get("height"),width:this.model.get("width")}),this.player.resize(t,e)},close:function(){this.$el.hide(),this._closePlayer()},_setComponents:function(){this.model.get("components.CloseButtonView.hasCloseButton")&&(this.closeButtonView=new l.CloseButtonView({model:this.model,container:this.el})),this.model.get("components.OptOut.hasOptOut")&&(this.optOutView=new l.OptOutView({model:this.model,container:this.el})),this.model.get("components.BrandLogo.hasBrandLogo")&&(this.brandLogoView=new l.BrandLogoView({model:this.model,container:this.el})),this.model.get("components.ClickThrough.isActive")&&(this.clickThroughView=new l.ClickThroughView({model:this.model,container:this.el}))},_removeComponents:function(){this.closeButtonView&&this.closeButtonView.hide(),this.optOutView&&this.optOutView.hide()},_onMouseOver:function(t){this.mute()},_onFdData:function(t){this.player.setFdData(t)},mute:function(t){this.player&&this.player.mute(t)},unmute:function(){this.player&&this.player.unMute()},pause:function(){this.player&&this.player.pause()},resume:function(){this.player&&this.player.resume()},_setViewabilityListeners:function(){this.listenTo(c.default,"window:tab:change",this.checkViewability.bind(this,!0)),this.listenTo(c.default,"window:scroll:change",this.checkViewability.bind(this,!1)),this.checkViewability(!1)},checkViewability:function(t,e){this.model.get("isPlayerViewable");if(t&&e===f.default.TAB_STATE.tabOut)this.model.set("isPlayerViewable",!1);else{var i=this.model.get("width"),n=this.model.get("height"),r=this.el;u.default.isInFriendlyIframe(cmTag.config.iframeData)&&(r=cmTag.config.iframeData.iframe),this.model.set("isPlayerViewable",u.default.isViewable(r,i,n,50))}},updateClickThrough:function(){var t=this.player.getCurrentContent();t.link&&this.clickThroughView&&this.clickThroughView.updateLink(t.link)},contentCallback:function(){var t=this.player.getCurrentContent(),e=this.model.get("contentCallback");u.default.isFunction(e)&&e(t)},_onContentClick:function(){window.open(this.model.get("contentClickUrl"),"_blank")}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(6),a=n(o),l=i(2),d=n(l),u=i(24),h=n(u),c=i(49),p=n(c),f=i(78),m=n(f),g=i(79),v=n(g),y=function(){function t(e){if(r(this,t),this.log=new p.default({className:"StreamRail Player"}),this.streamRailId="streamrail-jssdk",this.options=e,this.model=this.options.model,this.isMultiAd=d.default.parseBool(this.model.get("isMultiAd")),!document.getElementById(this.streamRailId)){var i=this.model.get("player.urls.wfRequest");if(this.waterfall=new v.default({wfUrl:i,wfRetries:this.model.get("retriesLWF"),secondsBW:this.model.get("secondsLWF"),isFirePiggies:this.model.get("player.settings.fire_piggies"),ronPercent:this.model.get("ronPercent"),urlParams:{cirf:this.model.get("referrer"),height:this.options.height,originId:this.model.get("originId"),pubId:this.model.get("pubId"),tagId:this.model.get("pubTagId"),width:this.options.width,noaop:this.model.get("noaop"),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),crid:this.model.get("creativeId"),isViewable:this.model.get("isPlayerViewable")}}),this.model.has("demandConfig.waterfall")){var n=this.waterfall.handleWaterfallObject(this.model.get("demandConfig.waterfall"));return void this._handleWfResponce("preroll",n)}this.waterfall.callWaterfall(this._handleWfResponce.bind(this,"preroll"),this._waterfallError.bind(this))}}return s(t,[{key:"_waterfallError",value:function(){this.log.error("There was an error with the waterfall!"),d.default.firePixel(this.model.getPixel("pixels.networkError"),"WF Network Error")}},{key:"_handleWfResponce",value:function(t,e){this.wf||(this.wf={}),this.wf.preroll=e,this._generateSRInit()}},{key:"_generateSRInit",value:function(){if(!this.wf.preroll||!this.wf.preroll.tags||d.default.isEmpty(this.wf.preroll.tags))return this.log.warning("The waterfall is empty"),void this.waterfall.recallWF();if(this._srPlaylist=[],this.isMultiAd){var t=this.model.get("player.playlist");if(0==t.length)return void this.model.listenToOnce(this.model,"change:player.playlist",this._generateSRInit.bind(this));d.default.each(t,this._SRPlaylistAdapter,this)}var e=this.model.get("player.urls.oppsRequest");this.oppManager=new m.default(e,{"auc-dast":this.model.get("cmDast"),pv:100,vpd:this.model.get("pubId"),vptd:this.model.get("pubTagId"),pt:d.default.crc32(this.model.get("abTest")||999)}),d.default.each(this.wf.preroll.tags,this._SRTagAdapter,this),window.srAsyncInit=this._srInit.bind(this),this._createSRPlayer()}},{key:"_SRPlaylistAdapter",value:function(t){var e=d.default.extend({},t);e.id=t.filename,e.categories=this.model.get("category"),this._srPlaylist.push(e)}},{key:"_SRTagAdapter",value:function(t){var e={cirf:encodeURIComponent(this.model.get("cirf")),country:this.model.get("country"),domain:this.model.get("domain"),ip:this.model.get("ip"),playerHeight:Number(this.options.height),playerWidth:Number(this.options.width),referrer:encodeURIComponent(this.model.get("referrer")),vertical:this.model.get("vertical"),videoLength:"",description:"",title:"",videoUrl:"",pageUrl:this.model.get("referrer"),ua:"[DEV_UA]"};if(this._srPlaylist&&this._srPlaylist.length>0){var i=this._srPlaylist[0];e.videoLength=i.vidlength,e.videoUrl=encodeURIComponent(i.fullPath),e.description=i.title,e.title=i.title}if(t.macros&&(e=d.default.extend(e,{ip:"[CLIENT_IP]",playerHeight:"[HEIGHT]",playerWidth:"[WIDTH]"})),t.url)t.url=this.waterfall.replaceMacros(t.url,e);else try{t.url=decodeURIComponent(t.vast)}catch(e){t.url=t.vast}t.adCancelTimeout=1e3*Number(this.model.get("defaultTagTimeout"))}},{key:"_srInit",value:function(){var t={partnerID:"fd925f23-e608-4807-9a9e-ebe550860bc3",ads:{schedule:[],skip:{enabled:!1,seconds:5,btnText:"Continue"}},adRequestThrottle:1e3*Number(this.model.get("secondsBW")),autoplay:d.default.parseBool(this.model.get("autoPlay")),bgColor:"black",contentAutoplay:d.default.parseBool(this.model.get("autoPlay")),height:this.options.height,hideContentBeforePreRoll:d.default.parseBool(this.model.get("isShowOnAd")),loop:d.default.parseBool(this.model.get("repeat")),muted:"on"!==this.model.get("volume"),mobileSpriteTimeout:1e3*this.model.get("mobileSpriteTimeoutSeconds"),scaleMode:"original",width:this.options.width};this.isMultiAd?(t.playlist=this._srPlaylist,t.breakingAds={enabled:!0,hideContentControls:!d.default.parseBool(this.model.get("player.hasControls")),minTimeBetweenAds:1e3*Number(this.model.get("timeBetweenAds")),on:"AdImpression"},t.ads.schedule=[{position:"pre-roll",server:{tags:this.wf.preroll.tags}}]):t.ads.schedule=[{position:"pre-roll",server:{tags:this.wf.preroll.tags}}],this.log.info("SR Options",t),this.player=SR(this.options.targetId,t),this._bindEvents()}},{key:"_bindEvents",value:function(){this.player.on("AdVideoFirstQuartile",this._fireQuartileOpp.bind(this,"AdVideoFirstQuartile")),this.player.on("AdVideoMidpoint",this._fireQuartileOpp.bind(this,"AdVideoMidpoint")),this.player.on("AdVideoThirdQuartile",this._fireQuartileOpp.bind(this,"AdVideoThirdQuartile")),this.player.on("AdVideoComplete",this._fireQuartileOpp.bind(this,"AdVideoComplete")),this.player.on("AdImpression",this._onAdImpression.bind(this)),this.player.on("AdVideoComplete",this._onAdEnded.bind(this)),this.player.on("AdError",this._onAdError.bind(this)),this.player.on("AdRequest",this._onAdRequest.bind(this)),this.player.on("AdPaused",this._onAdPaused.bind(this)),this.player.on("AdPlaying",this._onAdPlaying.bind(this)),this.player.on("AdClickThru",this._onAdClickThru.bind(this)),this.player.on("firstplay",this._onFirstPlay.bind(this)),this.model.on("change:isPlayerViewable",this.changeViewability,this)}},{key:"_onAdClickThru",value:function(){d.default.firePixel(this.model.getPixel("pixels.clickthrough"),"Click Through")}},{key:"_onAdRequest",value:function(t){return this.log.debug("onAdRequest",t),t?(this._createActiveTag(t),this.activeTag.requestTime=Date.now(),this._fireOpp(this.oppManager.pixelType.tagStarted),void(!this.activeTag.tagTimeoutTimer&&this.activeTag.adCancelTimeout&&(this.activeTag.tagTimeoutTimer=window.setTimeout(this._onAdLoadTimeout.bind(this),this.activeTag.adCancelTimeout)))):void this.log.warning("onAdRequest Tag is undefined")}},{key:"_onAdLoadTimeout",value:function(){this.log.debug("onAdLoadTimeout"),this._fireOpp(this.oppManager.pixelType.tagTimeout),this.activeTag=null}},{key:"_onAdError",value:function(t){if(this.log.debug("onAdError",t),!this.activeTag){if(!t)return void this.log.warning("onAdError Tag is undefined");this.log.info("onAdError without active tag"),this._createActiveTag(t)}window.clearTimeout(this.activeTag.tagTimeoutTimer),this._fireOpp(this.oppManager.pixelType.tagError),this.options.onAdError(),this.activeTag=null}},{key:"_onAdImpression",value:function(t){if(this.log.debug("onAdImpression",t),!this.activeTag){if(!t)return void this.log.warning("onAdImpression Tag is undefined");this.log.info("onAdImpression without active tag"),this._createActiveTag(t)}window.clearTimeout(this.activeTag.tagTimeoutTimer),d.default.firePixel(this.activeTag.pixel,"Tag Pixel"),this._fireOpp(this.oppManager.pixelType.tagImpression),this._resetViewabilityTimer(),this.options.onAdImpression()}},{key:"_stopViewabilityTimer",value:function(){this.viewabilityTimer&&(window.clearTimeout(this.viewabilityTimer),this.viewabilityTimer=null)}},{key:"_resetViewabilityTimer",value:function(){if(this._stopViewabilityTimer(),this.activeTag&&this.model.get("isPlayerViewable")&&!this.activeTag.isViewed){var t=this.model.get("traceViewabilitySeconds");this.viewabilityTimer=window.setTimeout(this._onViewability.bind(this),1e3*t)}}},{key:"_onViewability",value:function(){this.activeTag.isViewed=!0,this._fireOpp(this.oppManager.pixelType.viewability)}},{key:"_onAdPaused",value:function(){this.log.debug("onAdPaused"),this._stopViewabilityTimer()}},{key:"_onAdPlaying",value:function(){return this.log.debug("onAdPlaying"),this.isPaused?void this.pause():void this._resetViewabilityTimer()}},{key:"_onAdEnded",value:function(){this.log.debug("onAdEnded"),this.options.onAdEnded(),this._stopViewabilityTimer(),this.activeTag=null}},{key:"_fireQuartileOpp",value:function(t,e){if(this.log.debug("on"+t,e),!this.activeTag){if(!e)return void this.log.warning("on"+t+" tag is undefined");this.log.info("Quartile "+t+" without active tag"),this._createActiveTag(e)}this._fireOpp(this.oppManager.pixelType[t])}},{key:"_onFirstPlay",value:function(){this.options.onFirstPlay&&this.options.onFirstPlay()}},{key:"_createActiveTag",value:function(t){if(!t)return this.activeTag=null,!1;var e=this._getRollType(t.analytics.adPosition),i=this._getTagById(t.analytics.adsourceid,e);return this.activeTag=i,this.activeTag.rollType=e,this.activeTag.tryId=Date.now(),!0}},{key:"_getRollType",value:function(t){return t.replace("-","")}},{key:"_getTagById",value:function(t,e){if(this.wf[e]){var i=d.default.find(this.wf[e].tags,function(e){return String(e.id)===t});return d.default.extend({},i)}}},{key:"_createSRPlayer",value:function(){var t=document.getElementById(this.options.targetId),e=document.createElement("script");e.id=this.streamRailId,this.model.get("srSrc")?e.src=this.model.get("srSrc"):d.default.parseBool(this.model.get("srOldVersion"))?e.src="https://sdk.streamrail.com/test/player/89afe692a142c57fff97a01259e030e6c15e5cf6/sr.ads.js":e.src="https://sdk.streamrail.com/player/sr.ads.js",t.appendChild(e)}},{key:"_fireOpp",value:function(t){return this.activeTag?void this.oppManager.send({rs:1,st:h.default.ROLL_TYPE[this.activeTag.rollType],os:this.activeTag.seqNum,rst:t,d:Date.now()-this.activeTag.requestTime,dast:this.activeTag.dast,impid:this.activeTag.tryId,vmt:Number(this.activeTag.isRon)
}):void this.log.info("There is no active unit! Cannot fire opp.")}},{key:"pause",value:function(){this.player&&(this.isPaused=!0,this.player.pause())}},{key:"resume",value:function(){this.player&&(this.isPaused=!1,this.player.play())}},{key:"close",value:function(){this.player&&(this.player.off(),this.player.dispose(),this._fireOpp(this.oppManager.pixelType.playerClosed),this.activeTag=null)}},{key:"resize",value:function(t,e){if(this.player){var i=document.getElementById(this.options.targetId);(0,a.default)(i).css({width:t,height:e}),this.player._resize()}}},{key:"mute",value:function(){this.player.muted(!0)}},{key:"unMute",value:function(){this.player.muted(!1)}},{key:"changeViewability",value:function(t,e){e?this._resetViewabilityTimer():this._stopViewabilityTimer()}},{key:"setFdData",value:function(t){}}]),t}();t.exports=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(6),a=(n(o),i(2)),l=n(a),d=i(49),u=n(d),h=function(){function t(e,i){r(this,t),this.oppUrl=e,0!==e.indexOf("//")&&(this.oppUrl="//"+this.oppUrl),this.options={"auc-dast":void 0,dast:void 0,d:void 0,dp:void 0,os:void 0,pv:void 0,pt:void 0,rs:void 0,rst:void 0,st:void 0,sts:void 0,tms:void 0,vmt:void 0,vpd:void 0,vptd:void 0},this.options=l.default.extend(this.options,i),this.log=new u.default({className:"Opportunity Manager"}),this.pixelType={tagStarted:0,tagImpression:1,tagTimeout:2,tagError:4,playerClosed:7,AdVideoFirstQuartile:21,AdVideoMidpoint:22,AdVideoThirdQuartile:23,AdVideoComplete:24,viewability:30,firstImpression:99}}return s(t,[{key:"send",value:function(t){var e=this.oppUrl;t=l.default.extend({},this.options,{tms:Math.floor((new Date).getTime()/1e3)},t),e=l.default.addParametersToUrl(e,t,!0),l.default.firePixel(e,"Opportunity Pixel")}}]),t}();t.exports=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(6),a=n(o),l=i(2),d=n(l),u=i(24),h=n(u),c=i(49),p=n(c),f=function(){function t(e){r(this,t),this.urlParams=e.urlParams,this.maxWFRetries=e.wfRetries,this.wfRetries=0,this.isFirePiggies=e.isFirePiggies,this.secondsBW=e.secondsBW,this.log=new p.default({className:"Waterfall Manager"}),this.wfUrl=e.wfUrl,this.wfUrl.startsWith("//")||(this.wfUrl="//"+this.wfUrl),this.isRon=d.default.rollNumbers(e.ronPercent)}return s(t,[{key:"updateUrlParams",value:function(t){this.urlParams=a.default.extend(!0,{},this.urlParams,t)}},{key:"callWaterfall",value:function(t,e){this.successCallback=t,this.errorCallback=e;var i=this.wfUrl;this.wfRetries++;var n={cb:(new Date).getTime(),height:this.urlParams.height,oid:this.urlParams.originId,pubid:this.urlParams.pubId,tagid:this.urlParams.tagId,width:this.urlParams.width,noaop:this.urlParams.noaop,crid:this.urlParams.crid,sortOrderType:0,mindur:1,maxdur:60,minbr:1,maxbr:512,proto:"2,3,5,6",st:0,mimes:Object.keys(h.default.MIME_TYPES).toString(),dtagid:this.urlParams.dtagid,dpubid:this.urlParams.dpubid,viewable:this.urlParams.isViewable};this.isRon&&(n.noaop=1,n.sortOrderType=2),this.urlParams.cirf&&(n.cirf=encodeURIComponent(decodeURIComponent(this.urlParams.cirf))),i=d.default.addParametersToUrl(i,n,!0),i+="callback=&",a.default.ajax({type:"GET",url:i,success:this.onWaterfallSuccess.bind(this),error:this.recallWF.bind(this)})}},{key:"recallWF",value:function(){return this.wfRetries>=this.maxWFRetries?void this.errorCallback():void window.setTimeout(this.callWaterfall.bind(this,this.successCallback,this.errorCallback),1e3*this.secondsBW)}},{key:"onWaterfallSuccess",value:function(t,e,i){if(!i)return this.log.error("The request is empty!"),void this.recallWF();var n=new Function("try { return "+i.responseText+";} catch(e){return false}")();n=this.handleWaterfallObject(n),this.successCallback(n)}},{key:"handleWaterfallObject",value:function(t){var e=/http(?:s:|:)([^'"]*)/g;return this.isFirePiggies&&this._firePiggies(t.pixel_piggies),d.default.each(t.tags,function(t,i,n){t.id=Date.now()+Math.floor(1e3*Math.random()),t.seqNum=i+1,t.dast=t.pixel?this._getDastFromPixel(t.pixel):"",t.isRon=this.isRon;var r=e.exec(t.pixel);r&&r.length>1&&(t.pixel=r[1])},this),t}},{key:"_firePiggies",value:function(t){d.default.each(t,function(t){d.default.fireIframePixel(t.url,"Piggie")})}},{key:"replaceMacros",value:function(t,e){var i=d.default.extend({},{ua:encodeURIComponent(navigator.userAgent),cb:Date.now(),keywords:""},e),n=(new Date).getTime();return t=this._replaceMacro(/%%referrer%%/gi,i.referrer,t),t=this._replaceMacro(/%%domain%%/gi,i.domain,t),t=this._replaceMacro(/%%video-url%%/gi,i.videoUrl,t),t=this._replaceMacro(/%%page-url%%/gi,i.pageUrl,t),t=this._replaceMacro(/%%player-width%%/gi,i.playerWidth,t),t=this._replaceMacro(/%%player-height%%/gi,i.playerHeight,t),t=this._replaceMacro(/%%timestamp%%/gi,Math.floor(n/1e3),t),t=this._replaceMacro(/%%vidlength%%/gi,i.videoLength,t),t=this._replaceMacro(/%%keywords%%/gi,i.keywords,t),t=this._replaceMacro(/%%description%%/gi,i.description,t),t=this._replaceMacro(/%%vertical%%/gi,i.vertical,t),t=this._replaceMacro(/%%title%%/gi,i.title,t),t=this._replaceMacro(/%%cirf%%/gi,i.cirf,t),t=this._replaceMacro(/%%cb%%/gi,i.cb,t),t=this._replaceMacro(/%%ip%%/gi,i.ip,t),t=this._replaceMacro(/%%UA%%/gi,i.ua,t),t=this._replaceMacro(/%%country%%/gi,i.country,t),t=this._replaceMacro(/%%latitude%%/gi,i.lat,t),t=this._replaceMacro(/%%longitude%%/gi,i.long,t),t=t.replace(/%%[^%]*%%/gi,"")}},{key:"_replaceMacro",value:function(t,e,i){return void 0===e&&(e=""),i.replace(t,e)}},{key:"_getDastFromPixel",value:function(t){var e=t.replace(/\?\?+/g,"?").replace(/&&+/g,"&").split(/\?(.+)?/gi,2);if(2!=e.length)return"";var i=e[1].split(/\?|&/gi);for(var n in i)if(i[n]){var r=i[n].split(/=(.+)?/gi,2);if(2==r.length&&"dast"==r[0])return r[1]}return""}}]),t}();t.exports=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),a=n(o),l=i(28),d=n(l),u=i(24),h=n(u),c=i(49),p=n(c),f=i(78),m=n(f),g=i(37),v=n(g),y=function(){function t(e){r(this,t),this.options=e,this.model=this.options.model||{},this.log=new p.default({unitType:"PlayerAPI",className:"DPlayer",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.timers={},this.contentIndex=0,!this.model.get("vForce.isSupported")&&this.model.get("vForce.isActive")&&this.model.set("vForce.isActive",!1),this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this.dependencies=[];var i=e.model.get("player.urls.playerLocation");i&&(this.dependencies=[i+"/assets/video-js/video-js.css",i+"/assets/player.css",i+"/assets/video-js/"+(this.model.get("useSwfVideoJs")?"video":"video_no_swf")+".js",i+"/OvaMediaPlayer.js"]),this.oppManager=new m.default(this.model.get("player.urls.oppsRequest"),{"auc-dast":this.model.get("cmDast"),pt:a.default.crc32(this.model.get("abTest")||999)}),window.OvaMediaPlayer?this._setPlayer():a.default.loadJsArr(this.dependencies,this._setPlayer.bind(this))}return s(t,[{key:"_setPlayer",value:function(){if(this._setGeneralPlayingUnitState(!1),this.playlist=this.model.get("player.playlist"),this.playlist&&a.default.isEmpty(this.playlist))return void this.model.listenToOnce(this.model,"change:player.playlist",this._setPlayer.bind(this));var t=this.playlist[this.contentIndex];this.player=new OvaMediaPlayer({abTest:this.model.get("abTest"),ad_controls:this.model.get("player.hasAdControls"),aspect_ratio:this.model.get("aspectRatio"),auc_dast:this.model.get("cmDast"),autostart:this.model.get("autoPlay"),base_url:this.model.get("urls.base"),bf_factor:this.model.get("player.bfFactor"),bug_feature:this.model.get("player.hasBFeature"),cfr:this.model.get("cfr"),cipid:this.model.get("cipid"),cirf:decodeURIComponent(this.model.get("referrer")),creativeId:this.model.get("creativeId"),controls:this.model.get("player.hasControls"),country:this.model.get("country"),debug:this.model.get("isDebug")?["*"]:[],default_ad_parameters:this.model.get("defaultAdParameters"),default_ad_timeout:this.model.get("adMaxPlaySeconds"),default_b2b:this.model.get("player.b2b"),fire99:this.model.get("player.isFire99"),ga_factor:this.model.get("gaFactor"),ga_frame_src:this.model.get("gaFrameSrc"),image:this.model.get("loaderImage"),interrupt_loading:this.model.get("interruptLoading"),ip:this.model.get("ip"),isViewable:this.model.get("isPlayerViewable"),keywords:this.model.get("adTitle"),min_vpaid_run_time:this.model.get("player.minVpaidRunTime"),no_debug_report:this.model.get("noDebugReport"),oid:this.model.get("originId"),opps_base_path:this.model.get("player.urls.oppsBasePath"),page_url:decodeURIComponent(this.model.get("referrer")),referrer:decodeURIComponent(this.model.get("referrer")),repeat:this.model.get("repeat"),ron_percent:this.model.get("ronPercent"),schedule_auto:this.model.get("timeBetweenAds"),tags:this.model.get("tags"),time_between_waterfall:this.model.get("secondsBW"),use_flash_bypass:this.model.get("player.isBypassFlash"),use_flash_player:this.model.get("player.isFlashPlayer"),version:this.model.get("adTitle"),vertical:this.model.get("vertical"),wf_base_path:this.model.get("player.urls.wfBasePath"),wf_url:this.model.get("player.urls.wfRequest"),opps_url:this.model.get("player.urls.oppsRequest"),height:""+this.model.get("height"),width:""+this.model.get("width"),dplayerSettings:this.model.get("player.settings"),can_opt_out:!1,description:t.title,domain:window.location.hostname,mute:this.isMuted,title:t.title,volume:this.volume,target_id:this.options.targetId.toString(),schedule:this.options.scheduleArr,dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),isMobile:this.model.get("isMobile"),queue_size:this.model.get("player.settings.queueSize"),max_ready_vpaid:this.model.get("player.settings.maxReadyVpaid"),adto:this.model.get("player.settings.adto"),vakll:this.model.get("player.settings.vakll"),mintimwf:this.model.get("player.settings.mintimwf"),agressiveLevel:this.model.get("predefinedSettings.level"),mPre:this.model.get("mPre"),vimpFireEvent:this.model.get("vimpFireEvent"),vForce:this.model.get("vForce.isActive"),get_ad_timeout_seconds:this.model.get("vForce.getAdTimeoutSeconds"),wf_manual:this.model.get("wfManual"),wf_dynmc_ps:this.model.get("wfDynamicPause"),run_wf_when_empty:this.model.get("runWfWhenEmpty"),rndmt:this.model.get("rndmt"),unit_name:this.model.get("unitName"),unit_loader_version:this.model.get("version"),unit_main_version:this.model.get("unitVersion"),mprdct:this.model.get("player.settings.mprdct"),files:[t],onPlayerClose:this._onPlayerClose.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerStop:this._onPlayerStop.bind(this)}),v.default.player=this.player,this.model.get("supportTool")||this.model.get("supportTool.isOpen")||this.model.set("supportTool",{isOpen:!1}),this.model.listenTo(this.model,"change:supportTool.isOpen",this._supportToolStateChange.bind(this)),this._registerListeners()}},{key:"_onAdImpression",value:function(t){var e=this;t.hadImpression&&(this.activeVpaidWrapper=t,this.model.get("components.Repeat.isActive")&&this.activeVpaidWrapper.dontDie&&this.activeVpaidWrapper.dontDie(),this.hasImpression=!0,this._stopTimer("midrollCollapse"),setTimeout(function(){e.isMuted||e.unMuteAd()},200),this.hadImpression||(d.default.trigger("filledImpression",{lineItemId:this.model.get("lineItemId"),placement:this.model.get("placement"),redId:this.model.get("redId")}),this.hadImpression=!0),this.log.debug("onAdImpression",t),window.clearTimeout(this._playerTimeout||0),t.isBf||(this.activeTag=a.default.stripObject(t.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]),this._resetViewabilityTimer()),this.options.onAdImpression(t.tag))}},{key:"_onStop",value:function(t){var e=this;t&&t.hadImpression&&!t.isBf&&(this.log.debug("onStop",t),this.hasImpression&&(this.hasImpression=!1,this.options.onAdStopped()),this.activeTag&&this.options.onAdStopped(),setTimeout(function(){e.isMuted||e.unMutePlayer()}),this.activeTag=null,this._stopTimer("viewability"),this._resetMidrollCollapseTimer())}},{key:"_onVideoComplete",value:function(){this.options.onAdVideoComplete&&this.options.onAdVideoComplete()}},{key:"_onPlayerReady",value:function(){this.log.info("onPlayerReady"),this._initCloseTimers(),this.options.onPlayerReady()}},{key:"_onPlayerStop",value:function(){this.options.onPlayerStop&&this.options.onPlayerStop(),this._stopTimer("viewability")}},{key:"_onPlayerError",value:function(){this.options.onPlayerError&&this.options.onPlayerError(),this._stopTimer("viewability")}},{key:"_initCloseTimers",value:function(){var t=this.model.get("secondsToClose");t&&!this._playerTimeout&&(this.log.info("set secondsToClose",t),this._playerTimeout=window.setTimeout(this._onPlayerTimeout.bind(this),1e3*t));var e=this.model.get("secondsToCloseGlobal");e&&(this._secondsToCloseGlobalTimeout=window.setTimeout(this._onPlayerClose.bind(this),1e3*e));var i=this.model.get("playerEndSeconds");i&&(this._playerEndSecondsTimeout=window.setTimeout(this._onPlayerEndSeconds.bind(this),1e3*i))}},{key:"_supportToolStateChange",value:function(t,e){e?(this.pause(),v.default.supportTool=v.default.supportTool||{},v.default.supportTool.dp=this.activeTag?this.activeTag.dp:void 0,this._stopTimer("midrollCollapse"),window.clearTimeout(this._playerTimeout),window.clearTimeout(this._secondsToCloseGlobalTimeout),window.clearTimeout(this._playerEndSecondsTimeout)):(v.default.supportTool.dp=void 0,this._initCloseTimers(),this._resetMidrollCollapseTimer(),this.resume())}},{key:"_resetViewabilityTimer",value:function(){if(this._stopTimer("viewability"),this.activeTag&&this.model.get("isPlayerViewable")&&!this.activeTag.isViewed){var t=this.model.get("traceViewabilitySeconds");this.timers.viewability=window.setTimeout(this._onViewability.bind(this),1e3*t)}}},{key:"_resetMidrollCollapseTimer",value:function(){if(this._stopTimer("midrollCollapse"),this.model.get("midrollCollapse.isActive")&&!this.activeTag&&this.model.get("isUnitViewable")){var t=this.model.get("midrollCollapse.time");this.timers.midrollCollapse=window.setTimeout(this._onPlayerClose.bind(this),1e3*t)}}},{key:"_stopTimer",value:function(t){window.clearTimeout(this.timers[t]),this.timers[t]=null}},{key:"_onViewability",value:function(){this.log.info("Fire viewability opps",this.activeTag),this.activeTag.isViewed=!0,this.oppManager.send({rs:this.activeTag.sequenceId,st:h.default.ROLL_TYPE[this.activeTag.rollType],sts:this.player.repeatCount,os:Number(this.activeTag.waterfallTagId)+1,rst:30,d:(new Date).getTime()-this.activeTag.created,dast:this.activeTag.dast,vpd:this.activeTag.pubId,vptd:this.activeTag.tagId,pv:this.player.get("player_version"),dp:a.default.crc32(this.activeTag.dp),vmt:Number(this.activeTag.isRon)||0,abt:this.model.get("abTest")})}},{key:"_onPlayerEndSeconds",value:function(){d.default.trigger("player:end")}},{key:"_onPlayerTimeout",value:function(){this.log.info("onPlayerTimeout"),this.player._pausePlayer(),a.default.firePixel(this.model.getPixel("pixels.timeout"),"Player got no impressions")}},{key:"_onPlayerClose",value:function(){this._onStop(),this._setGeneralPlayingUnitState(!1),this.options.onPlayerClose&&this.options.onPlayerClose(),this._stopTimer("viewability")}},{key:"_onInView",value:function(){this._resetViewabilityTimer(),this._resetMidrollCollapseTimer()}},{key:"_onOutOfView",value:function(){this._stopTimer("viewability"),this._stopTimer("midrollCollapse")}},{key:"_setGeneralPlayingUnitState",value:function(t){this.model.set("generalPlayingUnitState",null),this.model.set("generalPlayingUnitState",t)}},{key:"_adPaused",value:function(t){this._setGeneralPlayingUnitState(!1),this.model.get("supportTool.isOpen")&&t.dontDie()}},{key:"_adPlaying",value:function(t){this._setGeneralPlayingUnitState(!0)}},{key:"_registerListeners",value:function(){this.player.on&&(this.player.on("AdVideoComplete",this._onStop.bind(this)),this.player.on("AdVideoComplete",this._onVideoComplete.bind(this)),this.player.on("AdStopped",this._onStop.bind(this)),this.player.on("AdVideoEnd",this._onStop.bind(this)),this.player.on("AdImpression",this._onAdImpression.bind(this)),this.player.on("AdPaused",this._adPaused.bind(this)),this.player.on("AdPlaying",this._adPlaying.bind(this)),this.player.on("AdError",this.options.onAdError),this.player.on("AdClickThru",this._onAdClickThru.bind(this)),this.player.on("contentChanged",this._onContentChanged.bind(this)),this.player.on("UserInteractionPauseState",this._onPausedChanged.bind(this))),this.model.on("change:state",this._onPlaying.bind(this)),this.model.on("change:isPlayerViewable",this.changeViewability,this)}},{key:"_onPlaying",value:function(t,e){t.STATE.PLAYING==e&&this._setGeneralPlayingUnitState(!0)}},{key:"_onPausedChanged",value:function(t){this._setGeneralPlayingUnitState(!t)}},{key:"_onContentChanged",value:function(){this.log.important("OnContentChanged, current content:",this.playlist[this.contentIndex]),!this.model.get("repeat")&&this.model.get("isPlaylist")&&(this.contentIndex++,this.playlist.length<=this.contentIndex&&(this.contentIndex=0),this.playVideo({fileData:this.playlist[this.contentIndex],imageUrl:this.model.get("loaderImage"),autoplay:this.model.get("autoPlay")})),(this.model.get("repeat")||this.model.get("isPlaylist"))&&d.default.trigger("change:player:content",this.playlist[this.contentIndex])}},{key:"_onAdClickThru",value:function(){this.oppManager.send({rs:this.activeTag.sequenceId,st:h.default.ROLL_TYPE[this.activeTag.rollType],sts:this.player.repeatCount,os:Number(this.activeTag.waterfallTagId)+1,rst:33,d:(new Date).getTime()-this.activeTag.created,dast:this.activeTag.dast,vpd:this.activeTag.pubId,vptd:this.activeTag.tagId,pv:this.player.get("player_version"),dp:a.default.crc32(this.activeTag.dp),vmt:Number(this.activeTag.isRon)||0,abt:this.model.get("abTest")})}},{key:"pause",value:function(){this.player.pause(),this._setGeneralPlayingUnitState(!1),this.player.ova.pauseAd(),this._stopTimer("viewability")}},{key:"resume",value:function(){this.player.play(),this._setGeneralPlayingUnitState(!0),this.player.ova.resumeAd(),this._resetViewabilityTimer()}},{key:"close",value:function(){this.player&&(this._setGeneralPlayingUnitState(!1),this.player.closeCleanPlayer(),this.player=null)}},{key:"resize",value:function(t,e){this.player&&(this.player.resize(t,e),this.player.ova.resizeAd(t,e))}},{key:"playVideo",value:function(t){this.contentIndex=this.playlist.findIndex(function(e){return e.id===t.fileData.id}),this.player.setVideoFile([t.fileData],t.imageUrl,t.autoplay)}},{key:"mute",value:function(t){return this.unMuteTimer?(clearTimeout(this.unMuteTimer),void(this.unMuteTimer=!1)):void(this.isMuted&&!t||(this.isMuted=!0,this.volume=this.player.volume(),this.player.volume(0),this.player.mute(),this.player.ova.setAdVolume(0),this.player.ova.muteAd()))}},{key:"unMute",value:function(){return!this.unMuteTimer&&this.model.get("isThrottleUnMute")?void(this.unMuteTimer=window.setTimeout(this.unMute.bind(this),100)):(this.unMuteTimer=!1,void(this.isMuted&&(this.isMuted=!1,this.player.volume(this.volume),this.player.unMute(),this.player.ova.setAdVolume(this.volume),this.player.ova.unmuteAd())))}},{key:"changeViewability",value:function(t,e){this.player&&this.player.set&&(this.log.info("Player isViewable",e),this.player.set("isViewable",e)),e?this._onInView():this._onOutOfView()}},{key:"getCurrentContent",value:function(){return!!this.playlist&&this.playlist[this.contentIndex]}},{key:"setFdData",value:function(t){this.player&&this.player.set&&t&&this.player.set("fdScore",t)}},{key:"replay",value:function(){return this.activeVpaidWrapper&&"mp4"===this.activeVpaidWrapper.type&&(this.hasImpression=!0,this.activeVpaidWrapper.restartAd()),this.activeVpaidWrapper.type}},{key:"getAd",value:function(t){if(this.player&&this.player.getAd)return this.log.info("GetAd was called",t),this.player.getAd(t)}}]),t}();t.exports=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(6),a=n(o),l=i(2),d=n(l),u=i(24),h=n(u),c=i(49),p=n(c),f=i(78),m=n(f),g=i(79),v=n(g),y=function(){function t(e){if(r(this,t),this.log=new p.default({className:"AniView Player"}),this.aniViewId="aniViewPlayer",this.viewport=d.default.viewport,this.options=e,this.model=this.options.model,this.isMultiAd=d.default.parseBool(this.model.get("isMultiAd")),!document.getElementById(this.aniViewId)){this.isFirst=!0;var i=this.model.get("player.urls.wfRequest");this.waterfall=new v.default({wfUrl:i,wfRetries:this.model.get("retriesLWF"),secondsBW:this.model.get("secondsLWF"),isFirePiggies:this.model.get("player.settings.fire_piggies"),ronPercent:this.model.get("ronPercent"),urlParams:{cirf:this.model.get("referrer"),height:this.options.height,originId:this.model.get("originId"),pubId:this.model.get("pubId"),tagId:this.model.get("pubTagId"),width:this.options.width,noaop:this.model.get("noaop"),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),crid:this.model.get("creativeId"),isViewable:this.model.get("isPlayerViewable")}}),this._generateAVInit()}}return s(t,[{key:"_generateAVInit",value:function(){if(this._avPlaylist=[],this.isMultiAd){var t=this.model.get("player.playlist");if(0==t.length)return void this.model.listenToOnce(this.model,"change:player.playlist",this._generateAVInit.bind(this));d.default.each(t,this._generateAVPlaylist,this)}var e=this.model.get("player.urls.oppsRequest");this.oppManager=new m.default(e,{"auc-dast":this.model.get("cmDast"),pv:200,vpd:this.model.get("pubId"),vptd:this.model.get("pubTagId"),pt:d.default.crc32(this.model.get("abTest")||999)});var i={publisherId:"57a0ab940757bb8c528b4587",channelId:"57a0abaf0757bb3d2b8b45a9",width:this.model.get("width"),height:this.model.get("height"),HD:!0,autoPlay:!0,ref1:this.model.get("referrer"),loop:!0,Preroll:1,midRollTime:this.model.get("timeBetweenAds"),soundButton:!0,pauseButton:!0,closeButton:!1,logo:!1,waterfall:this._waterfallFunc.bind(this),position:this.options.targetId,contentUrl:"",vastRetry:this.model.get("vastRetry"),timeout:this.model.get("defaultTagTimeout"),loopVideo:this.model.get("components.Repeat.isActive")};this._avPlaylist&&this._avPlaylist.length>0&&(i.contentUrl=this._avPlaylist[0].url),this.log.info("AniView config",i);var n="";n="https:"===window.location.protocol?"https://aniview.hs.llnwd.net/d1/script/5/aniview.js":"http://data1.ani-view.com/script/5/aniview.js",this._downloadPlayer(n,i)}},{key:"_waterfallFunc",value:function(t){if(this.model.has("demandConfig.waterfall")){var e=this.waterfall.handleWaterfallObject(this.model.get("demandConfig.waterfall"));return void this._handleWfResponce("preroll",t,e)}this.waterfall.updateUrlParams({isViewable:this.model.get("isPlayerViewable")}),this.waterfall.callWaterfall(this._handleWfResponce.bind(this,"preroll",t),this._waterfallError.bind(this))}},{key:"_waterfallError",value:function(){this.log.error("There was an error with the waterfall!"),d.default.firePixel(this.model.getPixel("pixels.networkError"),"WF Network Error")}},{key:"_handleWfResponce",value:function(t,e,i){if(d.default.isEmpty(i.tags))return this.log.warning("The waterfall is empty"),void this.waterfall.recallWF();this.wf||(this.wf={}),this.wf.preroll=i,this.waterfall.handleWaterfallObject(this.wf.preroll);var n=this._waterfallAdapter(this.wf);e(n,"c7N60dfV90")}},{key:"_waterfallAdapter",value:function(t){var e={};e.data={},e.data.tags=[];var i=this;return d.default.each(t.preroll.tags,function(t){t.vpaidLog=d.default.createVpaidLog({version:200,model:i.model},d.default.extend({},t));var n={asid:t.id,priority:1,price:t.price};if(t.url)i._AVTagAdapter(t),n.type="vast",n.url=t.url;else{n.type="vastxml",n.url="http://";try{n.vastxml=decodeURIComponent(t.vast)}catch(e){n.vastxml=t.vast}}e.data.tags.push(n)}),this._createEventEnum(),e.data.onEvent=this._onEvent.bind(this),e}},{key:"_AVTagAdapter",value:function(t){var e={cirf:encodeURIComponent(this.model.get("cirf")),country:this.model.get("country"),domain:this.model.get("domain"),ip:this.model.get("ip"),playerHeight:Number(this.options.height),playerWidth:Number(this.options.width),referrer:encodeURIComponent(this.model.get("referrer")),vertical:this.model.get("vertical"),videoLength:"",description:"",title:"",videoUrl:"",pageUrl:this.model.get("referrer"),ua:""};if(this._avPlaylist&&this._avPlaylist.length>0){var i=this._avPlaylist[0];e.videoLength=i.vidlength,e.videoUrl=encodeURIComponent(i.fullPath),e.description=i.title,e.title=i.title}t.url=this.waterfall.replaceMacros(t.url,e),t.adCancelTimeout=1e3*Number(this.model.get("defaultTagTimeout"))}},{key:"_createEventEnum",value:function(){this.eventEnum={request:function(t){this._onAdRequest(t),this._pushEventToVpaidLog(t,"fetchVast")},bid:function(t,e){this._pushEventToVpaidLog(t,"event_adWonBid",{media:e.media,mediaType:e.type})},impression:function(t,e){this._onAdImpression(t),this._pushEventToVpaidLog(t,"event_AdImpression",{tabVis:!document.hidden,video:e.video})},firstQuartile:function(t){this._fireQuartileOpp("AdVideoFirstQuartile"),this._pushEventToVpaidLog(t,"event_AdVideoFirstQuartile",{tabVis:!document.hidden})},midPoint:function(t){this._fireQuartileOpp("AdVideoMidpoint"),this._pushEventToVpaidLog(t,"event_AdVideoMidpoint",{tabVis:!document.hidden})},thirdQuartile:function(t){this._fireQuartileOpp("AdVideoThirdQuartile"),this._pushEventToVpaidLog(t,"event_AdVideoThirdQuartile",{tabVis:!document.hidden})},complete:function(t){this._fireQuartileOpp("AdVideoComplete"),this._pushEventToVpaidLog(t,"event_AdVideoComplete",{tabVis:!document.hidden}),this._onAdEnded()},vpaidGeneralError:function(t,e,i){this._reportError(t,"vpaidGeneralError",i,e)},vpaidLoadError:function(t,e,i){this._reportError(t,"vpaidLoadError",i,e)},vpaidLoadTimeout:function(t,e,i){this._reportError(t,"vpaidLoadTimeout",i,e)},vpaidInitAdError:function(t,e,i){this._reportError(t,"vpaidInitAdError",i,e)},vpaidInitAdTimeout:function(t,e,i){this._reportError(t,"vpaidInitAdTimeout",i,e)},vpaidStartAdError:function(t,e,i){this._reportError(t,"vpaidStartAdError",i,e)},vpaidStartAdTimeout:function(t,e,i){this._reportError(t,"vpaidStartAdTimeout",i,e)},vpaidPlayError:function(t,e,i){this._reportError(t,"vpaidPlayError",i,e)},click:function(t,e,i){}}}},{key:"_onEvent",value:function(t,e,i){this.eventEnum[t]&&this.eventEnum[t].call(this,parseInt(e),i)}},{key:"_generateAVPlaylist",value:function(t){var e=d.default.extend({},t);e.url=t.fullPath||t.url,e.id=t.filename,e.categories=this.model.get("category"),this._avPlaylist.push(e)}},{key:"_downloadPlayer",value:function(t,e){var i=document.createElement("script");i.src=t,i.onload=function(){this.player=new aniviewPlayer;var t=this;this.player.onPlay=function(e,i,n){t._preventPropagation(),t.isFirst&&t.options.onFirstPlay&&(t.isFirst=!1,t._onFirstPlay()),t._onAdPlaying()},this.player.onReady=function(e,i,n){t._pushEventToVpaidLog(n,"event_AdLoaded",{tabVis:!document.hidden})},this.player.onPause=function(){t._pushEventToVpaidLog(t.activeTag.id,"event_AdPaused"),t._onAdPaused()},this.player.onResume=function(){t._pushEventToVpaidLog(t.activeTag.id,"event_AdPlaying"),t._onAdPlaying()},this.player.onClick=function(){d.default.firePixel(this.model.getPixel("pixels.clickthrough"),"Click Through")},this.player.play(e),this.model.on("change:isPlayerViewable",this.changeViewability,this)}.bind(this),document.getElementsByTagName("head")[0].appendChild(i)}},{key:"_fireOpp",value:function(t){return this.activeTag?void this.oppManager.send({rs:this.activeTag.id,st:h.default.ROLL_TYPE[this.activeTag.rollType],os:this.activeTag.seqNum,rst:t,d:Date.now()-this.activeTag.requestTime,dast:this.activeTag.dast,impid:this.activeTag.tryId,vmt:Number(this.activeTag.isRon)}):void this.log.info("There is no active unit! Cannot fire opp.")}},{key:"_fireQuartileOpp",value:function(t,e){if(this.log.debug("on"+t,e),!this.activeTag){if(!e)return void this.log.warning("on"+t+" tag is undefined");this.log.info("Quartile "+t+" without active tag"),this._createActiveTag(e)}this._fireOpp(this.oppManager.pixelType[t])}},{key:"_createActiveTag",value:function(t){if(!t)return this.activeTag=null,!1;var e=this._getTagById(t);return this.activeTag=e,this.activeTag.tryId=Date.now(),!0}},{key:"_getTagById",value:function(t){var e=d.default.find(this.wf.preroll.tags,function(e){return e.id===t});return d.default.extend({},e)}},{key:"_onAdImpression",value:function(t){if(this.log.debug("onAdImpression",t),!this.activeTag){if(!t)return void this.log.warning("onAdImpression Tag is undefined");this.log.info("onAdImpression without active tag"),this._createActiveTag(t)}window.clearTimeout(this.activeTag.tagTimeoutTimer),d.default.firePixel(this.activeTag.pixel,"Tag Pixel"),this._fireOpp(this.oppManager.pixelType.tagImpression),this._resetViewabilityTimer(),this.options.onAdImpression()}},{key:"pause",value:function(){this.player&&(this.isPaused=!0,this.player.pause())}},{key:"resume",value:function(){this.player&&(this.isPaused=!1,this.player.resume())}},{key:"close",value:function(){this.player&&(this.playerClosed=!0,this.player.contentReadyToPlay=!1,this.player.close(),this._fireOpp(this.oppManager.pixelType.playerClosed),this._closeAllVpaids(),this.activeTag=null)}},{key:"resize",value:function(t,e){if(this.player){var i=(0,a.default)("#"+this.options.targetId);i.width(t),i.height(e);var n=-(t-32),r=(0,a.default)("#videoContent"),s=(0,a.default)("#videoAd"),o=(0,a.default)("#playerDiv");o.width(t),o.height(e),s.width(t),s.height(e),r.width(t),r.height(e),i.find("#aniVideoCanvas").width(t),i.find("#aniVideoCanvas").height(e),(0,a.default)("#bottomPlayer").width(t),(0,a.default)("#soundButton").css({right:n})}}},{key:"mute",value:function(){this.player.mute()}},{key:"unMute",value:function(){this.player.unmute()}},{key:"setFdData",value:function(t){}},{key:"_onAdRequest",value:function(t){return this.log.debug("onAdRequest",t),t?(this._createActiveTag(t),this.activeTag.requestTime=Date.now(),this._fireOpp(this.oppManager.pixelType.tagStarted),void(!this.activeTag.tagTimeoutTimer&&this.activeTag.adCancelTimeout&&(this.activeTag.tagTimeoutTimer=window.setTimeout(this._onAdLoadTimeout.bind(this),this.activeTag.adCancelTimeout)))):void this.log.warning("onAdRequest Tag is undefined")}},{key:"_onAdLoadTimeout",value:function(){this.log.debug("onAdLoadTimeout"),this._fireOpp(this.oppManager.pixelType.tagTimeout),this.activeTag=null}},{key:"_onAdPaused",value:function(){this.log.debug("onAdPaused"),this._stopViewabilityTimer()}},{key:"_onAdPlaying",value:function(){this.log.debug("onAdPlaying"),this._resetViewabilityTimer()}},{key:"_onAdEnded",value:function(){this.log.debug("onAdEnded"),
this.options.onAdEnded(),this._stopViewabilityTimer(),this._closeAllVpaids(),this.activeTag=null}},{key:"_onFirstPlay",value:function(){this.options.onFirstPlay&&this.options.onFirstPlay()}},{key:"changeViewability",value:function(t,e){e?this._resetViewabilityTimer():this._stopViewabilityTimer()}},{key:"_stopViewabilityTimer",value:function(){this.viewabilityTimer&&(window.clearTimeout(this.viewabilityTimer),this.viewabilityTimer=null)}},{key:"_resetViewabilityTimer",value:function(){if(this._stopViewabilityTimer(),this.activeTag&&this.model.get("isPlayerViewable")&&!this.activeTag.isViewed){var t=this.model.get("traceViewabilitySeconds");this.viewabilityTimer=window.setTimeout(this._onViewability.bind(this),1e3*t)}}},{key:"_onViewability",value:function(){this.activeTag.isViewed=!0,this._fireOpp(this.oppManager.pixelType.viewability)}},{key:"_onAdError",value:function(t){if(this.log.debug("onAdError",t),!this.activeTag){if(!t)return void this.log.warning("onAdError Tag is undefined");this.log.info("onAdError without active tag"),this._createActiveTag(t)}window.clearTimeout(this.activeTag.tagTimeoutTimer),this._fireOpp(this.oppManager.pixelType.tagError),this.options.onAdError(),this.activeTag=null}},{key:"_preventPropagation",value:function(){(0,a.default)(this.player.link).click(function(){return!1})}},{key:"_closeAllVpaids",value:function(){var t=this;d.default.each(this.wf.preroll.tags,function(e){t._pushEventToVpaidLog(e.id,"adStopped"),e.vpaidLog.saveToDb()})}},{key:"_reportError",value:function(t,e,i,n){var r={tabVis:!document.hidden};i&&(r.params=i),n&&(r.errorDetails=n),this._pushEventToVpaidLog(t,e,r);var s=this._getTagById(t);this._onAdError(s),s&&s.vpaidLog&&s.vpaidLog.saveToDb()}},{key:"_pushEventToVpaidLog",value:function(t,e,i){var n=this._getTagById(t);n&&n.vpaidLog&&n.vpaidLog.push(e,i)}}]),t}();t.exports=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(6),s=n(r),o=i(2),a=n(o),l=i(28),d=n(l),u=i(49),h=n(u),c=i(83),p=n(c);t.exports=d.default.View.extend({id:"_cm-css-reset",initialize:function(t){this.options=t,this.log=new h.default({unitType:"PlayerAPI",className:"VideoView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.log.debug("Init"),this.playlistIndex=0,this.render(),this.model.get("isMobile")&&this.createCanvas(),this.bindEvents(),this.addSource()},render:function(){this.container=(0,s.default)("#"+this.options.targetId),this.video=document.createElement("video"),this.video.height=this.model.get("height"),this.video.width=this.model.get("width"),this.model.get("autoPlay")&&this.video.setAttribute("autoplay","true"),this.model.get("isRepeat")&&this.video.setAttribute("loop","true"),this.video.muted="on"!==this.model.get("volume"),this.video.volume="off"!==this.model.get("volume")?40:0,this.video.quartile=0,this.container.append(this.video)},addSource:function(){var t=this.model.get("player.playlist")[this.playlistIndex];if(this.canvas)return void this.video.setAttribute("src",t.url);var e=document.createElement("source");e.setAttribute("src",t.url),e.setAttribute("type",t.type),e.addEventListener("error",this._onPlayerError.bind(this,e,"sourceError")),this.video.appendChild(e),this.video.load()},bindEvents:function(){this.video.addEventListener("canplay",this._onPlayerReady.bind(this)),this.video.addEventListener("timeupdate",this._onTimeUpdate.bind(this)),this.canvas||this.video.addEventListener("error",this._onPlayerError.bind(this,this.video,"videoError")),this.video.addEventListener("ended",this._onPlayerEnd.bind(this))},createCanvas:function(){this.canvas=new p.default(this.video,this,this.model.get("autoPlay"),{},this.model),this.video.style.display="none"},_onPlayerReady:function(){this.log.info("onPlayerReady"),this.options.onPlayerReady(),this.canvas&&(this.timeUpdateInterval=window.setInterval(this._onTimeUpdate.bind(this),500))},_onTimeUpdate:function(){if(0!=this.video.duration){var t=parseInt(this.video.currentTime);t==parseInt(this.video.duration/4)&&0==this.video.quartile?(this.video.quartile=1,a.default.firePixelConditional(this.model.get("isFirePixel"),this.model.getPixel("pixels.quarterly1"),"First Quarterly"),d.default.trigger("quarterly",this.video.quartile)):t==parseInt(this.video.duration/2)&&1==this.video.quartile?(this.video.quartile=2,a.default.firePixelConditional(this.model.get("isFirePixel"),this.model.getPixel("pixels.quarterly2"),"Midpoint"),d.default.trigger("quarterly",this.video.quartile)):t==parseInt(.75*this.video.duration)&&2==this.video.quartile?(this.video.quartile=3,a.default.firePixelConditional(this.model.get("isFirePixel"),this.model.getPixel("pixels.quarterly3"),"Third Quarterly"),d.default.trigger("quarterly",this.video.quartile)):t==parseInt(this.video.duration)&&3==this.video.quartile&&(this.isCompleted=!0,a.default.firePixelConditional(this.model.get("isFirePixel"),this.model.getPixel("pixels.complete"),"Complete"),d.default.trigger("complete"),this.video.quartile=0,this.log.debug("Complete"))}},_onPlayerError:function(t,e){this.log.error("Player encountered an error",arguments),d.default.trigger("error",t,e)},_onPlayerEnd:function(){this.model.get("isRepeat")||(this.log.debug("video ended"),this.options.onPlayerStop(),window.clearInterval(this.timeUpdateInterval))},pause:function(){this.log.debug("Pause"),this.video.pause()},resume:function(){this.log.debug("Resume"),this.video.play()},close:function(){this.log.debug("Close")},resize:function(t,e){var i=a.default.getVideoHeight(t);i<=e?e=i:t=a.default.getVideoWidth(e),this.video.width=t,this.video.height=e,this.canvas&&this.canvas.onResize()},playVideo:function(t){},mute:function(t){},unMute:function(){},getCurrentContent:function(){return this.model.get("player.playlist")[this.playlistIndex]},setFdData:function(t){},replay:function(){}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(84),o=function(){function t(e,i,r,s,o){n(this,t),e.removeAttribute("autoplay"),this.video=e,this.createCanvas(),this.store=o,this.modifyVideo(e),this.owner=i,this.shouldAutoPlay=r||!1,this.canvasCss=s||{},this.bypass=!1,this.clntRedirRslvWhiteList=this.store.get("mpgclrslv")||[],this.ready=!1,e.setAttribute("muted","")}return r(t,[{key:"backToVideoTag",value:function(){var t=this;if(!this.bypass&&this.src){this.bypass=!0;var e=this.jsmpeg.currentTime,i=this.video.style,n=this.video.parentElement,r=parseInt(n.style.zIndex);this.jsmpeg.stop(),this.jsmpeg=void 0,this.newVid=n.appendChild(document.createElement("video")),this.newVid.className="mc-loud-video",this.newVid.setAttribute("playsinline",""),this.newVid.setAttribute("autoplay",""),this.newVid.style.height=i.height,this.newVid.style.width=i.width,this.newVid.style.top=i.top,this.newVid.style.left=i.left,this.newVid.style.zIndex=r+1,this.newVid.src=this.src,this.newVid.volume=.7,this.newVid.addEventListener("ended",function(e){t.dispatch("ended")},!1),this.newVid.currentTime=e,this.newVid.play().then(function(){t.newVid.currentTime=e,t.canvas.style.display="none",t.video.style.display="none"})}}},{key:"mpegFinish",value:function(){this.dispatch("ended")}},{key:"onLoad",value:function(){var t=this;setTimeout(function(){t.ready=!0,t._play(),t.dispatch("canplay")},0)}},{key:"createCanvas",value:function(){var t=this,e=document.createElement("canvas");e.className="mc-video",localStorage.mpgCanavs&&localStorage.mpgCanavs.showBorder&&(e.style.border="4px solid pink"),this.canvas=this.video.parentElement.appendChild(e),this.video.parentElement.className+=" mpegcnv",this.canvas.addEventListener("click",function(e){t.dispatch("click",e)})}},{key:"onResize",value:function(){this.jsmpeg&&this.canvas&&this.jsmpeg.fitInParent(this.canvas)}},{key:"hookProp",value:function(t,e,i,n){var r="alt_"+e;t.hasOwnProperty(r)||(t[r]="",Object.defineProperty(t,e,{get:function(){var t=i?i():this[r];return t},set:function(i){this[r]=i,n&&n(i)&&t.setAttribute(e,i)}}))}},{key:"hookMethod",value:function(t,e,i){this.hooks||(this.hooks=[]),this.hooks[e]=t[e];var n=this;t[e]=function(){var t={};if(i(arguments,t)){var r=n.hooks[e].apply(this,arguments);return t.res?t.res:r}}}},{key:"dispatch",value:function(t,e){var i=e||new Event(t);this.video.dispatchEvent(i)}},{key:"errHndlr",value:function(t){this.owner&&(this.owner.vpaidLog&&this.owner.vpaidLog.push("jsmpegError",t),this.owner._onPlayerError&&this.owner._onPlayerError(t))}},{key:"isUrlInRslvWhiteList",value:function(t){if(!this.clntRedirRslvWhiteList.length)return!0;for(var e=0;e<this.clntRedirRslvWhiteList.length;++e)if(t.indexOf(this.clntRedirRslvWhiteList[e])>-1)return!0;return!1}},{key:"resolveWhitelistRedir",value:function(t,e){if(this.isUrlInRslvWhiteList(t)){var i=new XMLHttpRequest;i.open("GET",t),i.onreadystatechange=function(){var i=this.responseURL||t;e&&(e(i),e=void 0,this.abort())},i.send()}else e(t)}},{key:"setSrc",value:function(t){if(t=t.trim()){var e=this.store.get("cnvsldrt"),i=parseInt(this.store.get("width")),n=parseInt(this.store.get("height")),r={loadeReadyRate:e,canvas:this.canvas,centerVertically:!0,autoplay:this.shouldAutoPlay,loop:this.video.getAttribute("loop"),pcy:n,pcx:i,onload:this.onLoad.bind(this),errHndlr:this.errHndlr.bind(this),onfinished:this.mpegFinish.bind(this),progressive:!0,canvasCss:this.canvasCss,seekable:!0};return this.jsmpeg=new s(t,r,this),!1}}},{key:"_play",value:function(){this.ready&&(this.jsmpeg.play(),this.dispatch("playing"),this.status="PLAYING",this._render())}},{key:"_pause",value:function(){this.status="PAUSED",this._render(),this.newVid?this.newVid.pause():this.jsmpeg?this.jsmpeg.pause():""}},{key:"modifyVideo",value:function(t){var e=this,i=this;t._vidSetAttr=t.setAttribute,t.setAttribute=function(i,n){return"src"===i?void e.setSrc(n):t._vidSetAttr(i,n)},this.hookMethod(t,"play",function(){return i._play(),i.dispatch("playing"),!1}),this.hookMethod(t,"pause",function(){return i._pause(),!0}),this.hookMethod(t,"stop",function(){return i.jsmpeg.stop(),!0}),this.hookProp(t,"src",null,this.setSrc.bind(this)),this.hookProp(this.video,"volume",null,function(t){return!0}),this.hookProp(t,"duration",function(){var t=i.newVid||i.jsmpeg;return t?t.duration:0},null),this.hookProp(t,"currentTime",function(){var t=i.newVid||i.jsmpeg;return t?t.currentTime:0},null)}},{key:"_render",value:function(){this.newVid||this.canvas}},{key:"hide",value:function(){this.canvas.style.display="none",this._render()}},{key:"show",value:function(){this.canvas.style.display="block",this._render()}},{key:"removeDomMember",value:function(t){var e=t.parentNode;e.removeChild(t)}},{key:"destroy",value:function(){this.jsmpeg=void 0;var t=this._events;for(var e in t)this.removeAllListeners(e);this.removeDomMember(this.canvas),this.canvas=void 0}}]),t}();e.default=o},function(t,e,i){"use strict";var n=i(85),r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),s=function(t,e,i,n){e=e||{},this.host=i,this.progressive=e.progressive!==!1,this.benchmark=!!e.benchmark,this.canvas=e.canvas||document.createElement("canvas"),this.autoplay=!!e.autoplay,this.wantsToPlay=this.autoplay,this.loop=!!e.loop,this.seekable=!!e.seekable,this.externalLoadCallback=e.onload||null,this.externalDecodeCallback=e.ondecodeframe||null,this.externalFinishedCallback=e.onfinished||null,this.centerVertically=e.centerVertically||null,this.canvasCss=e.canvasCss||{},this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.fillArray(this.zeroBlockData,0),this.receiveStarted=!1,this.loadeReadyRate=e.loadeReadyRate,this.url=t,this.pcx=e.pcx,this.pcy=e.pcy,this.errHndlr=e.errHndlr||null,n&&!e.forceCanvas2D&&this.initWebGL()?this.renderFrame=this.renderFrameGL:(this.canvasContext=this.canvas.getContext("2d"),this.renderFrame=this.renderFrame2D),t instanceof WebSocket?(this.client=t,this.client.onopen=this.initSocketClient.bind(this)):this.load(t)};s.prototype.waitForIntraFrame=!0,s.prototype.socketBufferSize=524288,s.prototype.initSocketClient=function(){this.buffer=new O(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new O(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},s.prototype.decodeSocketHeader=function(t){t[0]===o.charCodeAt(0)&&t[1]===o.charCodeAt(1)&&t[2]===o.charCodeAt(2)&&t[3]===o.charCodeAt(3)&&(this.width=256*t[4]+t[5],this.height=256*t[6]+t[7],this.initBuffers())},s.prototype.receiveSocketMessage=function(t){var e=new Uint8Array(t.data);this.sequenceStarted||this.decodeSocketHeader(e);var i=this.buffer,n=this.nextPictureBuffer;n.writePos+e.length>n.length&&(n.lastWriteBeforeWrap=n.writePos,n.writePos=0,n.index=0),n.bytes.set(e,n.writePos),n.writePos+=e.length;for(var s=0;;){if(s=n.findNextMPEGStartCode(),s===O.NOT_FOUND||n.index>>3>n.writePos)return void(n.index=Math.max(n.writePos-3,0)<<3);if(s===I)break}if(this.waitForIntraFrame)return n.advance(10),void(n.getBits(3)===T&&(this.waitForIntraFrame=!1,n.chunkBegin=n.index-13>>3));this.currentPictureDecoded||this.decodePicture(a);var o=n.index>>3;if(o>n.chunkBegin)i.bytes.set(n.bytes.subarray(n.chunkBegin,o)),i.writePos=o-n.chunkBegin;else{i.bytes.set(n.bytes.subarray(n.chunkBegin,n.lastWriteBeforeWrap));var l=n.lastWriteBeforeWrap-n.chunkBegin;i.bytes.set(n.bytes.subarray(0,o),l),i.writePos=o+l}i.index=0,n.chunkBegin=o,this.currentPictureDecoded=!1,r(this.scheduleDecoding.bind(this),this.canvas)},s.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},s.prototype.isRecording=!1,s.prototype.recorderWaitForIntraFrame=!1,s.prototype.recordedFrames=0,s.prototype.recordedSize=0,s.prototype.didStartRecordingCallback=null,s.prototype.recordBuffers=[],s.prototype.canRecord=function(){return this.client&&this.client.readyState===this.client.OPEN},s.prototype.startRecording=function(t){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=t||null,this.recordedFrames=0,this.recordedSize=0;var e=this.width>>4,i=(15&this.width)<<4|this.height>>8,n=255&this.height;this.recordBuffers.push(new Uint8Array([0,0,1,179,e,i,n,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},s.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!==T)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},s.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},s.prototype.stopRecording=function(){var t=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,t},s.prototype.intraFrames=[],s.prototype.currentFrame=-1,s.prototype.currentTime=0,s.prototype.frameCount=0,s.prototype.duration=0,s.prototype.progressiveMinSize=131072,s.prototype.fetchReaderPump2=function(t){var e=this;t.read(function(i){e.receiveStarted=!0,e.fetchReaderReceive(t,i)})},s.prototype.fetchReaderReceive=function(t,e){if(e.done){if(this.seekable){var i=this.buffer.index;this.collectIntraFrames(),this.buffer.index=i}return this.duration=this.frameCount/this.pictureRate,void(this.lastFrameIndex=this.buffer.writePos<<3)}if(this.buffer.bytes.set(e.value,this.buffer.writePos),this.buffer.writePos+=e.value.byteLength,this.lastFrameIndex=this.findLastPictureStartCode(),!this.sequenceStarted&&this.buffer.writePos>=this.progressiveMinSize){this.findStartCode(x),this.firstSequenceHeader=this.buffer.index;var n=this.decodeSequenceHeader();if(!n)return void(this.errHndlr&&this.errHndlr({type:"decodeFailed",width:this.width,height:this.height,url:this.url}));this.nextFrame(),this.autoplay&&this.play()}this.externalLoadCallback&&(this.loadeReadyRate?this.buffer.writePos>this.buffer.length/this.loadeReadyRate&&(this.externalLoadCallback(this),this.externalLoadCallback=void 0):(this.externalLoadCallback(this),this.externalLoadCallback=void 0)),this.fetchReaderPump2(t)},s.prototype.findLastPictureStartCode=function(){for(var t=this.buffer.bytes,e=this.buffer.writePos;e>3;e--)if(t[e]==I&&1==t[e-1]&&0==t[e-2]&&0==t[e-3])return e-3<<3;return 0},s.prototype.load=function(t){this.url=t;var e=this;this.progressive&&n.streamFetch&&(this.progXhr=n.streamFetch(t,function(t,i){return t===-1?void(e.errHndlr&&e.errHndlr({xhrStatus:i})):(e.buffer=new O(new ArrayBuffer(t)),e.buffer.writePos=0,void e.fetchReaderPump2(i))}))},s.prototype.loadCallback=function(t){this.buffer=new O(t),this.seekable&&(this.collectIntraFrames(),this.buffer.index=0),this.findStartCode(x),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.duration=this.frameCount/this.pictureRate,this.nextFrame(),this.autoplay&&this.play()},s.prototype.collectIntraFrames=function(){var t;for(t=0;this.findStartCode(I)!==O.NOT_FOUND;t++)this.buffer.advance(10),this.buffer.getBits(3)===T&&this.intraFrames.push({frame:t,index:this.buffer.index-13});this.frameCount=t},s.prototype.seekToFrame=function(t,e){if(t<0||t>=this.frameCount||!this.intraFrames.length)return!1;for(var i=null,n=0;n<this.intraFrames.length&&this.intraFrames[n].frame<=t;n++)i=this.intraFrames[n];if(this.buffer.index=i.index,this.currentFrame=i.frame-1,e){for(var r=i.frame;r<t;r++)this.decodePicture(a),this.findStartCode(I);this.currentFrame=t-1}return this.decodePicture(),!0},s.prototype.seekToTime=function(t,e){this.seekToFrame(t*this.pictureRate|0,e)},s.prototype.play=function(){this.playing||(this.targetTime=this.now(),this.playing=!0,this.wantsToPlay=!0,this.scheduleNextFrame())},s.prototype.pause=function(){this.playing=!1,this.wantsToPlay=!1},s.prototype.stop=function(){this.currentFrame=-1,this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.playing=!1,this.client&&(this.client.close(),this.client=null),this.wantsToPlay=!1,this.progXhr&&this.progXhr.abort()},s.prototype.readCode=function(t){var e=0;do e=t[e+this.buffer.getBits(1)];while(e>=0&&0!==t[e]);return t[e+2]},s.prototype.findStartCode=function(t){for(var e=0;;)if(e=this.buffer.findNextMPEGStartCode(),e===t||e===O.NOT_FOUND)return e;return O.NOT_FOUND},s.prototype.fillArray=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i]=e},s.prototype.pictureRate=30,s.prototype.lateTime=0,s.prototype.firstSequenceHeader=0,s.prototype.targetTime=0,s.prototype.benchmark=!1,s.prototype.benchFrame=0,s.prototype.benchDecodeTimes=0,s.prototype.benchAvgFrameTime=0,s.prototype.now=function(){return window.performance?window.performance.now():Date.now()},s.prototype.nextFrame=function(){if(this.buffer&&this.receiveStarted)for(var t=this.now();;){var e=this.buffer.findNextMPEGStartCode();if(e===x)this.decodeSequenceHeader();else{if(e===I)return this.progressive&&this.buffer.index>=this.lastFrameIndex?(this.playing=!1,void this.errHndlr({reason:"starved",currentTime:this.currentTime})):(this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.benchDecodeTimes+=this.now()-t,this.canvas);if(e===O.NOT_FOUND)return this.stop(),this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null}}},s.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var t=Math.max(0,1e3/this.pictureRate-this.lateTime);this.targetTime=this.now()+t,this.benchmark?(this.benchFrame++,this.benchFrame>=120&&(this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame,this.benchFrame=0,this.benchDecodeTimes=0,window.console&&console.log("Average time per frame:",this.benchAvgFrameTime,"ms")),setTimeout(this.nextFrame.bind(this),0)):t<18?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),t)},s.prototype.scheduleAnimation=function(){r(this.nextFrame.bind(this),this.canvas)},s.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.width<1||this.height<1)return!1;this.buffer.advance(4),this.pictureRate=l[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers();var t;if(this.buffer.getBits(1)){for(t=0;t<64;t++)this.customIntraQuantMatrix[d[t]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(t=0;t<64;t++)this.customNonIntraQuantMatrix[d[t]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}return!0},s.prototype.fitInParent=function(t){t.style.position="relative";var e=t.parentElement,i=e.clientWidth||this.pcx,n=e.clientHeight||this.pcy,r=Math.min(i/t.clientWidth,n/t.clientHeight),s=t.clientWidth*r,o=t.clientHeight*r;t.style.width=s+"px",t.style.height=o+"px",t.style.left=0,t.style.top=0,i>s?t.style.left=(i-s)/2+"px":n>o&&(t.style.top=(n-o)/2+"px")},s.prototype.initBuffers=function(){if(this.intraQuantMatrix=u,this.nonIntraQuantMatrix=h,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var t=window.Uint8ClampedArray||window.Uint8Array;if(window.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new t(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new t(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new t(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new t(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new t(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new t(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.aspect=this.height/this.width,this.canvas.width=this.width,this.canvas.height=this.height,this.centerVertically&&this.fitInParent(this.canvas),this.canvasCss)for(var e in this.canvasCss)this.canvas.style[e]=this.canvasCss[e];this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,this.width,this.height)):(this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.fillArray(this.currentRGBA.data,255))}},s.prototype.currentY=null,s.prototype.currentCr=null,s.prototype.currentCb=null,s.prototype.currentRGBA=null,s.prototype.pictureCodingType=0,s.prototype.forwardY=null,s.prototype.forwardCr=null,s.prototype.forwardCb=null,s.prototype.fullPelForward=!1,s.prototype.forwardFCode=0,s.prototype.forwardRSize=0,s.prototype.forwardF=0,s.prototype.decodePicture=function(t){if(this.currentFrame++,this.currentTime=this.currentFrame/this.pictureRate,this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=A)){if(this.pictureCodingType===E){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0===this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var e=0;do e=this.buffer.findNextMPEGStartCode();while(e===k||e===S);for(;e>=C&&e<=P;)this.decodeSlice(255&e),e=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),t!==a&&(this.renderFrame(),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType===T||this.pictureCodingType===E){var i=this.forwardY,n=this.forwardY32,r=this.forwardCr,s=this.forwardCr32,o=this.forwardCb,l=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=i,this.currentY32=n,this.currentCr=r,this.currentCr32=s,this.currentCb=o,this.currentCb32=l}}},s.prototype.YCbCrToRGBA=function(){for(var t,e,i,n,r,s=this.currentY,o=this.currentCb,a=this.currentCr,l=this.currentRGBA.data,d=0,u=this.codedWidth,h=this.codedWidth+(this.codedWidth-this.width),c=0,p=this.halfWidth-(this.width>>1),f=0,m=4*this.width,g=4*this.width,v=this.width>>1,y=this.height>>1,w=0;w<y;w++){for(var b=0;b<v;b++){t=o[c],e=a[c],c++,i=e+(103*e>>8)-179,n=(88*t>>8)-44+(183*e>>8)-91,r=t+(198*t>>8)-227;var _=s[d++],T=s[d++];l[f]=_+i,l[f+1]=_-n,l[f+2]=_+r,l[f+4]=T+i,l[f+5]=T-n,l[f+6]=T+r,f+=8;var E=s[u++],A=s[u++];l[m]=E+i,l[m+1]=E-n,l[m+2]=E+r,l[m+4]=A+i,l[m+5]=A-n,l[m+6]=A+r,m+=8}d+=h,u+=h,f+=g,m+=g,c+=p}},s.prototype.renderFrame2D=function(){this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0)},s.prototype.gl=null,s.prototype.program=null,s.prototype.YTexture=null,s.prototype.CBTexture=null,s.prototype.CRTexture=null,s.prototype.createTexture=function(t,e){var i=this.gl,n=i.createTexture();return i.bindTexture(i.TEXTURE_2D,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.uniform1i(i.getUniformLocation(this.program,e),t),n},s.prototype.compileShader=function(t,e){var i=this.gl,n=i.createShader(t);if(i.shaderSource(n,e),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw this.errHndlr({glGetShaderParameter:"error"}),new Error(i.getShaderInfoLog(n));return n},s.prototype.initWebGL=function(){var t;try{t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(t){return!1}if(!t)return!1;if(this.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.program=t.createProgram(),t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,V)),t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,D)),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw this.errHndlr({glGetProgramInfoLog:"error"}),new Error(t.getProgramInfoLog(this.program));t.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var e=t.getAttribLocation(this.program,"vertex");return t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),this.loadingProgram=t.createProgram(),t.attachShader(this.loadingProgram,this.compileShader(t.VERTEX_SHADER,V)),t.attachShader(this.loadingProgram,this.compileShader(t.FRAGMENT_SHADER,B)),t.linkProgram(this.loadingProgram),t.useProgram(this.loadingProgram),e=t.getAttribLocation(this.loadingProgram,"vertex"),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),!0},s.prototype.renderFrameGL=function(){var t=this.gl,e=new Uint8Array(this.currentY.buffer),i=new Uint8Array(this.currentCr.buffer),n=new Uint8Array(this.currentCb.buffer);t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.YTexture),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,this.codedWidth,this.height,0,t.LUMINANCE,t.UNSIGNED_BYTE,e),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.CBTexture),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,this.halfWidth,this.height/2,0,t.LUMINANCE,t.UNSIGNED_BYTE,i),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,this.CRTexture),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,this.halfWidth,this.height/2,0,t.LUMINANCE,t.UNSIGNED_BYTE,n),t.drawArrays(t.TRIANGLE_STRIP,0,4)},s.prototype.quantizerScale=0,s.prototype.sliceBegin=!1,s.prototype.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},s.prototype.macroblockAddress=0,s.prototype.mbRow=0,s.prototype.mbCol=0,s.prototype.macroblockType=0,s.prototype.macroblockIntra=!1,s.prototype.macroblockMotFw=!1,s.prototype.motionFwH=0,s.prototype.motionFwV=0,s.prototype.motionFwHPrev=0,s.prototype.motionFwVPrev=0,s.prototype.decodeMacroblock=function(){for(var t=0,e=this.readCode(p);34===e;)e=this.readCode(p);for(;35===e;)t+=33,e=this.readCode(p);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType===E&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(F[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!==(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var i=0!==(2&this.macroblockType)?this.readCode(v):this.macroblockIntra?63:0,n=0,r=32;n<6;n++)0!==(i&r)&&this.decodeBlock(n),r>>=1},s.prototype.decodeMotionVectors=function(){var t,e,i=0;this.macroblockMotFw?(t=this.readCode(y),0!==t&&1!==this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,t<0&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),t=this.readCode(y),0!==t&&1!==this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,t<0&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType===E&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},s.prototype.copyMacroblock=function(t,e,i,n,r){var s,o,a,l,d,u,h,c,p,f=this.currentY32,m=this.currentCb32,g=this.currentCr32;s=this.codedWidth,o=s-16,a=t>>1,l=e>>1,d=1===(1&t),u=1===(1&e),h=((this.mbRow<<4)+l)*s+(this.mbCol<<4)+a,c=this.mbRow*s+this.mbCol<<2,p=c+(s<<2);var v,y,w,b;if(d)if(u)for(;c<p;){for(y=i[h]+i[h+s],h++,v=0;v<4;v++)w=i[h]+i[h+s],h++,b=y+w+2>>2&255,y=i[h]+i[h+s],h++,b|=y+w+2<<6&65280,w=i[h]+i[h+s],h++,b|=y+w+2<<14&16711680,y=i[h]+i[h+s],h++,b|=y+w+2<<22&4278190080,f[c++]=b;c+=o>>2,h+=o-1}else for(;c<p;){for(y=i[h++],v=0;v<4;v++)w=i[h++],b=y+w+1>>1&255,
y=i[h++],b|=y+w+1<<7&65280,w=i[h++],b|=y+w+1<<15&16711680,y=i[h++],b|=y+w+1<<23&4278190080,f[c++]=b;c+=o>>2,h+=o-1}else if(u)for(;c<p;){for(v=0;v<4;v++)b=i[h]+i[h+s]+1>>1&255,h++,b|=i[h]+i[h+s]+1<<7&65280,h++,b|=i[h]+i[h+s]+1<<15&16711680,h++,b|=i[h]+i[h+s]+1<<23&4278190080,h++,f[c++]=b;c+=o>>2,h+=o}else for(;c<p;){for(v=0;v<4;v++)b=i[h],h++,b|=i[h]<<8,h++,b|=i[h]<<16,h++,b|=i[h]<<24,h++,f[c++]=b;c+=o>>2,h+=o}s=this.halfWidth,o=s-8,a=t/2>>1,l=e/2>>1,d=1===(t/2&1),u=1===(e/2&1),h=((this.mbRow<<3)+l)*s+(this.mbCol<<3)+a,c=this.mbRow*s+this.mbCol<<1,p=c+(s<<1);var _,T,E,A,x,C;if(d)if(u)for(;c<p;){for(_=n[h]+n[h+s],A=r[h]+r[h+s],h++,v=0;v<2;v++)T=n[h]+n[h+s],x=r[h]+r[h+s],h++,E=_+T+2>>2&255,C=A+x+2>>2&255,_=n[h]+n[h+s],A=r[h]+r[h+s],h++,E|=_+T+2<<6&65280,C|=A+x+2<<6&65280,T=n[h]+n[h+s],x=r[h]+r[h+s],h++,E|=_+T+2<<14&16711680,C|=A+x+2<<14&16711680,_=n[h]+n[h+s],A=r[h]+r[h+s],h++,E|=_+T+2<<22&4278190080,C|=A+x+2<<22&4278190080,g[c]=E,m[c]=C,c++;c+=o>>2,h+=o-1}else for(;c<p;){for(_=n[h],A=r[h],h++,v=0;v<2;v++)T=n[h],x=r[h++],E=_+T+1>>1&255,C=A+x+1>>1&255,_=n[h],A=r[h++],E|=_+T+1<<7&65280,C|=A+x+1<<7&65280,T=n[h],x=r[h++],E|=_+T+1<<15&16711680,C|=A+x+1<<15&16711680,_=n[h],A=r[h++],E|=_+T+1<<23&4278190080,C|=A+x+1<<23&4278190080,g[c]=E,m[c]=C,c++;c+=o>>2,h+=o-1}else if(u)for(;c<p;){for(v=0;v<2;v++)E=n[h]+n[h+s]+1>>1&255,C=r[h]+r[h+s]+1>>1&255,h++,E|=n[h]+n[h+s]+1<<7&65280,C|=r[h]+r[h+s]+1<<7&65280,h++,E|=n[h]+n[h+s]+1<<15&16711680,C|=r[h]+r[h+s]+1<<15&16711680,h++,E|=n[h]+n[h+s]+1<<23&4278190080,C|=r[h]+r[h+s]+1<<23&4278190080,h++,g[c]=E,m[c]=C,c++;c+=o>>2,h+=o}else for(;c<p;){for(v=0;v<2;v++)E=n[h],C=r[h],h++,E|=n[h]<<8,C|=r[h]<<8,h++,E|=n[h]<<16,C|=r[h]<<16,h++,E|=n[h]<<24,C|=r[h]<<24,h++,g[c]=E,m[c]=C,c++;c+=o>>2,h+=o}},s.prototype.blockData=null,s.prototype.decodeBlock=function(t){var e,i=0;if(this.macroblockIntra){var n,r;if(t<4?(n=this.dcPredictorY,r=this.readCode(w)):(n=4===t?this.dcPredictorCr:this.dcPredictorCb,r=this.readCode(b)),r>0){var s=this.buffer.getBits(r);0!==(s&1<<r-1)?this.blockData[0]=n+s:this.blockData[0]=n+(-1<<r|s+1)}else this.blockData[0]=n;t<4?this.dcPredictorY=this.blockData[0]:4===t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,i=1}else e=this.nonIntraQuantMatrix;for(var o=0;;){var a=0,l=this.readCode(_);if(1===l&&i>0&&0===this.buffer.getBits(1))break;65535===l?(a=this.buffer.getBits(6),o=this.buffer.getBits(8),0===o?o=this.buffer.getBits(8):128===o?o=this.buffer.getBits(8)-256:o>128&&(o-=256)):(a=l>>8,o=255&l,this.buffer.getBits(1)&&(o=-o)),i+=a;var u=d[i];i++,o<<=1,this.macroblockIntra||(o+=o<0?-1:1),o=o*this.quantizerScale*e[u]>>4,0===(1&o)&&(o-=o>0?1:-1),o>2047?o=2047:o<-2048&&(o=-2048),this.blockData[u]=o*c[u]}var h,p,f;t<4?(h=this.currentY,f=this.codedWidth-8,p=this.mbRow*this.codedWidth+this.mbCol<<4,0!==(1&t)&&(p+=8),0!==(2&t)&&(p+=this.codedWidth<<3)):(h=4===t?this.currentCb:this.currentCr,f=(this.codedWidth>>1)-8,p=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===i?(this.copyValueToDestination(this.blockData[0]+128>>8,h,p,f),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,h,p,f),this.blockData.set(this.zeroBlockData)):1===i?(this.addValueToDestination(this.blockData[0]+128>>8,h,p,f),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,h,p,f),this.blockData.set(this.zeroBlockData)),i=0},s.prototype.copyBlockToDestination=function(t,e,i,n){for(var r=0;r<64;r+=8,i+=n+8)e[i+0]=t[r+0],e[i+1]=t[r+1],e[i+2]=t[r+2],e[i+3]=t[r+3],e[i+4]=t[r+4],e[i+5]=t[r+5],e[i+6]=t[r+6],e[i+7]=t[r+7]},s.prototype.addBlockToDestination=function(t,e,i,n){for(var r=0;r<64;r+=8,i+=n+8)e[i+0]+=t[r+0],e[i+1]+=t[r+1],e[i+2]+=t[r+2],e[i+3]+=t[r+3],e[i+4]+=t[r+4],e[i+5]+=t[r+5],e[i+6]+=t[r+6],e[i+7]+=t[r+7]},s.prototype.copyValueToDestination=function(t,e,i,n){for(var r=0;r<64;r+=8,i+=n+8)e[i+0]=t,e[i+1]=t,e[i+2]=t,e[i+3]=t,e[i+4]=t,e[i+5]=t,e[i+6]=t,e[i+7]=t},s.prototype.addValueToDestination=function(t,e,i,n){for(var r=0;r<64;r+=8,i+=n+8)e[i+0]+=t,e[i+1]+=t,e[i+2]+=t,e[i+3]+=t,e[i+4]+=t,e[i+5]+=t,e[i+6]+=t,e[i+7]+=t},s.prototype.copyBlockToDestinationClamp=function(t,e,i,n){for(var r=0,s=0;s<8;s++){for(var o=0;o<8;o++){var a=t[r++];e[i++]=a>255?255:a<0?0:a}i+=n}},s.prototype.addBlockToDestinationClamp=function(t,e,i,n){for(var r=0,s=0;s<8;s++){for(var o=0;o<8;o++){var a=t[r++]+e[i];e[i++]=a>255?255:a<0?0:a}i+=n}},s.prototype.IDCT=function(){var t,e,i,n,r,s,o,a,l,d,u,h,c,p,f,m,g,v,y,w=this.blockData;for(y=0;y<8;++y)t=w[32+y],e=w[16+y]+w[48+y],i=w[40+y]-w[24+y],s=w[8+y]+w[56+y],o=w[24+y]+w[40+y],n=w[8+y]-w[56+y],r=s+o,a=w[0+y],c=(473*n-196*i+128>>8)-r,l=c-(362*(s-o)+128>>8),d=a-t,u=(362*(w[16+y]-w[48+y])+128>>8)-e,h=a+t,p=d+u,f=h+e,m=d-u,g=h-e,v=-l-(473*i+196*n+128>>8),w[0+y]=r+f,w[8+y]=c+p,w[16+y]=m-l,w[24+y]=g-v,w[32+y]=g+v,w[40+y]=l+m,w[48+y]=p-c,w[56+y]=f-r;for(y=0;y<64;y+=8)t=w[4+y],e=w[2+y]+w[6+y],i=w[5+y]-w[3+y],s=w[1+y]+w[7+y],o=w[3+y]+w[5+y],n=w[1+y]-w[7+y],r=s+o,a=w[0+y],c=(473*n-196*i+128>>8)-r,l=c-(362*(s-o)+128>>8),d=a-t,u=(362*(w[2+y]-w[6+y])+128>>8)-e,h=a+t,p=d+u,f=h+e,m=d-u,g=h-e,v=-l-(473*i+196*n+128>>8),w[0+y]=r+f+128>>8,w[1+y]=c+p+128>>8,w[2+y]=m-l+128>>8,w[3+y]=g-v+128>>8,w[4+y]=g+v+128>>8,w[5+y]=l+m+128>>8,w[6+y]=p-c+128>>8,w[7+y]=f-r+128>>8};var o="jsmp",a=1,l=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],d=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),u=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),h=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),c=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),p=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),f=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),m=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),g=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),v=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),y=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),w=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),b=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),_=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),T=1,E=2,A=3,x=179,C=1,P=175,I=0,k=181,S=178,D=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),B=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),V=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),F=[null,f,m,g],O=function(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};O.NOT_FOUND=-1,O.prototype.findNextMPEGStartCode=function(){for(var t=this.index+7>>3;t<this.writePos;t++)if(0===this.bytes[t]&&0===this.bytes[t+1]&&1===this.bytes[t+2])return this.index=t+4<<3,this.bytes[t+3];return this.index=this.writePos<<3,O.NOT_FOUND},O.prototype.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0===this.bytes[t]&&0===this.bytes[t+1]&&1===this.bytes[t+2]},O.prototype.nextBits=function(t){var e=this.index>>3,i=8-this.index%8;if(i>=t)return this.bytes[e]>>i-t&255>>8-t;var n=(this.index+t)%8,r=this.index+t-1>>3,s=this.bytes[e]&255>>8-i;for(e++;e<r;e++)s<<=8,s|=this.bytes[e];return n>0?(s<<=n,s|=this.bytes[e]>>8-n):(s<<=8,s|=this.bytes[e]),s},O.prototype.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},O.prototype.advance=function(t){return this.index+=t},O.prototype.rewind=function(t){return this.index-=t},t.exports=s},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){var i=new XMLHttpRequest,n=null;return i.overrideMimeType("text/plain; charset=x-user-defined"),i.addEventListener("progress",function(t){if(!n){n=new s(i);var r=i.getResponseHeader("Content-Length");e(r,n)}n.progress()}),i.onreadystatechange=function(t){4===this.readyState&&(200===this.status?n&&n.close():e(-1,this.status))},i.onerror=function(t){e(-1,this.status)},i.open("GET",t),i.send(),i}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.streamFetch=n;var s=function(){function t(e){i(this,t),this.req=e,this.result={value:null,done:!1},this.clbk=null,this.index=0}return r(t,[{key:"convertRes2",value:function(t){for(var e=this.req.responseText,i=new Uint8Array(t),n=0;n<t;++n)i[n]=255&e.charCodeAt(this.index+n);return i}},{key:"progress",value:function(){var t=this.req.responseText.length,e=t-this.index;e&&(this.result.value=this.convertRes2(e),this.index=t,this.clbk&&this.clbk(this.result))}},{key:"close",value:function(t){this.result.done=!0,this.clbk&&this.clbk(this.result),this.result=void 0,this.clbk=void 0}},{key:"read",value:function(t){this.clbk=t}}]),t}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(81),s=n(r),o=i(77),a=n(o),l=i(80),d=n(l),u=i(28),h=i(2);i(6),i(34);t.exports=u.View.extend({videoAdId:h.now().toString(),_initVjs:function(){if(h.parseBool(this.model.get("isMobile")))switch(this.model.get("mobilePlayer")){case"AV":this._initAV();break;case"DP":this._initDP();break;case"SR":default:this._initSR()}else this._initDP()},_initSR:function(){this.player=new a.default({model:this.model,isInstream:!1,targetId:this.videoAdId,width:this.model.get("width"),height:this.model.get("height"),onAdImpression:this._onAdImpression.bind(this),onAdEnded:this._onAdStopped.bind(this),onAdError:this._onAdError.bind(this)})},_initAV:function(){this.player=new s.default({model:this.model,isViewable:1,isInstream:!0,targetId:this.videoAdId,width:this.model.get("width"),height:this.model.get("height"),onAdImpression:this._onAdImpression.bind(this),onAdError:this._onAdError.bind(this),onAdEnded:this._onAdStopped.bind(this)})},_initDP:function(){var t=function(){},e=this._onAdVideoComplete||t,i=this._onPlayerClose||t;this.player=new d.default({model:this.model,isViewable:1,targetId:this.videoAdId,onAdImpression:this._onAdImpression.bind(this),onAdStopped:this._onAdStopped.bind(this),onAdError:this._onAdError.bind(this),onAdVideoComplete:e.bind(this),onPlayerClose:i.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerError:this._onPlayerError.bind(this),scheduleArr:this.model.getScheduleArr()})}})}]);