
var AufBid=window.AufBid||{};AufBid.Logger=(function(){var logger=function(options){this.setSampling=true;this.sampleRate=10;this.hashs=options.hashs||{};this.initLogger();};logger.prototype={constructor:logger,logmaticKeys:{'HEADER_BIDDING_ERRORS':'jRDof5FVQnipLGUg48qkoA','HEADER_BIDDING_RENDER':'z0H3qFj-QFu2cRbMgZTRUw','HEADER_BIDDING':'6maF6Z-rRW2rV2wr8o3AIQ','HEADER_BIDDING_EXPIRED':'X5jVcm3lRoS2Y9hDkhpPjA'},initLogger:function initLogger(){this.logger=window.afLogger;this.logger.logmaticInitStackKeys(this.logmaticKeys);this.loggingEnabled=(typeof(this.hashs.hb_logs)!=='undefined'||localStorage&&localStorage.getItem('hb_logs')==='true');},prepareBidLogs:function prepareBidLogs(bidsList){var bidLogs=[];for(var i=0;i<bidsList.length;i++){bidLogs.push(this.prepareBidLog(bidsList[i]));}
return bidLogs;},prepareBidLog:function prepareBidLog(bid){var bidLog={};bidLog.hasBidders=1;bidLog.hasBid=1;bidLog.id=bid.bid_id;bidLog.bidder=bid.bidderName;bidLog.cpm=bid.discountcpm;bidLog.adjustedcpm=bid.adjustedcpm;bidLog.format=bid.slotName;bidLog.placement=bid.id;bidLog.rendered=bid.rendered;bidLog.hasBeenSent=bid.hasBeenSent;bidLog.expired=bid.expired;return bidLog;},logActivity:function logActivity(bids){var allBids=[]
for(var formatId in bids){for(var i=0,l=bids[formatId].length;i<l;i++){allBids.push(bids[formatId][i]);}}
if(allBids.length===0){var log={};log.headerBidding={};log.headerBidding.hasBidders=1;log.headerBidding.hasBid=0;if(!this.setSampling||(this.setSampling&&Math.floor((Math.random()*100))<this.sampleRate)){this.sendLog('HEADER_BIDDING',log);}}else{allBids.forEach(function(bid){if(!bid.logged){this.logBid(bid);}
bid.logged=true;},this);}},logDeliverBidFail:function logDeliverBidFail(e,params){this.logError('failed to deliver bid to render',e,params);},logRenderFail:function logRenderFail(e,params){this.logError('cannot render bid with formatId '+params.params.formatId,e,params);},logLoadBidderFail:function logLoadBidderFail(e,bidderName){this.logError('failed to load bidder '+bidderName,e);},logScriptLoadFail:function logScriptLoadFail(e,bidderName){this.logError('loadScript failed for bidder '+bidderName,e);},logError:function logError(message,e,params){var failLog={error:e,errorMessage:message,params:params}
this.sendLog('HEADER_BIDDING_ERRORS',failLog);},logBid:function logBid(bid){this.pushBid(bid,'HEADER_BIDDING',true);},logExpiredBid:function logExpiredBid(bid){this.pushBid(bid,'HEADER_BIDDING_EXPIRED',true);},logRenderBid:function logRenderBid(bid){this.pushBid(bid,'HEADER_BIDDING_RENDER',false);},pushBid:function pushBid(bid,message,applySample){var log={headerBidding:this.prepareBidLog(bid)};if(!applySample||!this.setSampling||(this.setSampling&&Math.floor((Math.random()*100))<this.sampleRate)){this.sendLog(message,log);}},sendLog:function sendLog(message,log){if(this.logger.datalayer){log.datalayer=this.logger.datalayer;}else{log.datalayer={'siteInfo':{'platform':document.domain}};}
this.dispatch('logmatic',{message:message,context:log});},logConsole:function logConsole(obj){if(!this.loggingEnabled)return;this.dispatch('console',obj);},dispatch:function dispatch(logger,log){this.logger.dispatch(logger,log);}}
return logger;})();
var AufBid=window.AufBid||{};AufBid.Manager=(function(){var manager=function(params){this.options=params.data;this.timeout=params.timeout||1000;this.callback=params.callback||afAd.load;this.expired=false;this.bidders=[];this.bids={};this.hashs=this.utils.getLocationHash();var that=this;this.logger=new AufBid.Logger({hashs:that.hashs});if(window.AfDebug){that.debugger=new AfDebug.AdsDebug({hashs:that.hashs});}
if(AufBid.workflow){this.workflow=new AufBid.Workflow();}
this.loadBidders(this.options);setTimeout(function(){that.callback();},that.timeout)
if(window.PubSub){PubSub.subscribe('ad.refresh',function(msg,data){if(data.formatIds){that.setFormat(data.formatIds);}
var target;if(data.target){target=that.cleanTargeting(data.target);}
if(that.hasActiveFormat()){that.refresh();setTimeout(function(){target+=that.getQueryStringForAdserver();that.debugTarget(target);if(typeof data.callback==='function'){data.callback(target);}},that.timeout);}else if(typeof data.callback==='function'){data.callback(target);}});}};manager.prototype={constructor:manager,getStoredBids:function getStoredBids(){if(localStorage&&JSON&&localStorage.getItem('bids')){return JSON.parse(localStorage.getItem('bids'));}},mergeStoredBids:function mergeStoredBids(){if(localStorage&&JSON&&localStorage.getItem('bids')){var bids=JSON.parse(localStorage.getItem('bids'));for(var formatId in bids){for(var i=0,l=bids.length;i<l;i++){bid=bids[formatId][i];if(!bid.bidder){bid.bidder=this.getAdapter({name:bid.bidderName});}
this.bids[formatId]=this.bids[formatId]||[];this.bids[formatId].push(bid);}}
localStorage.removeItem('bids');}},saveBidsState:function saveBidsState(){for(var formatId in this.bids){for(var i=0,l=this.bids[formatId].length;i<l;i++){bid=this.bids[formatId][i];if(bid.bidder){delete bid.bidder;}}}
if(localStorage&&JSON){localStorage.setItem('bids',JSON.stringify(this.bids));}},debug:function debug(){if(this.debugger){this.debugger.debug(this);this.debugger.placeToggleButton();}else{console.log('debug not available');}},getAdapter:function getAdapter(bidder){var that=this;var name=bidder.name.charAt(0).toUpperCase()+bidder.name.slice(1);return new window.AufBid[name+'Adapter'](that,bidder);},loadBidders:function loadBidders(params){if(this.workflow){this.workflow.initWave();}
formats=this.parseFormats(params.formatIds);for(var i in params.bidders){if(this.hashs.disabledBidders){var bds=this.hashs.disabledBidders.split(',').map(function(st){return st.toLowerCase()});if(bds.indexOf(params.bidders[i].name.toLowerCase())!==-1){continue;}}
var bidObj=params.bidders[i];var placements=bidObj.placements;try{var bidder=this.getAdapter(bidObj);this.bidders.push(bidder);bidder.setFormat(params.formatIds);bidder.callBids();}catch(e){this.logger.logLoadBidderFail(e,params.bidders[i].name);}}
if(this.hashs.testBidders){var bds=this.hashs.testBidders.split(',');bds.forEach(function(bd){var b=this.getAdapter({name:bd});this.bidders.push(b);b.callBids();},this)}},format4Digits:function format4Digits(nb){return('000'+nb.toFixed(2).replace('.','')).slice(-4);},floorCpm:function(cpm){if(cpm<0.05){return 0.05;}else if(cpm<=5){return Math.floor(cpm*20)/20;}else if(cpm<=20){return Math.floor(cpm*4)/4;}else{return 20;}},formatSlotName:function formatSlotName(slotName){return slotName?slotName.toLowerCase().replace(/\s/g,'_'):null;},getAdServerSlotPid:function getAdServerSlotPid(slotName){var slot=this.options.adServer.slots.find(function(s){return s.slotName===slotName});return slot?slot.ad_server_pid:null;},getAdServerSlotName:function getAdServerSlotName(adServerPid){var slot=this.options.adServer.slots.find(function(s){return''+s.ad_server_pid===''+adServerPid;});return slot?this.formatSlotName(slot.slotName):null;},recall:function recall(){for(var i=0,l=this.bidders.length;i<l;++i){var bidder=this.bidders[i];if(typeof bidder.recall==='function'&&!bidder.isDone){bidder.recall();}else if(!bidder.isDone){bidder.bidsReady();}}},discount:function discount(bid){var rate=bid.bidder.options.discount;if(rate){bid.rawcpm=bid.eurocpm;bid.rawcpmdisc=bid.eurocpm*(1+rate/100);return bid.eurocpm*(1+rate/100);}else{return bid.eurocpm;}},adjustment:function adjustment(bid){var discrepancy=bid.bidder.options.adjustment;if(discrepancy){var rate=1+discrepancy/100;bid.adjustedcpm=(discrepancy>=0)?bid.discountcpm*rate:bid.discountcpm/rate;return bid.adjustedcpm;}else{return bid.discountcpm;}},storeBids:function storeBids(bids){bids=!Array.isArray(bids)?[bids]:bids;bids.forEach(function(bid,index){bid.bid_id=this.utils.getGuid();bid.rendered=0;bid.expired=this.expired;this.logger.logExpiredBid(bid);bid.discountcpm=this.discount(bid);bid.adjustedcpm=this.adjustment(bid);bid.flooredcpm=this.floorCpm(bid.discountcpm);bid.formatedcpm=this.format4Digits(bid.flooredcpm);bid.slotName=this.getAdServerSlotName(bid.ad_server_pid);var date=new Date();bid.expirationDate=date.getTime()+(bid.bidder.getExpirationTime());this.bids[bid.ad_server_pid]=this.bids[bid.ad_server_pid]||[];this.bids[bid.ad_server_pid].push(bid);},this);},inEuros:function inEuros(priceInDollards){var rate=0.920405;return priceInDollards*rate;},render:function render(params){var bidToRender=this.getMaxBidFromList(this.bids[params.formatId]);try{bidToRender.renderParams=params;if(!bidToRender.bidder){bidToRender.bidder=this.getAdapter({name:bidToRender.bidderName});}
this.logger.logRenderBid(bidToRender);bidToRender.rendered=1;try{bidToRender.bidder.render(bidToRender);}catch(e){this.logger.logRenderFail(e,{params:params,bidder:bidToRender.bidderName});}}catch(e){this.logger.logDeliverBidFail(e,{params:params});}},getTagIdFromTarget:function getTagIdFromTarget(target){var tagId=false;target=decodeURIComponent(target);if(target){var keywords=target.split(';');for(var i=0,l=keywords.length;i<l;i++){if(keywords[i].indexOf('tagid')>=0){tagId=keywords[i].replace('tagid=','');tagId=tagId.slice(0,tagId.length-1);}}}
return tagId;},getContainer:function getContainer(ad_server_pid,tagId){if(tagId){return document.getElementById(tagId);}else{return document.getElementById('sas_'+ad_server_pid);}},getBidder:function getBidder(bidder){if(typeof bidder==='object'&&bidder.setFormat){return bidder;}
if(typeof bidder==='string'){for(var i=0,l=this.bidders.length;i<l;++i){if(this.bidders[i].name.toLowerCase()===bidder.toLowerCase()){return this.bidders[i];}}}},hasActiveFormat:function hasActiveFormat(){var hasActiveFormat=false;for(var i=0,l=this.bidders.length;i<l;++i){if(this.bidders[i].hasActiveFormat()){hasActiveFormat=true;break;}}
return hasActiveFormat;},parseFormats:function parseFormats(formats){return Array.isArray(formats)?formats:formats.toString().split(',');},setFormat:function setFormat(formats,bidders){formats=this.parseFormats(formats);if(bidders){bidders=Array.isArray(bidders)?bidders:bidders.split(',').map(function(str){return str.trim()});}else{bidders=this.bidders;}
bidders.forEach(function(bidder){this.getBidder(bidder).setFormat(formats);},this);},refresh:function refresh(){if(this.workflow){this.workflow.initWave();}
this.expired=false;for(var i=0,l=this.bidders.length;i<l;++i){this.bidders[i].callBids();}},getMaxBidFromList:function getMaxBidFromList(bidsList){var maxBid;var date=new Date();for(var i=0,l=bidsList.length;i<l;i++){if(bidsList[i].expirationDate<date.getTime()){}else if(!bidsList[i].rendered&&(!maxBid||bidsList[i].cpm>maxBid.cpm)){maxBid=bidsList[i];}}
return maxBid;},getQueryStringForAdserver:function getQueryStringForAdserver(){var q=[];this.logger.logActivity(this.bids);this.expired=true;for(var formatId in this.bids){var bid=this.getMaxBidFromList(this.bids[formatId]);if(bid){q.push('bid_'+bid.slotName+'_cpm='+bid.bidder.getValueForAdserver(bid)+'c');}}
var queryString=';'+q.join(';');return queryString;},cleanTargeting:function cleanTargeting(target){return target.replace(/bid_[A-z]*_cpm=[0-9]*c;?/g,'');},debugTarget:function debugTarget(target){if(!target)return;var keywords=[];target.split(';').map(function(s){var keyvalue=s.split('=');keywords.push({key:keyvalue[0],value:keyvalue[1]});});this.logger.logConsole(keywords);},loadScript:function loadScript(url,bidder,callback){try{var script=document.createElement('script');script.type='text/javascript';script.async=true;script.src=url;var sdkTargetEl=document.getElementsByTagName('head')[0];sdkTargetEl.insertBefore(script,sdkTargetEl.firstChild);script.onload=function(){if(typeof callback==='function'){callback();}}}catch(e){this.logger.logScriptLoadFail(e,bidder.name)}},getIframeForCreative:function getIframeForCreative(params){var iframe=document.createElement('iframe');if(params.size){iframe.style.width=params.size.w?params.size.w+'px':'100%';iframe.style.height=params.size.h?params.size.h+'px':'100%';}
iframe.style.border='none';iframe.scrolling='no';iframe.frameborder=0;iframe.scrolling='no';iframe.marginWidth=0;iframe.topMargin=0;iframe.leftMargin=0;iframe.marginHeight=0;iframe.allowTransparency='true';if(params.container){params.container.innerHTML='';params.container.appendChild(iframe);if(params.html){iframe.contentWindow.document.open();iframe.contentWindow.document.write(params.html);iframe.contentWindow.document.close();}}
return iframe;},utils:{getGuid:function getGuid(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);};return s4()+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+s4()+s4();},getLocationHash:function getLocationHash(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}}};return manager;})();if(!Date.now){Date.now=function(){return new Date().getTime();}}
if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};}
if(!Array.prototype.forEach){Array.prototype.forEach=function(callback,thisArg){var T,k;if(this===null){throw new TypeError(' this vaut null ou n est pas dÃ©fini');}
var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+' n est pas une fonction');}
if(arguments.length>1){T=thisArg;}
k=0;while(k<len){var kValue;if(k in O){kValue=O[k];callback.call(T,kValue,k,O);}
k++;}};}
if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function(predicate){'use strict';if(this==null){throw new TypeError('Array.prototype.find called on null or undefined');}
if(typeof predicate!=='function'){throw new TypeError('predicate must be a function');}
var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return value;}}
return undefined;}});}
var AufBid=window.AufBid||{};AufBid.Workflow=(function(){var workflow=function(){this.initVisit()};workflow.prototype={constructor:workflow,cookieName:'aufbid_logs',cookie:'',visit_id:null,pageview_id:null,waves:[],initVisit:function(){if(!this.visitExists()){var visit_id=this.createId('visit');this.visit_id=visit_id;this.cookie.visit_id=visit_id;}
this.updateVisitExpiration();var pageview_id=this.createId('pageview');this.pageview_id=pageview_id;},initWave:function(){var wave_id=this.createId('wave');this.waves.push({id:wave_id,lanched_at:Math.floor(Date.now()/1000),bid_reqs:[],smart_req:null});},visitExists:function(){this.fetchCookie();if(this.cookie.hasOwnProperty('session_expires_at')&&parseInt(this.cookie.session_expires_at)>Math.floor(Date.now()/1000)&&this.cookie.hasOwnProperty('visit_id')){return true;}else{return false;}},updateVisitExpiration:function(){var targetExpiration=Math.floor(Date.now()/1000)+60*30;var now=new Date();now.setDate(now.getDate()+1);var tomorrow=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0,0);var justBeforeMidnight=Math.floor((tomorrow.getTime()-1)/1000);targetExpiration=(targetExpiration>justBeforeMidnight)?justBeforeMidnight:targetExpiration;this.cookie.session_expires_at=targetExpiration;setCookie(this.cookieName,JSON.stringify(this.cookie),365);},fetchCookie:function(){var tmp_cookie=getCookie(this.cookieName);if(tmp_cookie!=''){this.cookie=JSON.parse(getCookie(this.cookieName));}else{this.cookie={};}},createId:function(objName){return objName+":"+Date.now()+":"+Math.floor(Math.random()*1000);}};return workflow;})();function getCookie(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";}
function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
AufBid.Utils=(function(){var utils=function(){};utils.prototype={constructor:utils,ajax:function(url,callback,data,options){var XDomainRequest=false,x;var method=options.method||(data?'POST':'GET');if(!window.XMLHttpRequest){XDomainRequest=true;}else{x=new window.XMLHttpRequest();if(x.responseType===undefined){XDomainRequest=true;}}
if(XDomainRequest){x=new window.XDomainRequest();x.onload=function(){callback(x.responseText,x,options);};x.onerror=function(){};x.ontimeout=function(){};x.onprogress=function(){};}else{x.onreadystatechange=handler;}
if(method==='GET'&&data){var urlInfo=this.parseURL(url);Object.assign(urlInfo.search,data);url=this.formatURL(urlInfo);}
x.open(method,url);if(!XDomainRequest){if(options.withCredentials){x.withCredentials=true;}
if(options.preflight){x.setRequestHeader('X-Requested-With','XMLHttpRequest');}
x.setRequestHeader('Content-Type',options.contentType||'text/plain');}
x.send(method==='POST'&&data);function handler(){if(x.readyState===4&&callback){callback(x.responseText,x,options);}}},parseURL:function(url){var parsed=document.createElement('a');parsed.href=decodeURIComponent(url);return{protocol:(parsed.protocol||'').replace(/:$/,''),hostname:parsed.hostname,port:+parsed.port,pathname:parsed.pathname,search:this.parseQS(parsed.search||''),hash:(parsed.hash||'').replace(/^#/,''),host:parsed.host};},formatURL:function f(obj){return(obj.protocol||'http')+'://'+
(obj.host||obj.hostname+(obj.port?':'+obj.port:''))+
(obj.pathname||'')+(obj.search?'?'+this.formatQS(obj.search||''):'')+
(obj.hash?'#'+obj.hash:'');},formatQS:function(query){return Object.keys(query).map(function(k){return Array.isArray(query[k])?query[k].map(function(v){return k+'[]='+v;}).join('&'):k+'='+query[k];}).join('&');},parseQS:function(query){return!query?{}:query.replace(/^\?/,'').split('&').reduce(function(acc,criteria){var k=criteria.split('=')[0];var v=criteria.split('=')[1];if(/\[\]$/.test(k)){k=k.replace('[]','');acc[k]=acc[k]||[];acc[k].push(v);}else{acc[k]=v||'';}
return acc;})},getTopWindowLocation:function(){var location=void 0;try{location=window.top.location;}catch(e){location=window.location;}
return location;},getTopWindowUrl:function(){var href=void 0;try{href=this.getTopWindowLocation().href;}catch(e){href='';}
return href;}}
return utils;})();
AufBid.RubiconAdapter=(function(){var RUBICON_SIZE_MAP={1:'468x60',2:'728x90',8:'120x600',9:'160x600',10:'300x600',14:'250x250',15:'300x250',16:'336x280',19:'300x100',31:'980x120',32:'250x360',33:'180x500',35:'980x150',37:'468x400',38:'930x180',43:'320x50',44:'300x50',48:'300x300',54:'300x1050',55:'970x90',57:'970x250',58:'1000x90',59:'320x80',60:'320x150',61:'1000x1000',65:'640x480',67:'320x480',68:'1800x1000',72:'320x320',73:'320x160',78:'980x240',79:'980x300',80:'980x400',83:'480x300',94:'970x310',96:'970x210',101:'480x320',102:'768x1024',103:'480x280',113:'1000x300',117:'320x100',125:'800x250',126:'200x600'};var rubiconAdapter=function(manager,params){var that=this;this.manager=manager;this.options=params;this.name=params.name;this.isDone=false;this.utils=new AufBid.Utils();this.positions=[{name:'atf',id:['117','12','16863']},{name:'mtf',id:['19']},{name:'btf',id:['3243','9888']}];};rubiconAdapter.prototype={constructor:rubiconAdapter,getAdServerPid:function(zone_id){var that=this;var ps=that.options.placements;var ad_server_pid;for(var key in that.options.placements){if(that.options.placements.hasOwnProperty(key)){var arr=that.options.placements[key].map(function(o){return o.tag});if(arr.indexOf(zone_id)!==-1){ad_server_pid=key;break;}}}
return ad_server_pid;},getPosition:function(ad_server_pid){if(this.positions){for(var i=0,l=this.positions.length;i<l;++i){var pos=this.positions[i];if(pos.id.indexOf(ad_server_pid)!==-1){return pos.name;}}}
return null;},buildOptimizedCall:function(bid){var ad_server_pid=this.getAdServerPid(bid.id+'-'+bid.sizes[0]);var query={'account_id':this.options.accountId,'site_id':this.options.siteId,'zone_id':bid.id,'size_id':bid.sizes[0],'alt_size_ids':bid.sizes.slice(1).join(',')||undefined,'p_pos':this.getPosition(ad_server_pid)||'btf','rp_floor':'0.01','p_screen_res':window.screen.width+'x'+window.screen.height,'rand':Math.random(),'rf':this.utils.getTopWindowUrl()};return window.location.protocol+'//fastlane.rubiconproject.com/a/api/fastlane.json?'+Object.keys(query).map(function(k){return k+'='+encodeURIComponent(query[k])}).join('&');},parsePlacements:function(formats){var that=this,res=[];for(var adServerPid in that.options.placements){if(that.options.placements.hasOwnProperty(adServerPid)){var pl=that.options.placements[adServerPid];if(formats&&formats.indexOf(adServerPid)===-1){pl=[];}
for(var i=0,l=pl.length;i<l;++i){var o=pl[i],id=o.tag.split('-')[0];var sizeId=o.tag.split('-')[1];if(!hasOwnProperty.call(res,id)){res[id]={};}
if(res[id].hasOwnProperty(adServerPid)){res[id][adServerPid].sizes.push(sizeId);}else{res[id][adServerPid]={sizes:[sizeId]};}}}}
this.parsedPlacements=res;},adCpmSort:function(adA,adB){return(adB.cpm||0.0)-(adA.cpm||0.0);},getSize:function(id){var size=RUBICON_SIZE_MAP[id].split('x')||undefined;return size;},render:function(bid){var html="<html>\n<head><script type='text/javascript'>inDapIF=true;</script></head>\n<body style='margin : 0; padding: 0;'>\n<!-- Rubicon Project Ad Tag -->\n<div data-rp-impression-id='"+bid.impression_id+"'>\n<script type='text/javascript'>"+bid.creative+"</script>\n</div>\n</body>\n</html>";if(bid.size.h==1000&&bid.size.w==1800){this.renderSkin(bid,html);}else{var that=this;var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:bid.size,container:container,html:html};this.manager.getIframeForCreative(params);}},renderSkin:function(bid,html){var header=document.getElementsById('header');var header_height=header.offsetHeight;var content=document.getElementById('content');var current_content_top=content.getBoundingClientRect().top+window.scrollY;var new_content_top=header_height+220-current_content_top;var abs=d.createElement('div');abs.setAttribute('style','width: 100%; position: absolute; overflow: hidden; top:'+header_height+'px');var cont1=d.createElement('div');cont1.setAttribute('style','position: relative; left: 50%; z-index: 0; width: 1px;');var cont2=d.createElement('div');cont2.setAttribute('style','position: relative; left: -'+(bid.size.w/2)+'px');var iframe=d.createElement('iframe');iframe.setAttribute('style','height: 1050px');iframe.width=bid.size.w,iframe.height=bid.size.h,iframe.frameBorder=0;cont2.appendChild(iframe)
cont1.appendChild(cont2);abs.appendChild(cont1);document.getElementById('content').style.top=new_content_top+"px";b=d.getElementsByTagName('body')[0];b.insertBefore(abs,b.firstChild);iframe.contentWindow.document.open();iframe.contentWindow.document.write(html);iframe.contentWindow.document.close();},makeBid:function makeBid(response,ad_server_pid){var bid={},ad=response.ads.sort(this.adCpmSort)[0],size=this.getSize(ad.size_id);if(ad.cpm&&Number(ad.cpm)>0){bid.bidderName=this.options.name;bid.cpm=ad.cpm;bid.eurocpm=this.manager.inEuros(ad.cpm);bid.id=response.zone_id+'-'+ad.size_id;bid.advertiser=ad.advertiser;bid.size={w:size[0],h:size[1]};bid.ad_server_pid=ad_server_pid;bid.bidder=this;bid.timestamp=Date.now();bid.creative=ad.script;bid.impression_id=ad.impression_id;return bid;}else{return null;}
return bid;},addBid:function addBid(response,ad_server_pid){var bid=this.makeBid(response,ad_server_pid);if(bid){this.manager.storeBids(bid);}},recall:function recall(){this.callBids();},callBids:function callBids(){var that=this;if(this.hasActiveFormat()){for(var key in that.parsedPlacements){for(var ad_server_pid in that.parsedPlacements[key]){if(that.parsedPlacements.hasOwnProperty(key)&&that.parsedPlacements[key].hasOwnProperty(ad_server_pid)){var o={id:key,sizes:that.parsedPlacements[key][ad_server_pid].sizes};var fnName="aufjs_rp_callback-"+key+"-"+ad_server_pid;that[fnName]=function(responseText,xhr,options){try{that.addBid(JSON.parse(responseText),options.ad_server_pid);}catch(e){}}
that[fnName].ad_server_pid=ad_server_pid;that.utils.ajax(that.buildOptimizedCall(o),that[fnName],undefined,{withCredentials:true,ad_server_pid:ad_server_pid});}}}}},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return this.parsedPlacements.length>0;},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},getExpirationTime:function getExpirationTime(){return 60*1000}}
return rubiconAdapter;})();if(typeof exports!=='undefined'){exports.AufBid=AufBid;exports.AufBid.RubiconAdapter=AufBid.RubiconAdapter;}
AufBid.WidespaceAdapter=(function(){var widespaceAdapter=function(manager,params){this.options=params||{};this.manager=manager;this.splitToken=params.splitToken||'$$';this.isDone=false;this.name=this.options.name||'widespace';this.version='1.0.2';window.aufjs_widespace_callback=window.aufjs_widespace_callback||function(resp){aufbidjs.getBidder('widespace').addBid(resp)};};widespaceAdapter.prototype={constructor:widespaceAdapter,initSDK:function initSDK(){var that=this;for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){var placements=this.parsedPlacements[adServerPid];placements.forEach(function(placement){var src=window.location.protocol+'//engine.widespace.com/map/engine/hb/dynamic?'+this.getQueryString(placement,adServerPid);this.manager.loadScript(src,this);},this);}}},parsePlacements:function parsePlacements(formats){this.parsedPlacements={};for(var adServerPid in this.options.placements){if(this.options.placements.hasOwnProperty(adServerPid)){if(formats&&formats.indexOf(adServerPid)===-1){continue;}
this.parsedPlacements[adServerPid]=this.options.placements[adServerPid];}}},makeBid:function makeBid(bidResponse){var bid={bidderName:this.options.name,cpm:bidResponse.cpm,eurocpm:bidResponse.cpm,id:bidResponse.callbackUid+bidResponse.reqId,bidder:this,ad_server_pid:bidResponse.callbackUid.split(this.splitToken)[2],ad:bidResponse.code,size:{h:bidResponse.height,w:bidResponse.width}};return bid;},recall:function recall(){},addBid:function addBid(bidResponse){var bestBid=bidResponse.reduce(function(a,b){return a.cpm>b.cpm?a:b;});if(bestBid&&bestBid.cpm>0){var bid=this.makeBid(bestBid);this.manager.storeBids(bid);}},render:function render(bid){var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:bid.size,container:container,html:bid.ad}
this.manager.getIframeForCreative(params);},getQueryString:function getQueryString(placement,ad_server_pid){var queryString='';queryString+=this.getVersionForQueryString();var query={'hb':1,'hb.callback':'aufjs_widespace_callback','hb.callbackUid':placement.tag+this.splitToken+placement.size+this.splitToken+ad_server_pid,'hb.sizes':placement.size,'sid':placement.tag,'hb.currency':'EUR','hb.name':'prebidjs'};queryString+=Object.keys(query).map(function(k){return k+'='+encodeURIComponent(query[k])}).join('&');this.debugQuery=query;return queryString;},getVersionForQueryString:function getVersionForQueryString(){return'hb.ver='+this.version+'#';},callBids:function callBids(){if(this.hasActiveFormat()){this.initSDK();}},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getExpirationTime:function getExpirationTime(){return 60*1000}};return widespaceAdapter;})()
AufBid.IndexExchangeAdapter=(function(){var indexExchangeAdapter=function(manager,params){this.options=params;this.manager=manager;this.name=this.options.name;this.isDone=false;window.indexParseResponse=window.indexParseResponse||function(resp){aufbidjs.getBidder('indexExchange').addBid(resp)};}
indexExchangeAdapter.prototype={constructor:indexExchangeAdapter,initSDK:function initSDK(){var src=window.location.protocol+'//as-sec.casalemedia.com/cygnus?v=7'
+'&s='+this.options.siteId
+'&pid='+this.options.accountId
+'&fn=indexParseResponse'
+'&r='+encodeURIComponent(JSON.stringify(this.getJSONQuery()));this.manager.loadScript(src,this);},parsePlacements:function parsePlacements(formats){var res=[];for(var adServerPid in this.options.placements){if(this.options.placements.hasOwnProperty(adServerPid)){if(formats&&formats.indexOf(adServerPid)===-1){continue}
res[adServerPid]=this.options.placements[adServerPid];}}
this.parsedPlacements=res;},getPrice:function getPrice(rawbid){return Number(rawbid.ext.pricelevel.match(/\d+/g).pop())/100||0;},makeBid:function makeBid(rawbid){var size=rawbid.impid.split('-')[1].split('x');var cpm=this.getPrice(rawbid);var bid={bidderName:this.options.name,cpm:cpm,eurocpm:cpm,id:rawbid.impid,bidder:this,ad_server_pid:rawbid.impid.split('-').pop(),adm:rawbid.adm,size:{w:size[0],h:size[1]}};return bid;},getImp:function getImp(placementTag,size,adServerPid){var sp=size.split('x');var o={id:placementTag+'-'+size+'-'+adServerPid,banner:{w:sp[0],h:sp[1]},ext:{siteID:placementTag}};return o;},getJSONQuery:function getJSONQuery(){var query={id:Date.now(),imp:[],site:{page:window.location.href}};for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){this.parsedPlacements[adServerPid].forEach(function(p){var sizes=p.size.split(',');sizes.forEach(function(size){query.imp.push(this.getImp(p.tag,size,adServerPid));},this);},this);}}
return query;},render:function render(bid){var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:bid.size,container:container,html:decodeURIComponent(bid.adm)}
this.manager.getIframeForCreative(params);},addBid:function addBid(response){var that=this;this.isDone=true;if(response.seatbid&&response.seatbid.length>0){var placements={};response.seatbid.forEach(function(seatBid){seatBid.bid.forEach(function(bid){var price=this.getPrice(bid);if(price>0){var adServerPid=bid.impid.split('-').pop();if(placements[adServerPid]){if(this.getPrice(placements[adServerPid])<price){placements[adServerPid]=bid;}}else{placements[adServerPid]=bid;}}},this);},this);for(var bid in placements){if(placements.hasOwnProperty(bid)){that.manager.storeBids(that.makeBid(placements[bid]));}}}},recall:function recall(){},callBids:function callBids(){this.initSDK();},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getExpirationTime:function getExpirationTime(){return 60*1000}};return indexExchangeAdapter;})()
AufBid.SovrnAdapter=(function(){var sovrnAdapter=function(manager,params){this.options=params;var a=document.createElement('a');a.href=window.location.href;this.options.domain=a.hostname;this.manager=manager;this.name=this.options.name;this.isDone=false;this.beacon=false;}
sovrnAdapter.prototype={constructor:sovrnAdapter,doBeaconCall:function doBeaconCall(){var iid=this.options.accountId,uid=this.options.siteId,e=document.createElement('script');e.type='text/javascript';e.async=true;e.src=window.location.protocol+'//ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js?iid='+iid+'&uid='+uid;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(e,s);this.beacon=true;},initSDK:function initSDK(){var that=this;if(!this.beacon){this.doBeaconCall();}
var e=document.createElement('script');e.type='text/javascript';e.async=true;e.src='https://ap.lijit.com/rtb/bid?callback=aufbidjs.getBidder(\'sovrn\').addBid&br='+encodeURIComponent(JSON.stringify(this.getJSONQuery()));var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(e,s);e.onload=function(){}
return e;},parsePlacements:function parsePlacements(formats){var that=this;var res=[];for(var adServerPid in that.options.placements){if(that.options.placements.hasOwnProperty(adServerPid)){var pl=that.options.placements[adServerPid];if(formats&&formats.indexOf(adServerPid)===-1){continue}
res[adServerPid]=[];pl.forEach(function(p){var size=p.size.split('x');res[adServerPid].push({id:p.tag,w:size[0],h:size[1]})});}}
this.parsedPlacements=res;},makeBid:function makeBid(rawbid){var bid={};var that=this;bid.bidderName=this.options.name;bid.cpm=rawbid.price;bid.eurocpm=this.manager.inEuros(rawbid.price);bid.id=rawbid.impid;bid.bidder=this;bid.ad_server_pid=rawbid.impid.split('-').pop();bid.adm=rawbid.adm;bid.nurl=rawbid.nurl;var spid=bid.id.split('-');bid.size={w:spid[2],h:spid[3]};return bid;},getJSONQuery:function getJSONQuery(){var query={id:this.options.accountId,imp:[],site:{domain:this.options.domain,page:window.location.pathname}};for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){this.parsedPlacements[adServerPid].forEach(function(p){var o={};o.id=Date.now()+'-'+p.id+'-'+p.w+'-'+p.h+'-'+adServerPid;o.banner={w:p.w,h:p.h};o.tagid=p.id;query.imp.push(o);});}}
return query;},loadPixelForTracking:function loadPixelForTracking(url){var pix=new Image();pix.src=url;},render:function(bid){this.loadPixelForTracking(bid.nurl);var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:bid.size,container:container,html:decodeURIComponent(bid.adm)}
this.manager.getIframeForCreative(params);},addBid:function addBid(response){this.isDone=true;if(response.seatbid&&response.seatbid.length>0){var placements={};response.seatbid.forEach(function(seatBid){seatBid.bid.forEach(function(bid){var adServerPid=bid.impid.split('-').pop();if(placements[adServerPid]){if(placements[adServerPid].price<bid.price){placements[adServerPid]=bid;}}else{placements[adServerPid]=bid;}});});for(var bid in placements){if(placements.hasOwnProperty(bid)){this.manager.storeBids(this.makeBid(placements[bid]));}}}},recall:function recall(){},callBids:function callBids(){this.initSDK();},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getExpirationTime:function getExpirationTime(){return 60*1000}};return sovrnAdapter;})()
AufBid.ProxistoreAdapter=(function(){var proxistoreAdapter=function(manager,params){this.options=params||{};this.manager=manager;this.cpm=6.25;this.isDone=false;this.name=this.options.name||'proxistore';};proxistoreAdapter.prototype={constructor:proxistoreAdapter,initSDK:function initSDK(){var that=this;for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){var placements=this.parsedPlacements[adServerPid];placements.forEach(function(placement){if(localStorage){ps_version=localStorage.getItem('ps_version');}
if(typeof ps_version==='undefined'||ps_version===null){ps_version=new Date().getTime();}
bw_ps_adspot_id=placement;var src=window.location.protocol+'//abs.proxistore.com/abe/js/psuniversaltag.js?v='+ps_version;var callback=function(){this.addBid()}.bind(this);this.manager.loadScript(src,this,callback);},this);}}},parsePlacements:function parsePlacements(formats){this.parsedPlacements={};for(var adServerPid in this.options.placements){if(this.options.placements.hasOwnProperty(adServerPid)){if(formats&&formats.indexOf(adServerPid)===-1){continue;}
this.parsedPlacements[adServerPid]=[this.options.placements[adServerPid][0].tag];}}},makeBid:function makeBid(ps_display_params){var that=this;var bid={};bid.bidderName=this.options.name;bid.PXasid=bw_ps_adspot_id;bid.PXads='activate';bid.PXaid=ps_display_params;bid.cpm=this.cpm;bid.eurocpm=this.cpm;bid.flooredcpm=this.cpm;bid.id=ps_display_params;bid.bidder=this;bid.ad_server_pid=Object.keys(that.parsedPlacements)[0];return bid;},recall:function recall(){if(this.hasActiveFormat()){this.addBid();}},debug:function debug(){if(typeof ps_display_params==='undefined'){console.info('[proxistore] ps_display_params is undefined');}else if(ps_display_params===''){console.info('[proxistore] ps_display_params is empty');}else{console.info('[proxistore] ps_display_params =',ps_display_params);console.table(aufbidjs.tbids);}},addBid:function addBid(){var bid;var that=this;try{if(typeof ps_display_params!=='undefined'&&typeof bw_ps_adspot_id!=='undefined'&&ps_display_params!==''){this.isDone=true;bid=this.makeBid(ps_display_params);this.manager.storeBids(bid);}}catch(e){console.error('pb while making proxistore bid');}
if(typeof console!=='undefined'){}},render:function render(bid){var container=document.createElement('div');container.id='proxistore_div';var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var subContainer=this.manager.getContainer(bid.ad_server_pid,tagId);subContainer.appendChild(container);var s=document.createElement('script');s.type='text/javascript';s.src='http://abs.proxistore.com/abe/ps.jsp';s.async=true;bw_ps_adspot_id=bid.PXasid;bw_ps_response='JS';bw_ps_server_name='abs.proxistore.com';bw_ps_server_context='abe';ps_ad_ids=decodeURIComponent(bid.PXaid);document.getElementById('sas_'+bid.ad_server_pid).appendChild(s);},callBids:function callBids(){if(this.hasActiveFormat()){this.initSDK();}},getValueForAdserver:function getValueForAdserver(bid){var extraParams=[];extraParams.push('PXaid='+bid.PXaid);extraParams.push('PXads=',+'activate');extraParams.push('PXasid='+bid.PXasid);return bid.formatedcpm+'c;'+extraParams.join(';');},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){if(this.parsedPlacements){return Object.keys(this.parsedPlacements).length>0;}else{return false;}},getExpirationTime:function getExpirationTime(){return 60*1000}};return proxistoreAdapter;})()
AufBid.OpenxAdapter=(function(){var openxAdapter=function(manager,params){this.options=params;this.manager=manager;this.name=this.options.name;this.isDone=false;window.aufjs_openx=window.aufjs_openx||this;}
openxAdapter.prototype={constructor:openxAdapter,initSDK:function initSDK(){var that=this;for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){var placements=this.parsedPlacements[adServerPid];placements.forEach(function(placement){placement.ad_server_pid=adServerPid;var tempCallback=this.getCallbackFunction(placement);if(that.options.currency===null){that.options.currency="EUR";}
if(that.options.currency.toUpperCase()==='GBP'){var src=window.location.protocol+'//aufeminin-g-d.openx.net/w/1.0/arj?callback='+'window.aufjs_openx.'+tempCallback.fnName+'&auid='+placement.tag;}else{var src=window.location.protocol+'//aufeminin-e-d.openx.net/w/1.0/arj?callback='+'window.aufjs_openx.'+tempCallback.fnName+'&auid='+placement.tag;}
this.manager.loadScript(src,this);},this);}}},parsePlacements:function parsePlacements(formats){var res=[];for(var adServerPid in this.options.placements){if(this.options.placements.hasOwnProperty(adServerPid)){if(formats&&formats.indexOf(adServerPid)===-1){continue}
res[adServerPid]=this.options.placements[adServerPid];}}
this.parsedPlacements=res;},makeBid:function makeBid(bestBid){var bid={};var that=this;bid.bidderName=this.options.name;bid.cpm=Number(bestBid.pub_rev)/1000;bid.eurocpm=bid.cpm*1.16864213;bid.id=bestBid.adid;bid.bidder=this;bid.ad_server_pid=bestBid.ad_server_pid;bid.size={w:bestBid.creative[0].width,h:bestBid.creative[0].height};bid.html=bestBid.html;bid.creative=bestBid.creative;return bid;},getCallbackFunction:function getCallbackFunction(placement){var fnName='aufjs_openx_callback_'+placement.tag+placement.ad_server_pid;this[fnName]=function(response){var tag=placement.tag;var adServerPid=placement.ad_server_pid;response.aufbidTag=placement.tag;response.adServerPid=adServerPid;this.addBid(response);}
return{fnName:fnName,func:this[fnName]};},loadPixelForTracking:function loadPixelForTracking(url){var iframe=document.createElement('iframe');var pattern=/^http:\/\//;if(pattern.test(url)){iframe.src=url;iframe.style.position='absolute';iframe.style.marginLeft='-5000px';document.body.appendChild(iframe);}},render:function render(bid){if(bid.pixels){this.loadPixelForTracking(bid.pixels);}
var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:bid.size,container:container,html:bid.html}
this.manager.getIframeForCreative(params);},addBid:function addBid(response){if(response.ads.pixels){this.loadPixelForTracking(response.ads.pixels);}
if(response.ads.ad&&response.ads.ad.length>0){var bestBid=response.ads.ad.reduce(function(a,b){return Number(a.pubrev)<Number(b.pubrev)?b:a;});bestBid.ad_server_pid=response.adServerPid;bestBid.pixels=response.ads.pixels;var bid=this.makeBid(bestBid);this.manager.storeBids(bid);}},recall:function recall(){},callBids:function callBids(){this.initSDK();},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getExpirationTime:function getExpirationTime(){return 60*1000}};return openxAdapter;})()
AufBid.AmazonAdapter=(function(){var amazonAdapter=function(manager,params){var that=this;this.options=params;this.manager=manager;this.name=params.name;this.recalled=false;this.isDone=false;}
amazonAdapter.prototype={constructor:amazonAdapter,initSDK:function initSDK(callback){var cb=function(){if(typeof callback==='function'){callback();}}.bind(this);var src=window.location.protocol+'//c.amazon-adsystem.com/aax2/amzn_ads.js';this.manager.loadScript(src,this,cb);},parsePlacements:function parsePlacements(formats){var ret=[];var placements=this.options.placements;if(formats){for(var p in placements){if(placements.hasOwnProperty(p)){ret[p]=ret[p]||[];placements[p].forEach(function(o){ret[p].push(o.tag);});}}}
this.parsedPlacements=ret;},getSize:function getSize(bid){var tag=bid.token.match(/(a|m)\d+x\d+/)[0];var pl=this.options.placements[bid.ad_server_pid].filter(function(placement){return placement.tag===tag;}).pop();var spl=pl.size.split('x');var size={w:spl[0],h:spl[1]};return size;},parsePrice:function parsePrice(price){return Number(price.substr(1));},recall:function recall(){this.bidsReady();},render:function render(bid){var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var params={size:this.getSize(bid),container:container}
var iframe=this.manager.getIframeForCreative(params);var doc=iframe.contentDocument||iframe.contentWindow.document;window.amznads.renderAd(doc,bid.token);},g:function g(p){return(0xE-Number(p)+0x1)*0x1/0x2;},bidsReady:function bidsReady(){var that=this;var tokens=[];if(typeof amznads==='undefined'){return;}
for(var ad_server_pid in this.parsedPlacements){var res={};for(var i=0,l=this.parsedPlacements[ad_server_pid].length;i<l;i++){var tokens=amznads.getTokens(this.parsedPlacements[ad_server_pid][i]);if(tokens&&tokens.length>0){this.isDone=true;tokens.forEach(function(token){var sp=token.split('p');var obj={};var p=sp[1];var id=sp[0];obj.ad_server_pid=ad_server_pid;if(obj.ad_server_pid){obj.cpm=that.g(p);obj.eurocpm=that.manager.inEuros(obj.cpm);obj.bidderName=that.options.name;obj.bidder=that;obj.timestamp=Date.now();obj.token=token;res[obj.ad_server_pid]=res[obj.ad_server_pid]||[];if(res!==null&&hasOwnProperty.call(res,obj.ad_server_pid)){res[obj.ad_server_pid].push(obj);}}});for(var k in res){if(res.hasOwnProperty(k)){var my=res[k];that.addBid(my.reduce(function(a,b){return a.cpm>b.cpm?a:b;}));}}}}}
if(!this.recalled){this.recalled=true;this.recall();}},addBid:function addBid(bid){if(bid){this.manager.storeBids(bid);}},callBids:function callBids(){var that=this;if(this.hasActiveFormat()){this.initSDK(function(){amznads.getAdsCallback(that.options.accountId,that.bidsReady());});}},setFormat:function setFormat(formats){var that=this;this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},getExpirationTime:function getExpirationTime(){return 60*1000}};return amazonAdapter;})()
if(typeof exports!=='undefined'){exports.AufBid=AufBid;exports.AufBid.AmazonAdapter=AufBid.AmazonAdapter;}
AufBid.AppnexusAdapter=(function(){var appnexusAdapter=function(manager,params){this.options=params||{};this.manager=manager;this.splitToken=params.splitToken||'$$';this.isDone=false;this.name=this.options.name||'appnexus';window.aufjs_appnexus=window.aufjs_appnexus||this;};appnexusAdapter.prototype={constructor:appnexusAdapter,initSDK:function initSDK(){var that=this;for(var adServerPid in this.parsedPlacements){if(this.parsedPlacements.hasOwnProperty(adServerPid)){var placements=this.parsedPlacements[adServerPid];placements.forEach(function(placement){var params=[];var src=window.location.protocol+'//ib.adnxs.com/jpt?';placement.ad_server_pid=adServerPid;src+=this.getQueryString(placement);this.manager.loadScript(src,this);},this);}}},getCallbackFunction:function getCallbackFunction(placement){var fnName='aufjs_appnexus_callback_'+placement.tag+placement.ad_server_pid;this[fnName]=function(response){var tag=placement.tag;var adServerPid=placement.ad_server_pid;response.aufbidTag=placement.tag;response.adServerPid=adServerPid;this.addBid(response);}
return{fnName:fnName,func:this[fnName]};},parsePlacements:function parsePlacements(formats){this.parsedPlacements={};for(var adServerPid in this.options.placements){if(this.options.placements.hasOwnProperty(adServerPid)){if(formats&&formats.indexOf(adServerPid)===-1){continue;}
this.parsedPlacements[adServerPid]=this.options.placements[adServerPid];}}},makeBid:function makeBid(bidResponse){var bid={bidderName:this.options.name,cpm:bidResponse.result.cpm/10000,eurocpm:this.manager.inEuros(bidResponse.result.cpm/10000),id:bidResponse.callbackUid+bidResponse.reqId,bidder:this,ad_server_pid:bidResponse.adServerPid,ad:bidResponse.result.ad,size:{h:bidResponse.result.height,w:bidResponse.result.width}};return bid;},recall:function recall(){},addBid:function addBid(bidResponse){if(bidResponse&&bidResponse.result&&bidResponse.result.cpm>0){var bid=this.makeBid(bidResponse);this.manager.storeBids(bid);}},renderSkin:function renderSkin(bid){var abs=d.createElement('div');abs.setAttribute('style','width: 100%; position: absolute; overflow: hidden');var cont1=d.createElement('div');cont1.setAttribute('style','position: relative; left: 50%; z-index: 0; top: 180px; width: 1px;');var cont2=d.createElement('div');cont2.setAttribute('style','position: relative; left: -'+(bid.size.w/2)+'px');var iframe=d.createElement('iframe');iframe.setAttribute('style','height: 1050px')
iframe.src=bid.ad,iframe.width=bid.size.w,iframe.height=bid.size.h,iframe.frameBorder=0;cont2.appendChild(iframe)
cont1.appendChild(cont2);abs.appendChild(cont1);document.getElementById('content').style.top="220px";b=d.getElementsByTagName('body')[0];b.insertBefore(abs,b.firstChild);},render:function render(bid){if(bid.size.w==1800&&bid.size.h==1000){this.renderSkin(bid);}else{var tagId=this.manager.getTagIdFromTarget(bid.renderParams.target);var container=this.manager.getContainer(bid.ad_server_pid,tagId);var iframe=document.createElement('iframe');iframe.src=bid.ad;iframe.style.width='100%';iframe.style.border='none';iframe.style.height=bid.size.h+'px';iframe.scrolling='no';iframe.frameborder=0;iframe.scrolling='no';iframe.marginWidth=0;iframe.topMargin=0;iframe.leftMargin=0;iframe.marginHeight=0;iframe.allowTransparency='true';container.appendChild(iframe);}},getQueryString:function getQueryString(placement){var tempCallback=this.getCallbackFunction(placement);var query={id:placement.tag,psa:0,referrer:window.location.hostname,callback:'window.aufjs_appnexus.'+tempCallback.fnName,size:placement.size.split(',')[0],promo_sizes:placement.size.split(',').slice(1).join(',')};var queryString=Object.keys(query).map(function(k){return k+'='+encodeURIComponent(query[k])}).join('&');this.debugQuery=query;return queryString;},callBids:function callBids(){if(this.hasActiveFormat()){this.initSDK();}},getValueForAdserver:function getValueForAdserver(bid){return bid.formatedcpm;},setFormat:function setFormat(formats){this.parsePlacements(formats);},hasActiveFormat:function hasActiveFormat(){return Object.keys(this.parsedPlacements).length>0;},getExpirationTime:function getExpirationTime(){return 60*1000}};return appnexusAdapter;})()
function af_getHashParams(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}
function af_isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}
function af_getCookie(name){var i,x,y;var cookiesTab=document.cookie.split(';');for(i=0;i<cookiesTab.length;i++){x=cookiesTab[i].substr(0,cookiesTab[i].indexOf('='));y=cookiesTab[i].substr(cookiesTab[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x=='afperso'||x=='afpperso'){var j,a,cookiesValuesTab=y.split('&');for(j=0;j<cookiesValuesTab.length;j++){a=cookiesValuesTab[j].substr(0,cookiesValuesTab[j].indexOf('='));if(a==name){return unescape(cookiesValuesTab[j].substr(cookiesValuesTab[j].indexOf('=')+1));}}}else if(x==name){return y;}}
return'';}
function af_setCookie(name,value,minutes){minutes=minutes||15;var date=new Date();date.setTime(date.getTime()+minutes);document.cookie=name+'='+encodeURIComponent(value)+'; expires='+date.toUTCString()+'; domain='+'.'+document.domain+'; path=/';}
function af_setSessionCookie(name,value){var minutes=15*60*1000;af_setCookie(name,value,minutes);}
function af_setPermCookie(name,value){var minutes=365*24*60*60*1000;af_setCookie(name,value,minutes);}
function af_cleanCookie(name){af_setCookie(name,'',-1);}
function af_guid(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);};return s4()+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+s4()+s4();}
function af_bind(o,m){var args=[];for(var i=2;i<arguments.length;++i){args.push(arguments[i]);}
return function(){var tmp=args.slice(0,args.length);for(var i=0;i<arguments.length;++i){tmp.push(arguments[i]);}
return m.apply(o,tmp);};}
function af_push(object,path,varName,value){var subpaths=path.split('.');if(subpaths.length>0){if(typeof object[subpaths[0]]=='undefined'){object[subpaths[0]]={};}
var context=object[subpaths[0]];for(i=1;i<subpaths.length;i++){if(typeof context[subpaths[i]]=='undefined'){context[subpaths[i]]={};}else{context=context[subpaths[i]];}}
context[varName]=value;}}
function af_clone(obj){if(obj===null||typeof obj!=='object'){return obj;}
var temp=obj.constructor();for(var key in obj){temp[key]=af_clone(obj[key]);}
return temp;}
function af_addEvent(elt,event,listener,capture){if(elt&&elt.addEventListener){elt.addEventListener(event,listener,capture);return true;}else if(elt&&elt.attachEvent){return elt.attachEvent('on'+event,listener);}else if(elt){var oldListener=elt['on'+event];elt['on'+event]=function(e){if(oldListener){oldListener(e);}
return listener(e);};return oldListener;}}
function af_windowSize(){var i=window,e=document.documentElement,b=document.body;var w=(i.innerWidth?i.innerWidth:(e&&e.clientWidth?e.clientWidth:(b&&b.clientWidth?b.clientWidth:0)));var h=(i.innerHeight?i.innerHeight:(e&&e.clientHeight?e.clientHeight:(b&&b.clientHeight?b.clientHeight:0)));var l=(i.pageXOffset?i.pageXOffset:(e&&e.scrollLeft?e.scrollLeft:(b&&b.scrollLeft?b.scrollLeft:0)));var t=(i.pageYOffset?i.pageYOffset:(e&&e.scrollTop?e.scrollTop:(b&&b.scrollTop?b.scrollTop:0)));return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_findPos(o){if(!o||o==document.body){return{l:0,t:0};}
var l=t=0,b=document.body,w=o.offsetWidth,h=o.offsetHeight;if(o.offsetParent){l=o.offsetLeft-o.scrollLeft;t=o.offsetTop-o.scrollTop;while(o=o.offsetParent){l+=o.offsetLeft-(o!=b?o.scrollLeft:0);t+=o.offsetTop-(o!=b?o.scrollTop:0);}}
return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_ua_trackEvent(category,action,opt_label,opt_value,opt_noninteraction,prefix){var opt_label=opt_label||'',opt_value=opt_value||0,opt_noninteraction=opt_noninteraction||false,prefix=prefix||'';if(typeof m_dataLayer!='undefined'){m_dataLayer.push({'event':'UA-Event','uaEventCategory':category,'uaEventAction':action,'uaEventLibelle':opt_label,'uaEventValue':opt_value,'uaEventNonInt':opt_noninteraction});}else if(typeof af_dataLayer!='undefined'){af_dataLayer.push({'event':category,'eventAction':action,'eventLabel':opt_label,'eventValue':opt_value,'eventNonInt':opt_noninteraction});}else if(typeof _gaq!='undefined'){if((prefix!='')&&(prefix.substr(-1)!='.'))prefix+='.';_gaq.push([prefix+'_trackEvent',category,action,opt_label,opt_value,opt_noninteraction]);}};function af_ua_trackVirtualPV(url){if(typeof m_dataLayer!='undefined'){m_dataLayer.push({'event':'UA-VirtualPageView','virtualPageURL':url});}else if(typeof af_dataLayer!='undefined'){af_dataLayer.push({'event':'VirtualPageView','virtualPageURL':url});}else if(typeof _gaq!='undefined'){_gaq.push(['_trackPageview',url]);}};
function af_getUtm(){if(!window.JSON)return;var utm={source:'',medium:'',campaign:''};if(document.referrer.indexOf(document.domain)==-1){af_cleanCookie('af_utm');var hash=document.location.hash.substring(1);if(hash){var hashArray=hash.replace(/&|#/g,'|').split('|');var hashValue,key,value;for(var i=0,l=hashArray.length;i<l;i++){hashValue=hashArray[i].split('=');key=hashValue[0];value=hashValue[1];switch(key){case'utm_source':utm.source=value;break;case'utm_medium':utm.medium=value;break;case'utm_campaign':utm.campaign=value;break;}}
if(utm.source){af_setSessionCookie('af_utm',JSON.stringify(utm));}}}
var cookie=af_getCookie('af_utm');if(cookie){utm=JSON.parse(decodeURIComponent(cookie));}
return utm;}
function af_getGeo(){if(af_getGeo.countryCode===undefined){var cookie=af_getCookie('geo');af_getGeo.countryCode=cookie?cookie.split('-')[1]:'';}
return af_getGeo.countryCode;}
function af_hasAdblocker(){if(af_hasAdblocker.status===undefined){var adsbox=document.createElement('div');adsbox.innerHTML='&nbsp;';adsbox.style.position='absolute';adsbox.style.top='-1000px';adsbox.className='adsbox';document.body.appendChild(adsbox);af_hasAdblocker.adsbox=adsbox;setTimeout(function(){af_hasAdblocker.status=(af_hasAdblocker.adsbox.offsetHeight===0);PubSub.publish('ad.block.detect',{status:af_hasAdblocker.status});},100);}
return af_hasAdblocker.status;}
var Aflog={};Aflog.Logger=(function(){var logger=function(options){this.initLogger(options);this.initLogs();};logger.prototype={constructor:logger,enabled:true,logmaticEndpoint:'https://api.logmatic.io/v1/input/',logmaticKeys:{'LOGMATIC_DEFAULT_KEY':'6maF6Z-rRW2rV2wr8o3AIQ','PAGE_VISIT':'4K2CgF19Q-aJ2b0pNTV48g'},initLogger:function initLogger(data){this.logmaticInit();this.datalayer=(data&&data.datalayer?data.datalayer:(window.af_dataLayer?af_dataLayer[0]:null));this.analyticsInit();},setDataLayer:function setDataLayer(datalayer){this.datalayer=datalayer;},initLogs:function initLogs(){this.logs={logmatic:{},console:{}};},dispatch:function dispatch(method,log,severity){if(typeof severity==='undefined'){severity='log';}
switch(method){case'logmatic':this.logmaticPost(log.message,log.context);break;case'console':this.logConsole(log,severity);break;default:break;}},stackDispatch:function stackDispatch(method,logStackName){if(this.getLogStack(method,logStackName)!==null){for(var i=0;i<this.logs[method][logStackName].length;i++){switch(method){case'logmatic':this.dispatch('logmatic',{message:logStackName,context:this.logs[method][logStackName][i]});break;case'console':this.dispatch('console',this.logs[method][logStackName][i]);break;default:break;}}
this.cleanLogStack(method,logStackName);}},bulkDispatch:function bulkDispatch(method){if(this.logs!==null&&this.logs.hasOwnProperty(method)){for(logStackName in this.logs[method]){this.stackDispatch(method,logStackName);}
this.logs[method]={};}},dispatchAll:function dispatchAll(){for(loggerLogStack in this.logs){this.bulkDispatch(loggerLogStack);}
this.initLogs();},stackLog:function stackLog(method,logStackName,log){if(this.getLogStack(method,logStackName)!==null){this.logs[method][logStackName].push(log);}},cleanLogStack:function cleanLogStack(method,logStackName){if(this.getLogStack(method,logStackName)!==null){this.logs[method][logStackName]=[];}},getLogStack:function getLogStack(method,logStackName){if(this.logs.hasOwnProperty(method)){if(!this.logs[method].hasOwnProperty(logStackName)){this.logs[method][logStackName]=[];}
return this.logs[method][logStackName];}else{return null;}},enableLogging:function enableLogging(stack){this.enabled=true;},disableLogging:function disableLogging(stack){this.enabled=false;},analyticsInit:function analyticsInit(){if(!window.PubSub)return;PubSub.subscribe('datalayer.ready',af_bind(this,function(){this.analyticsLog();}));PubSub.subscribe('tracking.call',af_bind(this,function(){this.datalayer.vuid=af_guid();this.analyticsLog();}));},analyticsLog:function analyticsLog(){if(!this.datalayer)return;if(Math.floor((Math.random()*100))>10)return;this.dispatch('logmatic',{message:'PAGE_VISIT',context:{datalayer:this.datalayer}});},logmaticInit:function logmaticInit(){logmatic.init(this.logmaticGetKey('LOGMATIC_DEFAULT_KEY'));logmatic.setIPTracking('client.IP');logmatic.setUserAgentTracking('client.user-agent');logmatic.setBulkOptions({lingerMs:0,maxPostCount:1,maxWaitingCount:-1});},logmaticForceKey:function logmaticForceKey(logmaticKey){logmatic.forceEndpoint('https://api.logmatic.io/v1/input/'+logmaticKey);},logmaticAssociateStackKey:function logmaticAssociateStackKey(logStackName,key){this.logmaticKeys[logStackName]=key;},logmaticInitStackKeys:function logmaticInitStackKeys(keys){for(var message in keys){this.logmaticAssociateStackKey(message,keys[message]);}},logmaticGetKey:function logmaticGetKey(logStackName){if(this.logmaticKeys.hasOwnProperty(logStackName)){return this.logmaticKeys[logStackName];}else{return this.logmaticKeys['LOGMATIC_DEFAULT_KEY'];}},logmaticPush:function logmaticPush(message,context){logmatic.log(message,context);},logmaticPost:function logmaticPost(message,log){log.message=message;log.severity='info';log.url=window.location.href;var request;if(typeof(XDomainRequest)!=='undefined'){request=new XDomainRequest();}else{request=new XMLHttpRequest();}
var url=this.logmaticEndpoint+this.logmaticGetKey(message);request.open('POST',url,true);if(typeof(XDomainRequest)==='undefined'){request.setRequestHeader('Content-Type','application/json; charset=UTF-8');request.setRequestHeader('X-Logmatic-Add-IP','client.IP');request.setRequestHeader('X-Logmatic-Add-UserAgent','client.user-agent');}
request.onerror=function(response){};request.onload=function(response){};request.send(JSON.stringify([log]));},logConsole:function logConsole(log,type){if(!this.enabled||!window.console){return;}
if(Array.isArray(log)||typeof log==='object'){type='table';}
if(type==='table'){console.table(log);}else{console[type].apply(console,log);}}}
return logger;})();
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){var b={};b.MODE={IMMEDIATE:0,LINGER:1,ERROR:2};var c=500,d=3e4,e=null,f=b.MODE.LINGER,g=0,h=a;return b.reset=function(){b.isScheduled()&&clearTimeout(e),e=null},b.isScheduled=function(){return null!==e},b.setMode=function(a){f=a,f!==b.MODE.ERROR&&(g=0)},b.postpone=function(a){var i;switch(b.reset(),f){case b.MODE.IMMEDIATE:i=0;break;case b.MODE.LINGER:i=h;break;case b.MODE.ERROR:var j=c*Math.pow(2,g);g++,i=Math.min(j,d)}e=setTimeout(a,i)},b}function c(a){a&&(j=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;j&&(a={},a[j]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");t(b,a),d.apply?d.apply(console,arguments):d(b)}})}function d(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,j&&(c[j]="error"),t(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},j&&(g[j]="error"),t(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var e,f,g,h,i="https://api.logmatic.io/v1/input/",j="severity",k=500,l=10,m=-1,n=[],o=204800,p=b(k),q=function(a){i+=a},r=function(a){i=a},s=function(a){a=a||{},null!=a.lingerMs&&a.lingerMs>=0&&(k=a.lingerMs),null!=a.maxPostCount&&(a.maxPostCount<1&&(a.maxPostCount=1),l=a.maxPostCount),null!=a.maxWaitingCount&&(m=a.maxWaitingCount),null!=a.maxContentSize&&(o=a.maxContentSize)},t=function(b,c){if(i){var d={message:b};j&&(d[j]="info"),a(c,d),u(d)}},u=function(b){a(e,b),h&&(b[h]=window.location.href),n=n||[],n.push(JSON.stringify(b)),m>=0&&n.length>m&&n.shift(),v()},v=function(){p.isScheduled()||p.postpone(w)},w=function(){function b(a){200===a||0===a?n.length>0?p.setMode(p.MODE.IMMEDIATE):p.setMode(p.MODE.LINGER):p.setMode(p.MODE.ERROR),p.reset(),0!==n.length&&v()}for(var c=[],d=0;n.length>0&&c.length<l;){var j=n.shift();if(d+=j.length,d>o){if(j.length>o){var k={severity:"warn",message:"Message dropped as its size exceeded the hard limit of 200 kBytes"};a(e,k),JSON.stringify(k).length>o&&(k={severity:"error",message:"Message dropped because the context size provided exceeded the hard limit of 200 kBytes"}),k[h]=window.location.href,j=JSON.stringify(k)}n.unshift(j);break}c.push(j)}if(0===c.length)return void b(0);var m,q="["+c.join(",")+"]";m="undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest,m.open("POST",i,!0),"undefined"==typeof XDomainRequest&&(m.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&m.setRequestHeader("X-Logmatic-Add-IP",f),g&&m.setRequestHeader("X-Logmatic-Add-UserAgent",g)),m.onerror=function(a){b(a.target.status)},m.onload=function(a){b(a.target.status)},m.send(q)},x=function(a){e=a},y=function(a){h=a},z=function(a){f=a},A=function(a){g=a};return{init:q,log:t,forceEndpoint:r,setMetas:x,setSendErrors:d,setSendConsoleErrors:d,setSendConsoleLogs:c,setIPTracking:z,setUserAgentTracking:A,setURLTracking:y,setBulkOptions:s}});
(function(root,factory){'use strict';if(typeof define==='function'&&define.amd){define(['exports'],factory);}else if(typeof exports==='object'){factory(exports);}else{var PubSub={};root.PubSub=PubSub;factory(PubSub);}}((typeof window==='object'&&window)||this,function(PubSub){'use strict';var messages={},lastUid=-1;function hasKeys(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return true;}}
return false;}
function throwException(ex){return function reThrowException(){throw ex;};}
function callSubscriberWithDelayedExceptions(subscriber,message,data){try{subscriber(message,data);}catch(ex){setTimeout(throwException(ex),0);}}
function callSubscriberWithImmediateExceptions(subscriber,message,data){subscriber(message,data);}
function deliverMessage(originalMessage,matchedMessage,data,immediateExceptions){var subscribers=messages[matchedMessage],callSubscriber=immediateExceptions?callSubscriberWithImmediateExceptions:callSubscriberWithDelayedExceptions,s;if(!messages.hasOwnProperty(matchedMessage)){return;}
for(s in subscribers){if(subscribers.hasOwnProperty(s)){callSubscriber(subscribers[s],originalMessage,data);}}}
function createDeliveryFunction(message,data,immediateExceptions){return function deliverNamespaced(){var topic=String(message),position=topic.lastIndexOf('.');deliverMessage(message,message,data,immediateExceptions);while(position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');deliverMessage(message,topic,data,immediateExceptions);}};}
function messageHasSubscribers(message){var topic=String(message),found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic])),position=topic.lastIndexOf('.');while(!found&&position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic]));}
return found;}
function publish(message,data,sync,immediateExceptions){var deliver=createDeliveryFunction(message,data,immediateExceptions),hasSubscribers=messageHasSubscribers(message);if(!hasSubscribers){return false;}
if(sync===true){deliver();}else{setTimeout(deliver,0);}
return true;}
PubSub.publish=function(message,data){return publish(message,data,false,PubSub.immediateExceptions);};PubSub.publishSync=function(message,data){return publish(message,data,true,PubSub.immediateExceptions);};PubSub.subscribe=function(message,func){if(typeof func!=='function'){return false;}
if(!messages.hasOwnProperty(message)){messages[message]={};}
var token='uid_'+String(++lastUid);messages[message][token]=func;return token;};PubSub.clearAllSubscriptions=function clearAllSubscriptions(){messages={};};PubSub.clearSubscriptions=function clearSubscriptions(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){delete messages[m];}}};PubSub.unsubscribe=function(value){var isTopic=typeof value==='string'&&messages.hasOwnProperty(value),isToken=!isTopic&&typeof value==='string',isFunction=typeof value==='function',result=false,m,message,t;if(isTopic){delete messages[value];return;}
for(m in messages){if(messages.hasOwnProperty(m)){message=messages[m];if(isToken&&message[value]){delete message[value];result=value;break;}
if(isFunction){for(t in message){if(message.hasOwnProperty(t)&&message[t]===value){delete message[t];result=true;}}}}}
return result;};}));
